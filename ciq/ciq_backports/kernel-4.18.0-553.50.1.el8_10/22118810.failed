ice: fold ice_ptp_read_time into ice_ptp_gettimex64

jira LE-2815
Rebuild_History Non-Buildable kernel-4.18.0-553.50.1.el8_10
commit-author Michal Schmidt <mschmidt@redhat.com>
commit 22118810fc7cc98f3afb38919348060ab67ddc5b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-553.50.1.el8_10/22118810.failed

This is a cleanup. It is unnecessary to have this function just to call
another function.

	Reviewed-by: Przemek Kitszel <przemyslaw.kitszel@intel.com>
	Signed-off-by: Michal Schmidt <mschmidt@redhat.com>
	Reviewed-by: Sai Krishna <saikrishnag@marvell.com>
	Tested-by: Pucha Himasekhar Reddy <himasekharx.reddy.pucha@intel.com> (A Contingent worker at Intel)
	Reviewed-by: Kalesh AP <kalesh-anakkur.purayil@broadcom.com>
	Signed-off-by: Tony Nguyen <anthony.l.nguyen@intel.com>
(cherry picked from commit 22118810fc7cc98f3afb38919348060ab67ddc5b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ice/ice_ptp.c
diff --cc drivers/net/ethernet/intel/ice/ice_ptp.c
index 3052bd0a1ae7,0f17fc1181d2..000000000000
--- a/drivers/net/ethernet/intel/ice/ice_ptp.c
+++ b/drivers/net/ethernet/intel/ice/ice_ptp.c
@@@ -1801,16 -1906,10 +1781,23 @@@ ice_ptp_gettimex64(struct ptp_clock_inf
  		   struct ptp_system_timestamp *sts)
  {
  	struct ice_pf *pf = ptp_info_to_pf(info);
++<<<<<<< HEAD
 +	struct ice_hw *hw = &pf->hw;
 +
 +	if (!ice_ptp_lock(hw)) {
 +		dev_err(ice_pf_to_dev(pf), "PTP failed to get time\n");
 +		return -EBUSY;
 +	}
 +
 +	ice_ptp_read_time(pf, ts, sts);
 +	ice_ptp_unlock(hw);
 +
++=======
+ 	u64 time_ns;
+ 
+ 	time_ns = ice_ptp_read_src_clk_reg(pf, sts);
+ 	*ts = ns_to_timespec64(time_ns);
++>>>>>>> 22118810fc7c (ice: fold ice_ptp_read_time into ice_ptp_gettimex64)
  	return 0;
  }
  
* Unmerged path drivers/net/ethernet/intel/ice/ice_ptp.c
