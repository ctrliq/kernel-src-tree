Bluetooth: btmtksdio: fix resume failure

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-509.el8
commit-author Sean Wang <sean.wang@mediatek.com>
commit 561ae1d46a8ddcbc13162d5771f5ed6c8249e730
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-509.el8/561ae1d4.failed

btmtksdio have to rely on MMC_PM_KEEP_POWER in pm_flags to avoid that
SDIO power is being shut off during the device is in suspend. That fixes
the SDIO command fails to access the bus after the device is resumed.

Fixes: 7f3c563c575e7 ("Bluetooth: btmtksdio: Add runtime PM support to SDIO based Bluetooth")
Co-developed-by: Mark-yw Chen <mark-yw.chen@mediatek.com>
	Signed-off-by: Mark-yw Chen <mark-yw.chen@mediatek.com>
	Signed-off-by: Sean Wang <sean.wang@mediatek.com>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
(cherry picked from commit 561ae1d46a8ddcbc13162d5771f5ed6c8249e730)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/bluetooth/btmtksdio.c
diff --cc drivers/bluetooth/btmtksdio.c
index 9bc3e3bd14e8,143404745240..000000000000
--- a/drivers/bluetooth/btmtksdio.c
+++ b/drivers/bluetooth/btmtksdio.c
@@@ -1074,6 -1062,11 +1074,14 @@@ static int btmtksdio_runtime_suspend(st
  	if (!bdev)
  		return 0;
  
++<<<<<<< HEAD
++=======
+ 	if (!test_bit(BTMTKSDIO_FUNC_ENABLED, &bdev->tx_state))
+ 		return 0;
+ 
+ 	sdio_set_host_pm_flags(func, MMC_PM_KEEP_POWER);
+ 
++>>>>>>> 561ae1d46a8d (Bluetooth: btmtksdio: fix resume failure)
  	sdio_claim_host(bdev->func);
  
  	sdio_writel(bdev->func, C_FW_OWN_REQ_SET, MTK_REG_CHLPCR, &err);
* Unmerged path drivers/bluetooth/btmtksdio.c
