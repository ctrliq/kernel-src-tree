dm mirror: add DMERR message if alloc_workqueue fails

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-494.el8
commit-author Yangtao Li <frank.li@vivo.com>
commit 990f61e43c4d3235486707568edf59d67488a575
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-494.el8/990f61e4.failed

	Signed-off-by: Yangtao Li <frank.li@vivo.com>
	Signed-off-by: Mike Snitzer <snitzer@kernel.org>
(cherry picked from commit 990f61e43c4d3235486707568edf59d67488a575)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/dm-raid1.c
diff --cc drivers/md/dm-raid1.c
index 8aeb24485a19,4b2b40f81a1d..000000000000
--- a/drivers/md/dm-raid1.c
+++ b/drivers/md/dm-raid1.c
@@@ -1471,11 -1498,13 +1471,18 @@@ static struct target_type mirror_targe
  
  static int __init dm_mirror_init(void)
  {
 -	int r;
 +	int r = -ENOMEM;
  
  	dm_raid1_wq = alloc_workqueue("dm_raid1_wq", 0, 0);
++<<<<<<< HEAD
 +	if (!dm_raid1_wq)
 +		goto bad_target;
++=======
+ 	if (!dm_raid1_wq) {
+ 		DMERR("Failed to alloc workqueue");
+ 		return -ENOMEM;
+ 	}
++>>>>>>> 990f61e43c4d (dm mirror: add DMERR message if alloc_workqueue fails)
  
  	r = dm_register_target(&mirror_target);
  	if (r < 0) {
* Unmerged path drivers/md/dm-raid1.c
