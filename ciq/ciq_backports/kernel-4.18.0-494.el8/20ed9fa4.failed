perf branch: Fix interpretation of branch records

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-494.el8
commit-author James Clark <james.clark@arm.com>
commit 20ed9fa4965875fdde5bfd65d838465e38d46b22
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-494.el8/20ed9fa4.failed

Commit 93315e46b000fc80 ("perf/core: Add speculation info to branch
entries") added a new field in between type and new_type. Perf has its
own copy of this struct so update it to match the kernel side.

This doesn't currently cause any issues because new_type is only used by
the Arm BRBE driver which isn't merged yet.

Committer notes:

Is this really an ABI? How are we supposed to deal with old perf.data
files with new tools and vice versa? :-\

Fixes: 93315e46b000fc80 ("perf/core: Add speculation info to branch entries")
	Reviewed-by: Anshuman Khandual <anshuman.khandual@arm.com>
	Signed-off-by: James Clark <james.clark@arm.com>
	Acked-by: Namhyung Kim <namhyung@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Ingo Molnar <mingo@redhat.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Mark Rutland <mark.rutland@arm.com>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Sandipan Das <sandipan.das@amd.com>
Link: https://lore.kernel.org/r/20221130165158.517385-1-james.clark@arm.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 20ed9fa4965875fdde5bfd65d838465e38d46b22)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/branch.h
diff --cc tools/perf/util/branch.h
index 17b2ccc61094,3ed792db1125..000000000000
--- a/tools/perf/util/branch.h
+++ b/tools/perf/util/branch.h
@@@ -24,7 -22,10 +24,14 @@@ struct branch_flags 
  			u64 abort:1;
  			u64 cycles:16;
  			u64 type:4;
++<<<<<<< HEAD
 +			u64 reserved:40;
++=======
+ 			u64 spec:2;
+ 			u64 new_type:4;
+ 			u64 priv:3;
+ 			u64 reserved:31;
++>>>>>>> 20ed9fa49658 (perf branch: Fix interpretation of branch records)
  		};
  	};
  };
* Unmerged path tools/perf/util/branch.h
