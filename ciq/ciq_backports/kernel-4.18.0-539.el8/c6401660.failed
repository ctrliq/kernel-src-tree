x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-539.el8
commit-author Avadhut Naik <Avadhut.Naik@amd.com>
commit c64016609b6f66b753b5f37929a191477fa584c0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-539.el8/c6401660.failed

Add new PCI Device IDs required to support AMD's new Family 1Ah-based
models 00h-1Fh, 20h and 40h-4Fh.

  [ bp: Zap a useless sentence. ]

Co-developed-by: Mario Limonciello <mario.limonciello@amd.com>
	Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
	Signed-off-by: Avadhut Naik <Avadhut.Naik@amd.com>
	Signed-off-by: Borislav Petkov (AMD) <bp@alien8.de>
Link: https://lore.kernel.org/r/20230809035244.2722455-2-avadhut.naik@amd.com
(cherry picked from commit c64016609b6f66b753b5f37929a191477fa584c0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/amd_nb.c
#	include/linux/pci_ids.h
diff --cc arch/x86/kernel/amd_nb.c
index 96fd015301b2,356de955e78d..000000000000
--- a/arch/x86/kernel/amd_nb.c
+++ b/arch/x86/kernel/amd_nb.c
@@@ -15,24 -15,36 +15,57 @@@
  #include <linux/pci_ids.h>
  #include <asm/amd_nb.h>
  
++<<<<<<< HEAD
 +#define PCI_DEVICE_ID_AMD_17H_ROOT	0x1450
 +#define PCI_DEVICE_ID_AMD_17H_M10H_ROOT	0x15d0
 +#define PCI_DEVICE_ID_AMD_17H_M30H_ROOT	0x1480
 +#define PCI_DEVICE_ID_AMD_17H_M60H_ROOT	0x1630
 +#define PCI_DEVICE_ID_AMD_19H_M10H_ROOT	0x14a4
 +#define PCI_DEVICE_ID_AMD_17H_DF_F4	0x1464
 +#define PCI_DEVICE_ID_AMD_17H_M10H_DF_F4 0x15ec
 +#define PCI_DEVICE_ID_AMD_17H_M30H_DF_F4 0x1494
 +#define PCI_DEVICE_ID_AMD_17H_M60H_DF_F4 0x144c
 +#define PCI_DEVICE_ID_AMD_17H_M70H_DF_F4 0x1444
 +#define PCI_DEVICE_ID_AMD_19H_DF_F4	0x1654
 +#define PCI_DEVICE_ID_AMD_19H_M10H_DF_F4 0x14b1
 +#define PCI_DEVICE_ID_AMD_19H_M40H_ROOT	0x14b5
 +#define PCI_DEVICE_ID_AMD_19H_M40H_DF_F4 0x167d
 +#define PCI_DEVICE_ID_AMD_19H_M50H_DF_F4 0x166e
 +#define PCI_DEVICE_ID_AMD_19H_M78H_DF_F4 0x12fc
 +
 +/* Protect the PCI config register pairs used for SMN and DF indirect access. */
++=======
+ #define PCI_DEVICE_ID_AMD_17H_ROOT		0x1450
+ #define PCI_DEVICE_ID_AMD_17H_M10H_ROOT		0x15d0
+ #define PCI_DEVICE_ID_AMD_17H_M30H_ROOT		0x1480
+ #define PCI_DEVICE_ID_AMD_17H_M60H_ROOT		0x1630
+ #define PCI_DEVICE_ID_AMD_17H_MA0H_ROOT		0x14b5
+ #define PCI_DEVICE_ID_AMD_19H_M10H_ROOT		0x14a4
+ #define PCI_DEVICE_ID_AMD_19H_M40H_ROOT		0x14b5
+ #define PCI_DEVICE_ID_AMD_19H_M60H_ROOT		0x14d8
+ #define PCI_DEVICE_ID_AMD_19H_M70H_ROOT		0x14e8
+ #define PCI_DEVICE_ID_AMD_1AH_M00H_ROOT		0x153a
+ #define PCI_DEVICE_ID_AMD_1AH_M20H_ROOT		0x1507
+ #define PCI_DEVICE_ID_AMD_MI200_ROOT		0x14bb
+ 
+ #define PCI_DEVICE_ID_AMD_17H_DF_F4		0x1464
+ #define PCI_DEVICE_ID_AMD_17H_M10H_DF_F4	0x15ec
+ #define PCI_DEVICE_ID_AMD_17H_M30H_DF_F4	0x1494
+ #define PCI_DEVICE_ID_AMD_17H_M60H_DF_F4	0x144c
+ #define PCI_DEVICE_ID_AMD_17H_M70H_DF_F4	0x1444
+ #define PCI_DEVICE_ID_AMD_17H_MA0H_DF_F4	0x1728
+ #define PCI_DEVICE_ID_AMD_19H_DF_F4		0x1654
+ #define PCI_DEVICE_ID_AMD_19H_M10H_DF_F4	0x14b1
+ #define PCI_DEVICE_ID_AMD_19H_M40H_DF_F4	0x167d
+ #define PCI_DEVICE_ID_AMD_19H_M50H_DF_F4	0x166e
+ #define PCI_DEVICE_ID_AMD_19H_M60H_DF_F4	0x14e4
+ #define PCI_DEVICE_ID_AMD_19H_M70H_DF_F4	0x14f4
+ #define PCI_DEVICE_ID_AMD_19H_M78H_DF_F4	0x12fc
+ #define PCI_DEVICE_ID_AMD_1AH_M00H_DF_F4	0x12c4
+ #define PCI_DEVICE_ID_AMD_MI200_DF_F4		0x14d4
+ 
+ /* Protect the PCI config register pairs used for SMN. */
++>>>>>>> c64016609b6f (x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models)
  static DEFINE_MUTEX(smn_mutex);
  
  static u32 *flush_words;
@@@ -42,8 -54,14 +75,16 @@@ static const struct pci_device_id amd_r
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_17H_M10H_ROOT) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_17H_M30H_ROOT) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_17H_M60H_ROOT) },
 -	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_17H_MA0H_ROOT) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M10H_ROOT) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M40H_ROOT) },
++<<<<<<< HEAD
++=======
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M60H_ROOT) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M70H_ROOT) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_1AH_M00H_ROOT) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_1AH_M20H_ROOT) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_MI200_ROOT) },
++>>>>>>> c64016609b6f (x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models)
  	{}
  };
  
@@@ -68,7 -87,12 +109,13 @@@ static const struct pci_device_id amd_n
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M10H_DF_F3) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M40H_DF_F3) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M50H_DF_F3) },
 -	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M60H_DF_F3) },
 -	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M70H_DF_F3) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M78H_DF_F3) },
++<<<<<<< HEAD
++=======
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_1AH_M00H_DF_F3) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_1AH_M20H_DF_F3) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_MI200_DF_F3) },
++>>>>>>> c64016609b6f (x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models)
  	{}
  };
  
@@@ -88,6 -113,8 +135,11 @@@ static const struct pci_device_id amd_n
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M40H_DF_F4) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_19H_M50H_DF_F4) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_CNB17H_F4) },
++<<<<<<< HEAD
++=======
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_1AH_M00H_DF_F4) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_AMD, PCI_DEVICE_ID_AMD_MI200_DF_F4) },
++>>>>>>> c64016609b6f (x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models)
  	{}
  };
  
diff --cc include/linux/pci_ids.h
index 121bf1e0aab6,8f9a459e1671..000000000000
--- a/include/linux/pci_ids.h
+++ b/include/linux/pci_ids.h
@@@ -560,7 -573,12 +560,13 @@@
  #define PCI_DEVICE_ID_AMD_19H_M10H_DF_F3 0x14b0
  #define PCI_DEVICE_ID_AMD_19H_M40H_DF_F3 0x167c
  #define PCI_DEVICE_ID_AMD_19H_M50H_DF_F3 0x166d
 -#define PCI_DEVICE_ID_AMD_19H_M60H_DF_F3 0x14e3
 -#define PCI_DEVICE_ID_AMD_19H_M70H_DF_F3 0x14f3
  #define PCI_DEVICE_ID_AMD_19H_M78H_DF_F3 0x12fb
++<<<<<<< HEAD
++=======
+ #define PCI_DEVICE_ID_AMD_1AH_M00H_DF_F3 0x12c3
+ #define PCI_DEVICE_ID_AMD_1AH_M20H_DF_F3 0x16fb
+ #define PCI_DEVICE_ID_AMD_MI200_DF_F3	0x14d3
++>>>>>>> c64016609b6f (x86/amd_nb: Add PCI IDs for AMD Family 1Ah-based models)
  #define PCI_DEVICE_ID_AMD_CNB17H_F3	0x1703
  #define PCI_DEVICE_ID_AMD_LANCE		0x2000
  #define PCI_DEVICE_ID_AMD_LANCE_HOME	0x2001
* Unmerged path arch/x86/kernel/amd_nb.c
* Unmerged path include/linux/pci_ids.h
