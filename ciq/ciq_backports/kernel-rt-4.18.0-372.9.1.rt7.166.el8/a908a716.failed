ASoC/extcon: arizona: Move arizona jack code to sound/soc/codecs/arizona-jack.c

jira LE-1907
Rebuild_History Non-Buildable kernel-rt-4.18.0-372.9.1.rt7.166.el8
commit-author Hans de Goede <hdegoede@redhat.com>
commit a908a716696eee75bf85199cde2b0989290536d1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-rt-4.18.0-372.9.1.rt7.166.el8/a908a716.failed

The jack handling for arizona codecs is being refactored so that it is
done directly by the codec drivers, instead of having an extcon-driver
bind to a separate "arizona-extcon" child-device for this.

drivers/mfd/arizona-core.c has already been updated to no longer
instantiate an "arizona-extcon" child-device for the arizona codecs.

This means that the "arizona-extcon" driver is no longer useful
(there are no longer any devices for it to bind to).

This commit drops the extcon Kconfig / Makefile bits and moves
drivers/extcon/extcon-arizona.c to sound/soc/codecs/arizona-jack.c .

This is a preparation patch for converting the arizona extcon-driver into
a helper library for letting the arizona codec-drivers directly report jack
state through the standard sound/soc/soc-jack.c functions.

	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
	Acked-by: Charles Keepax <ckeepax@opensource.cirrus.com>
	Tested-by: Charles Keepax <ckeepax@opensource.cirrus.com>
	Acked-by: Chanwoo Choi <cw00.choi@samsung.com>
	Signed-off-by: Lee Jones <lee.jones@linaro.org>
(cherry picked from commit a908a716696eee75bf85199cde2b0989290536d1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	MAINTAINERS
diff --cc MAINTAINERS
index 0afa1bcc7376,dd40d5e551b0..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -16025,19 -19367,17 +16025,22 @@@ F:	drivers/net/wireless/wl3501
  
  WOLFSON MICROELECTRONICS DRIVERS
  L:	patches@opensource.cirrus.com
 -S:	Supported
 -W:	https://github.com/CirrusLogic/linux-drivers/wiki
  T:	git https://github.com/CirrusLogic/linux-drivers.git
 -F:	Documentation/devicetree/bindings/extcon/wlf,arizona.yaml
 -F:	Documentation/devicetree/bindings/mfd/wlf,arizona.yaml
 +W:	https://github.com/CirrusLogic/linux-drivers/wiki
 +S:	Supported
 +F:	Documentation/hwmon/wm83??
 +F:	Documentation/devicetree/bindings/extcon/extcon-arizona.txt
 +F:	Documentation/devicetree/bindings/regulator/arizona-regulator.txt
 +F:	Documentation/devicetree/bindings/mfd/arizona.txt
  F:	Documentation/devicetree/bindings/mfd/wm831x.txt
 -F:	Documentation/devicetree/bindings/regulator/wlf,arizona.yaml
 -F:	Documentation/devicetree/bindings/sound/wlf,arizona.yaml
 -F:	Documentation/hwmon/wm83??.rst
 -F:	arch/arm/mach-s3c/mach-crag6410*
 +F:	Documentation/devicetree/bindings/sound/wlf,arizona.txt
 +F:	arch/arm/mach-s3c64xx/mach-crag6410*
  F:	drivers/clk/clk-wm83*.c
++<<<<<<< HEAD
 +F:	drivers/extcon/extcon-arizona.c
 +F:	drivers/leds/leds-wm83*.c
++=======
++>>>>>>> a908a716696e (ASoC/extcon: arizona: Move arizona jack code to sound/soc/codecs/arizona-jack.c)
  F:	drivers/gpio/gpio-*wm*.c
  F:	drivers/gpio/gpio-arizona.c
  F:	drivers/hwmon/wm83??-hwmon.c
@@@ -16060,9 -19401,9 +16063,14 @@@ F:	include/linux/mfd/wm8400
  F:	include/linux/regulator/arizona*
  F:	include/linux/wm97xx.h
  F:	include/sound/wm????.h
++<<<<<<< HEAD
 +F:	sound/soc/codecs/arizona.?
++=======
+ F:	sound/soc/codecs/arizona*
+ F:	sound/soc/codecs/cs47l24*
++>>>>>>> a908a716696e (ASoC/extcon: arizona: Move arizona jack code to sound/soc/codecs/arizona-jack.c)
  F:	sound/soc/codecs/wm*
 +F:	sound/soc/codecs/cs47l24*
  
  WORKQUEUE
  M:	Tejun Heo <tj@kernel.org>
* Unmerged path MAINTAINERS
diff --git a/drivers/extcon/Kconfig b/drivers/extcon/Kconfig
index 022df8193edd..230cf1d4ac2a 100644
--- a/drivers/extcon/Kconfig
+++ b/drivers/extcon/Kconfig
@@ -20,14 +20,6 @@ config EXTCON_ADC_JACK
 	help
 	  Say Y here to enable extcon device driver based on ADC values.
 
-config EXTCON_ARIZONA
-	tristate "Wolfson Arizona EXTCON support"
-	depends on MFD_ARIZONA && INPUT && SND_SOC
-	help
-	  Say Y here to enable support for external accessory detection
-	  with Wolfson Arizona devices. These are audio CODECs with
-	  advanced audio accessory detection support.
-
 config EXTCON_AXP288
 	tristate "X-Power AXP288 EXTCON support"
 	depends on MFD_AXP20X && USB_SUPPORT && X86 && ACPI
diff --git a/drivers/extcon/Makefile b/drivers/extcon/Makefile
index 0888fdeded72..26a208ad6289 100644
--- a/drivers/extcon/Makefile
+++ b/drivers/extcon/Makefile
@@ -6,7 +6,6 @@
 obj-$(CONFIG_EXTCON)		+= extcon-core.o
 extcon-core-objs		+= extcon.o devres.o
 obj-$(CONFIG_EXTCON_ADC_JACK)	+= extcon-adc-jack.o
-obj-$(CONFIG_EXTCON_ARIZONA)	+= extcon-arizona.o
 obj-$(CONFIG_EXTCON_AXP288)	+= extcon-axp288.o
 obj-$(CONFIG_EXTCON_GPIO)	+= extcon-gpio.o
 obj-$(CONFIG_EXTCON_INTEL_INT3496) += extcon-intel-int3496.o
diff --git a/drivers/extcon/extcon-arizona.c b/sound/soc/codecs/arizona-jack.c
similarity index 100%
rename from drivers/extcon/extcon-arizona.c
rename to sound/soc/codecs/arizona-jack.c
