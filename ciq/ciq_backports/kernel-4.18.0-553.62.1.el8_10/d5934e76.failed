cleanup: Add usage and style documentation

jira LE-3587
Rebuild_History Non-Buildable kernel-4.18.0-553.62.1.el8_10
commit-author Dan Williams <dan.j.williams@intel.com>
commit d5934e76316e84eced836b6b2bafae1837d1cd58
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-553.62.1.el8_10/d5934e76.failed

When proposing that PCI grow some new cleanup helpers for pci_dev_put()
and pci_dev_{lock,unlock} [1], Bjorn had some fundamental questions
about expectations and best practices. Upon reviewing an updated
changelog with those details he recommended adding them to documentation
in the header file itself.

Add that documentation and link it into the rendering for
Documentation/core-api/.

	Signed-off-by: Dan Williams <dan.j.williams@intel.com>
	Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
	Reviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
	Reviewed-by: Kevin Tian <kevin.tian@intel.com>
Link: https://lore.kernel.org/r/171175585714.2192972.12661675876300167762.stgit@dwillia2-xfh.jf.intel.com
(cherry picked from commit d5934e76316e84eced836b6b2bafae1837d1cd58)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/core-api/index.rst
#	include/linux/cleanup.h
diff --cc Documentation/core-api/index.rst
index d371ef01764e,b99d2fb3e2f1..000000000000
--- a/Documentation/core-api/index.rst
+++ b/Documentation/core-api/index.rst
@@@ -12,18 -17,89 +12,40 @@@ Core utilitie
     :maxdepth: 1
  
     kernel-api
++<<<<<<< HEAD
++=======
+    workqueue
+    watch_queue
+    printk-basics
+    printk-formats
+    printk-index
+    symbol-namespaces
+    asm-annotations
+ 
+ Data structures and low-level utilities
+ =======================================
+ 
+ Library functionality that is used throughout the kernel.
+ 
+ .. toctree::
+    :maxdepth: 1
+ 
+    kobject
+    kref
+    cleanup
++>>>>>>> d5934e76316e (cleanup: Add usage and style documentation)
     assoc_array
 -   xarray
 -   maple_tree
 -   idr
 -   circular-buffers
 -   rbtree
 -   generic-radix-tree
 -   packing
 -   this_cpu_ops
 -   timekeeping
 -   errseq
 -   wrappers/atomic_t
 -   wrappers/atomic_bitops
 -   floating-point
 -
 -Low level entry and exit
 -========================
 -
 -.. toctree::
 -   :maxdepth: 1
 -
 -   entry
 -
 -Concurrency primitives
 -======================
 -
 -How Linux keeps everything from happening at the same time.  See
 -Documentation/locking/index.rst for more related documentation.
 -
 -.. toctree::
 -   :maxdepth: 1
 -
 -   refcount-vs-atomic
 -   irq/index
 -   local_ops
 -   padata
 -   ../RCU/index
 -   wrappers/memory-barriers.rst
 -
 -Low-level hardware management
 -=============================
 -
 -Cache management, managing CPU hotplug, etc.
 -
 -.. toctree::
 -   :maxdepth: 1
 -
 +   atomic_ops
     cachetlb
 +   refcount-vs-atomic
     cpu_hotplug
 -   memory-hotplug
 +   idr
 +   local_ops
 +   workqueue
     genericirq
 -   protection-keys
 -
 -Memory management
 -=================
 -
 -How to allocate and use memory in the kernel.  Note that there is a lot
 -more memory-management documentation in Documentation/mm/index.rst.
 -
 -.. toctree::
 -   :maxdepth: 1
 -
 -   memory-allocation
 -   unaligned-memory-access
 +   xarray
 +   flexible-arrays
 +   librs
     dma-api
     dma-api-howto
     dma-attributes
* Unmerged path include/linux/cleanup.h
diff --git a/Documentation/core-api/cleanup.rst b/Documentation/core-api/cleanup.rst
new file mode 100644
index 000000000000..527eb2f8ec6e
--- /dev/null
+++ b/Documentation/core-api/cleanup.rst
@@ -0,0 +1,8 @@
+.. SPDX-License-Identifier: GPL-2.0
+
+===========================
+Scope-based Cleanup Helpers
+===========================
+
+.. kernel-doc:: include/linux/cleanup.h
+   :doc: scope-based cleanup helpers
* Unmerged path Documentation/core-api/index.rst
* Unmerged path include/linux/cleanup.h
