usb: typec: tipd: Fix typec_unregister_port error paths

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-500.el8
commit-author Sven Peter <sven@svenpeter.dev>
commit 4c8f27ba9ede0118cac9d775204f9b0ecdb877b0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-500.el8/4c8f27ba.failed

typec_unregister_port is only called for some error paths after
typec_register_port was successful. Ensure it's called in all
cases.

Fixes: 92440202a880 ("usb: typec: tipd: Only update power status on IRQ")
	Signed-off-by: Sven Peter <sven@svenpeter.dev>
	Reviewed-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>
Link: https://lore.kernel.org/r/20221114174449.34634-3-sven@svenpeter.dev
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 4c8f27ba9ede0118cac9d775204f9b0ecdb877b0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/typec/tipd/core.c
diff --cc drivers/usb/typec/tipd/core.c
index 1493ef9d4090,195c9c16f817..000000000000
--- a/drivers/usb/typec/tipd/core.c
+++ b/drivers/usb/typec/tipd/core.c
@@@ -693,6 -823,11 +693,14 @@@ static int tps6598x_probe(struct i2c_cl
  	}
  
  	if (status & TPS_STATUS_PLUG_PRESENT) {
++<<<<<<< HEAD
++=======
+ 		ret = tps6598x_read16(tps, TPS_REG_POWER_STATUS, &tps->pwr_status);
+ 		if (ret < 0) {
+ 			dev_err(tps->dev, "failed to read power status: %d\n", ret);
+ 			goto err_unregister_port;
+ 		}
++>>>>>>> 4c8f27ba9ede (usb: typec: tipd: Fix typec_unregister_port error paths)
  		ret = tps6598x_connect(tps, status);
  		if (ret)
  			dev_err(&client->dev, "failed to register partner\n");
* Unmerged path drivers/usb/typec/tipd/core.c
