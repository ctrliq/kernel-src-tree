ACPI: bus: Export acpi_dev_for_each_child() to modules

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit f8128c390e58928b16f197416d417cfa4c65f610
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/f8128c39.failed

Some pieces of modular code can benefit from using
acpi_dev_for_each_child(), so export it to modules.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit f8128c390e58928b16f197416d417cfa4c65f610)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/bus.c
diff --cc drivers/acpi/bus.c
index b4d279cc20e0,7027ff2edfba..000000000000
--- a/drivers/acpi/bus.c
+++ b/drivers/acpi/bus.c
@@@ -1095,7 -1081,39 +1095,43 @@@ struct bus_type acpi_bus_type = 
  	.remove		= acpi_device_remove,
  	.uevent		= acpi_device_uevent,
  };
++<<<<<<< HEAD
 +EXPORT_SYMBOL_GPL(acpi_bus_type);
++=======
+ 
+ int acpi_bus_for_each_dev(int (*fn)(struct device *, void *), void *data)
+ {
+ 	return bus_for_each_dev(&acpi_bus_type, NULL, data, fn);
+ }
+ EXPORT_SYMBOL_GPL(acpi_bus_for_each_dev);
+ 
+ struct acpi_dev_walk_context {
+ 	int (*fn)(struct acpi_device *, void *);
+ 	void *data;
+ };
+ 
+ static int acpi_dev_for_one_check(struct device *dev, void *context)
+ {
+ 	struct acpi_dev_walk_context *adwc = context;
+ 
+ 	if (dev->bus != &acpi_bus_type)
+ 		return 0;
+ 
+ 	return adwc->fn(to_acpi_device(dev), adwc->data);
+ }
+ EXPORT_SYMBOL_GPL(acpi_dev_for_each_child);
+ 
+ int acpi_dev_for_each_child(struct acpi_device *adev,
+ 			    int (*fn)(struct acpi_device *, void *), void *data)
+ {
+ 	struct acpi_dev_walk_context adwc = {
+ 		.fn = fn,
+ 		.data = data,
+ 	};
+ 
+ 	return device_for_each_child(&adev->dev, &adwc, acpi_dev_for_one_check);
+ }
++>>>>>>> f8128c390e58 (ACPI: bus: Export acpi_dev_for_each_child() to modules)
  
  /* --------------------------------------------------------------------------
                               Initialization/Cleanup
* Unmerged path drivers/acpi/bus.c
