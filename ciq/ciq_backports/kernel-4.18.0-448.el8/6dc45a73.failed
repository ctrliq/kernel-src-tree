scsi: qla2xxx: Revert "scsi: qla2xxx: Fix response queue handler reading stale packets"

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Arun Easi <aeasi@marvell.com>
commit 6dc45a7322cb9db48a5b6696597a00ef7c778ef9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/6dc45a73.failed

Reverting this commit so that a fixed up patch, without adding new module
parameters, can be submitted.

    Link: https://lore.kernel.org/stable/166039743723771@kroah.com/

This reverts commit b1f707146923335849fb70237eec27d4d1ae7d62.

Link: https://lore.kernel.org/r/20220826102559.17474-2-njavali@marvell.com
	Cc: stable@vger.kernel.org
	Reviewed-by: Himanshu Madhani <himanshu.madhani@oracle.com>
	Signed-off-by: Arun Easi <aeasi@marvell.com>
	Signed-off-by: Nilesh Javali <njavali@marvell.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 6dc45a7322cb9db48a5b6696597a00ef7c778ef9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_isr.c
#	drivers/scsi/qla2xxx/qla_os.c
diff --cc drivers/scsi/qla2xxx/qla_isr.c
index 3da39235cd87,ede76357ccb6..000000000000
--- a/drivers/scsi/qla2xxx/qla_isr.c
+++ b/drivers/scsi/qla2xxx/qla_isr.c
@@@ -3786,6 -3763,7 +3786,10 @@@ void qla24xx_process_response_queue(str
  	struct qla_hw_data *ha = vha->hw;
  	struct purex_entry_24xx *purex_entry;
  	struct purex_item *pure_item;
++<<<<<<< HEAD
++=======
+ 	u16 cur_ring_index;
++>>>>>>> 6dc45a7322cb (scsi: qla2xxx: Revert "scsi: qla2xxx: Fix response queue handler reading stale packets")
  
  	if (!ha->flags.fw_started)
  		return;
diff --cc drivers/scsi/qla2xxx/qla_os.c
index 33798c21ba44,ce7cf7750f62..000000000000
--- a/drivers/scsi/qla2xxx/qla_os.c
+++ b/drivers/scsi/qla2xxx/qla_os.c
@@@ -333,6 -332,17 +333,20 @@@ module_param(ql2xabts_wait_nvme, int, 0
  MODULE_PARM_DESC(ql2xabts_wait_nvme,
  		 "To wait for ABTS response on I/O timeouts for NVMe. (default: 1)");
  
++<<<<<<< HEAD
++=======
+ 
+ u32 ql2xdelay_before_pci_error_handling = 5;
+ module_param(ql2xdelay_before_pci_error_handling, uint, 0644);
+ MODULE_PARM_DESC(ql2xdelay_before_pci_error_handling,
+ 	"Number of seconds delayed before qla begin PCI error self-handling (default: 5).\n");
+ 
+ static void qla2x00_clear_drv_active(struct qla_hw_data *);
+ static void qla2x00_free_device(scsi_qla_host_t *);
+ static int qla2xxx_map_queues(struct Scsi_Host *shost);
+ static void qla2x00_destroy_deferred_work(struct qla_hw_data *);
+ 
++>>>>>>> 6dc45a7322cb (scsi: qla2xxx: Revert "scsi: qla2xxx: Fix response queue handler reading stale packets")
  u32 ql2xnvme_queues = DEF_NVME_HW_QUEUES;
  module_param(ql2xnvme_queues, uint, S_IRUGO);
  MODULE_PARM_DESC(ql2xnvme_queues,
* Unmerged path drivers/scsi/qla2xxx/qla_isr.c
* Unmerged path drivers/scsi/qla2xxx/qla_os.c
