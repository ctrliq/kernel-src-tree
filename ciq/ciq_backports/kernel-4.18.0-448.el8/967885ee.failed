ASoC: SOF: Introduce IPC-specific PCM ops

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
commit 967885ee45e48b669e0904a38f6aeb1a09b0d9a1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/967885ee.failed

Introduce the IPC-specific PCM ops that will be used to abstract the
PCM related IPC's.

	Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
	Reviewed-by: PÃ©ter Ujfalusi <peter.ujfalusi@linux.intel.com>
	Reviewed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20220317175044.1752400-12-ranjani.sridharan@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 967885ee45e48b669e0904a38f6aeb1a09b0d9a1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/sof-audio.h
#	sound/soc/sof/sof-priv.h
diff --cc sound/soc/sof/sof-audio.h
index 11e04ac635fc,4d25e781e5ae..000000000000
--- a/sound/soc/sof/sof-audio.h
+++ b/sound/soc/sof/sof-audio.h
@@@ -30,13 -30,42 +30,34 @@@
  
  #define WIDGET_IS_DAI(id) ((id) == snd_soc_dapm_dai_in || (id) == snd_soc_dapm_dai_out)
  
 -/*
 - * Volume fractional word length define to 16 sets
 - * the volume linear gain value to use Qx.16 format
 - */
 -#define VOLUME_FWL	16
 -
  struct snd_sof_widget;
  struct snd_sof_route;
 -struct snd_sof_control;
 -
 -struct snd_sof_dai_config_data {
 -	int dai_index;
 -	int dai_data; /* contains DAI-specific information */
 -};
  
  /**
++<<<<<<< HEAD
 + * struct ipc_tplg_control_ops - IPC-specific ops for topology kcontrol IO
++=======
+  * struct sof_ipc_pcm_ops - IPC-specific PCM ops
+  * @hw_params: Function pointer for hw_params
+  * @hw_free: Function pointer for hw_free
+  * @trigger: Function pointer for trigger
+  * @dai_link_fixup: Function pointer for DAI link fixup
+  */
+ struct sof_ipc_pcm_ops {
+ 	int (*hw_params)(struct snd_soc_component *component, struct snd_pcm_substream *substream,
+ 			 struct snd_pcm_hw_params *params,
+ 			 struct snd_sof_platform_stream_params *platform_params);
+ 	int (*hw_free)(struct snd_soc_component *component, struct snd_pcm_substream *substream);
+ 	int (*trigger)(struct snd_soc_component *component,  struct snd_pcm_substream *substream,
+ 		       int cmd);
+ 	int (*dai_link_fixup)(struct snd_soc_pcm_runtime *rtd, struct snd_pcm_hw_params *params);
+ };
+ 
+ /**
+  * struct sof_ipc_tplg_control_ops - IPC-specific ops for topology kcontrol IO
++>>>>>>> 967885ee45e4 (ASoC: SOF: Introduce IPC-specific PCM ops)
   */
 -struct sof_ipc_tplg_control_ops {
 +struct ipc_tplg_control_ops {
  	bool (*volume_put)(struct snd_sof_control *scontrol, struct snd_ctl_elem_value *ucontrol);
  	int (*volume_get)(struct snd_sof_control *scontrol, struct snd_ctl_elem_value *ucontrol);
  	bool (*switch_put)(struct snd_sof_control *scontrol, struct snd_ctl_elem_value *ucontrol);
diff --cc sound/soc/sof/sof-priv.h
index 25b70734cd8c,0d9b640ae24c..000000000000
--- a/sound/soc/sof/sof-priv.h
+++ b/sound/soc/sof/sof-priv.h
@@@ -391,14 -360,29 +391,25 @@@ struct snd_sof_ipc_msg 
  	bool ipc_complete;
  };
  
 -/**
 - * struct sof_ipc_pm_ops - IPC-specific PM ops
 - * @ctx_save:		Function pointer for context save
 - * @ctx_restore:	Function pointer for context restore
 - */
 -struct sof_ipc_pm_ops {
 -	int (*ctx_save)(struct snd_sof_dev *sdev);
 -	int (*ctx_restore)(struct snd_sof_dev *sdev);
 -};
 -
  struct sof_ipc_tplg_ops;
+ struct sof_ipc_pcm_ops;
  
  /**
   * struct sof_ipc_ops - IPC-specific ops
   * @tplg:	Pointer to IPC-specific topology ops
++<<<<<<< HEAD
 + */
 +struct sof_ipc_ops {
 +	const struct sof_ipc_tplg_ops *tplg;
++=======
+  * @pm:		Pointer to PM ops
+  * @pcm:	Pointer to PCM ops
+  */
+ struct sof_ipc_ops {
+ 	const struct sof_ipc_tplg_ops *tplg;
+ 	const struct sof_ipc_pm_ops *pm;
+ 	const struct sof_ipc_pcm_ops *pcm;
++>>>>>>> 967885ee45e4 (ASoC: SOF: Introduce IPC-specific PCM ops)
  };
  
  /* SOF generic IPC data */
* Unmerged path sound/soc/sof/sof-audio.h
* Unmerged path sound/soc/sof/sof-priv.h
