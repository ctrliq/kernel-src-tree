drm/i915/guc: ADL-N should use the same GuC FW as ADL-S

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
commit 971e4a9781742aaad1587e25fd5582b2dd595ef8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/971e4a97.failed

The only difference between the ADL S and P GuC FWs is the HWConfig
support. ADL-N does not support HWConfig, so we should use the same
binary as ADL-S, otherwise the GuC might attempt to fetch a config
table that does not exist. ADL-N is internally identified as an ADL-P,
so we need to special-case it in the FW selection code.

Fixes: 7e28d0b26759 ("drm/i915/adl-n: Enable ADL-N platform")
	Cc: John Harrison <John.C.Harrison@Intel.com>
	Cc: Tejas Upadhyay <tejas.upadhyay@intel.com>
	Cc: Anusha Srivatsa <anusha.srivatsa@intel.com>
	Cc: Jani Nikula <jani.nikula@intel.com>
	Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
	Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20220621233005.3952293-1-daniele.ceraolospurio@intel.com
(cherry picked from commit 971e4a9781742aaad1587e25fd5582b2dd595ef8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
diff --cc drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
index 3a16d08608a5,27363091e1af..000000000000
--- a/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
@@@ -125,10 -161,23 +125,27 @@@ __uc_fw_auto_select(struct drm_i915_pri
  	u8 rev = INTEL_REVID(i915);
  	int i;
  
++<<<<<<< HEAD
 +	for (i = 0; i < ARRAY_SIZE(fw_blobs) && p <= fw_blobs[i].p; i++) {
++=======
+ 	/*
+ 	 * The only difference between the ADL GuC FWs is the HWConfig support.
+ 	 * ADL-N does not support HWConfig, so we should use the same binary as
+ 	 * ADL-S, otherwise the GuC might attempt to fetch a config table that
+ 	 * does not exist.
+ 	 */
+ 	if (IS_ADLP_N(i915))
+ 		p = INTEL_ALDERLAKE_S;
+ 
+ 	GEM_BUG_ON(uc_fw->type >= ARRAY_SIZE(blobs_all));
+ 	fw_blobs = blobs_all[uc_fw->type].blobs;
+ 	fw_count = blobs_all[uc_fw->type].count;
+ 
+ 	for (i = 0; i < fw_count && p <= fw_blobs[i].p; i++) {
++>>>>>>> 971e4a978174 (drm/i915/guc: ADL-N should use the same GuC FW as ADL-S)
  		if (p == fw_blobs[i].p && rev >= fw_blobs[i].rev) {
 -			const struct uc_fw_blob *blob = &fw_blobs[i].blob;
 +			const struct uc_fw_blob *blob =
 +					&fw_blobs[i].blobs[uc_fw->type];
  			uc_fw->path = blob->path;
  			uc_fw->major_ver_wanted = blob->major;
  			uc_fw->minor_ver_wanted = blob->minor;
* Unmerged path drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
