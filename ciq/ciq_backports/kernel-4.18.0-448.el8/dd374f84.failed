wifi: nl80211: expose link ID for associated BSSes

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit dd374f84baecd76cbd12fc543c763ff78338d4ad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/dd374f84.failed

When retrieving scan data, expose not just whether or not the
interface (possibly an MLD) is associated to the BSS or not,
but also on which link ID if it is an MLD.

	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit dd374f84baecd76cbd12fc543c763ff78338d4ad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/wireless/nl80211.c
diff --cc net/wireless/nl80211.c
index 718221cdc6c2,aca799b9971e..000000000000
--- a/net/wireless/nl80211.c
+++ b/net/wireless/nl80211.c
@@@ -9845,13 -9957,17 +9845,24 @@@ static int nl80211_send_bss(struct sk_b
  	switch (wdev->iftype) {
  	case NL80211_IFTYPE_P2P_CLIENT:
  	case NL80211_IFTYPE_STATION:
++<<<<<<< HEAD
 +		if (intbss == wdev->current_bss &&
 +		    nla_put_u32(msg, NL80211_BSS_STATUS,
 +				NL80211_BSS_STATUS_ASSOCIATED))
 +			goto nla_put_failure;
++=======
+ 		for_each_valid_link(wdev, link_id) {
+ 			if (intbss == wdev->links[link_id].client.current_bss &&
+ 			    (nla_put_u32(msg, NL80211_BSS_STATUS,
+ 					 NL80211_BSS_STATUS_ASSOCIATED) ||
+ 			     (wdev->valid_links &&
+ 			      nla_put_u8(msg, NL80211_ATTR_MLO_LINK_ID, link_id))))
+ 				goto nla_put_failure;
+ 		}
++>>>>>>> dd374f84baec (wifi: nl80211: expose link ID for associated BSSes)
  		break;
  	case NL80211_IFTYPE_ADHOC:
 -		if (intbss == wdev->u.ibss.current_bss &&
 +		if (intbss == wdev->current_bss &&
  		    nla_put_u32(msg, NL80211_BSS_STATUS,
  				NL80211_BSS_STATUS_IBSS_JOINED))
  			goto nla_put_failure;
* Unmerged path net/wireless/nl80211.c
