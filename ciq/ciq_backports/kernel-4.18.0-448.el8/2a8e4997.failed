net: ipv4: Fix NULL pointer dereference in route lookup

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Ido Schimmel <idosch@mellanox.com>
commit 2a8e4997dbb2818061c76ee57d7becf390c0e4bc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/2a8e4997.failed

When calculating the multipath hash for input routes the flow info is
not available and therefore should not be used.

Fixes: 24ba14406c5c ("route: Add multipath_hash in flowi_common to make user-define hash")
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Cc: wenxu <wenxu@ucloud.cn>
	Acked-by: wenxu <wenxu@ucloud.cn>
	Acked-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 2a8e4997dbb2818061c76ee57d7becf390c0e4bc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/route.c
diff --cc net/ipv4/route.c
index bcc6e8bbf742,e3ac458b5d8b..000000000000
--- a/net/ipv4/route.c
+++ b/net/ipv4/route.c
@@@ -1898,6 -1820,7 +1898,10 @@@ out
  int fib_multipath_hash(const struct net *net, const struct flowi4 *fl4,
  		       const struct sk_buff *skb, struct flow_keys *flkeys)
  {
++<<<<<<< HEAD
++=======
+ 	u32 multipath_hash = fl4 ? fl4->flowi4_multipath_hash : 0;
++>>>>>>> 2a8e4997dbb2 (net: ipv4: Fix NULL pointer dereference in route lookup)
  	struct flow_keys hash_keys;
  	u32 mhash;
  
* Unmerged path net/ipv4/route.c
