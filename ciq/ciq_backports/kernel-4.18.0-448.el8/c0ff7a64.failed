drm: bridge: icn6211: Fix HFP_HSW_HBP_HI and HFP_MIN handling

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Marek Vasut <marex@denx.de>
commit c0ff7a649d62105a9308cc3ac36e52a4669d9cb4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/c0ff7a64.failed

The HFP_HSW_HBP_HI register must be programmed with 2 LSbits of each
Horizontal Front Porch/Sync/Back Porch. Currently the driver programs
this register to 0, which breaks displays with either value above 255.

The HFP_MIN register must be set to the same value as HFP_LI, otherwise
there is visible image distortion, usually in the form of missing lines
at the bottom of the panel.

Fix this by correctly programming the HFP_HSW_HBP_HI and HFP_MIN registers.

	Acked-by: Maxime Ripard <maxime@cerno.tech>
Fixes: ce517f18944e3 ("drm: bridge: Add Chipone ICN6211 MIPI-DSI to RGB bridge")
	Signed-off-by: Marek Vasut <marex@denx.de>
	Cc: Jagan Teki <jagan@amarulasolutions.com>
	Cc: Maxime Ripard <maxime@cerno.tech>
	Cc: Robert Foss <robert.foss@linaro.org>
	Cc: Sam Ravnborg <sam@ravnborg.org>
	Cc: Thomas Zimmermann <tzimmermann@suse.de>
To: dri-devel@lists.freedesktop.org
	Signed-off-by: Robert Foss <robert.foss@linaro.org>
Link: https://patchwork.freedesktop.org/patch/msgid/20220331150509.9838-3-marex@denx.de
(cherry picked from commit c0ff7a649d62105a9308cc3ac36e52a4669d9cb4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/bridge/chipone-icn6211.c
diff --cc drivers/gpu/drm/bridge/chipone-icn6211.c
index eb26615b2993,c871a90c0b8f..000000000000
--- a/drivers/gpu/drm/bridge/chipone-icn6211.c
+++ b/drivers/gpu/drm/bridge/chipone-icn6211.c
@@@ -161,10 -161,12 +164,15 @@@ static inline int chipone_dsi_write(str
  		chipone_dsi_write(icn, d, ARRAY_SIZE(d));	\
  	}
  
 -static void chipone_atomic_enable(struct drm_bridge *bridge,
 -				  struct drm_bridge_state *old_bridge_state)
 +static void chipone_enable(struct drm_bridge *bridge)
  {
  	struct chipone *icn = bridge_to_chipone(bridge);
++<<<<<<< HEAD
 +	struct drm_display_mode *mode = bridge_to_mode(bridge);
++=======
+ 	struct drm_display_mode *mode = &icn->mode;
+ 	u16 hfp, hbp, hsync;
++>>>>>>> c0ff7a649d62 (drm: bridge: icn6211: Fix HFP_HSW_HBP_HI and HFP_MIN handling)
  
  	ICN6211_DSI(icn, MIPI_CFG_PW, MIPI_CFG_PW_CONFIG_DSI);
  
* Unmerged path drivers/gpu/drm/bridge/chipone-icn6211.c
