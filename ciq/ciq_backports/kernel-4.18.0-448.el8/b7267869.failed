net/mlx5: Lag, add support to create/destroy/modify port selection

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Maor Gottlieb <maorg@nvidia.com>
commit b7267869e9233266d772c418e0a048302510778d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/b7267869.failed

Add create function, build the steering tables, TTC and definers
according to the LAG hash type.

The destroy function, destroys all the steering components.

The modify functions is used when the bond mapping changes and it
iterates over all the rules in the definers and modifies them to steer
the packet to the relevant active ports.

	Signed-off-by: Maor Gottlieb <maorg@nvidia.com>
	Reviewed-by: Mark Bloch <mbloch@nvidia.com>
	Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
(cherry picked from commit b7267869e9233266d772c418e0a048302510778d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/Makefile
#	drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.c
#	drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.h
diff --cc drivers/net/ethernet/mellanox/mlx5/core/Makefile
index 478a0ab6470d,bdb271b604d9..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/Makefile
+++ b/drivers/net/ethernet/mellanox/mlx5/core/Makefile
@@@ -37,7 -37,7 +37,11 @@@ mlx5_core-$(CONFIG_MLX5_EN_ARFS)     +
  mlx5_core-$(CONFIG_MLX5_EN_RXNFC)    += en_fs_ethtool.o
  mlx5_core-$(CONFIG_MLX5_CORE_EN_DCB) += en_dcbnl.o en/port_buffer.o
  mlx5_core-$(CONFIG_PCI_HYPERV_INTERFACE) += en/hv_vhca_stats.o
++<<<<<<< HEAD
 +mlx5_core-$(CONFIG_MLX5_ESWITCH)     += lag_mp.o lib/geneve.o lib/port_tun.o \
++=======
+ mlx5_core-$(CONFIG_MLX5_ESWITCH)     += lag/mp.o lag/port_sel.o lib/geneve.o lib/port_tun.o \
++>>>>>>> b7267869e923 (net/mlx5: Lag, add support to create/destroy/modify port selection)
  					en_rep.o en/rep/bond.o en/mod_hdr.o \
  					en/mapping.o
  mlx5_core-$(CONFIG_MLX5_CLS_ACT)     += en_tc.o en/rep/tc.o en/rep/neigh.o \
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/Makefile
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/lag/port_sel.h
