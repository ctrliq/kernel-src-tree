wifi: mac80211: fix maybe-unused warning

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
Rebuild_CHGLOG: - mac80211: fix maybe-unused warning (Íñigo Huguet) [2136123]
Rebuild_FUZZ: 91.89%
commit-author Íñigo Huguet <ihuguet@redhat.com>
commit 09d838a457a89883a926b8b0104d575158fd4b92
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/09d838a4.failed

In ieee80211_lookup_key, the variable named `local` is unused if
compiled without lockdep, getting this warning:

net/mac80211/cfg.c: In function ‘ieee80211_lookup_key’:
net/mac80211/cfg.c:542:26: error: unused variable ‘local’ [-Werror=unused-variable]
  struct ieee80211_local *local = sdata->local;
                          ^~~~~

Fix it with __maybe_unused.

Fixes: 8cbf0c2ab6df ("wifi: mac80211: refactor some key code")
	Signed-off-by: Íñigo Huguet <ihuguet@redhat.com>
Link: https://lore.kernel.org/r/20221111153622.29016-1-ihuguet@redhat.com
	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 09d838a457a89883a926b8b0104d575158fd4b92)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/cfg.c
diff --cc net/mac80211/cfg.c
index f7b5957d466a,8f9a2ab502b3..000000000000
--- a/net/mac80211/cfg.c
+++ b/net/mac80211/cfg.c
@@@ -533,8 -572,70 +533,72 @@@ static int ieee80211_add_key(struct wip
  	return err;
  }
  
++<<<<<<< HEAD
++=======
+ static struct ieee80211_key *
+ ieee80211_lookup_key(struct ieee80211_sub_if_data *sdata, int link_id,
+ 		     u8 key_idx, bool pairwise, const u8 *mac_addr)
+ {
+ 	struct ieee80211_local *local __maybe_unused = sdata->local;
+ 	struct ieee80211_link_data *link = &sdata->deflink;
+ 	struct ieee80211_key *key;
+ 
+ 	if (link_id >= 0) {
+ 		link = rcu_dereference_check(sdata->link[link_id],
+ 					     lockdep_is_held(&sdata->wdev.mtx));
+ 		if (!link)
+ 			return NULL;
+ 	}
+ 
+ 	if (mac_addr) {
+ 		struct sta_info *sta;
+ 		struct link_sta_info *link_sta;
+ 
+ 		sta = sta_info_get_bss(sdata, mac_addr);
+ 		if (!sta)
+ 			return NULL;
+ 
+ 		if (link_id >= 0) {
+ 			link_sta = rcu_dereference_check(sta->link[link_id],
+ 							 lockdep_is_held(&local->sta_mtx));
+ 			if (!link_sta)
+ 				return NULL;
+ 		} else {
+ 			link_sta = &sta->deflink;
+ 		}
+ 
+ 		if (pairwise && key_idx < NUM_DEFAULT_KEYS)
+ 			return rcu_dereference_check_key_mtx(local,
+ 							     sta->ptk[key_idx]);
+ 
+ 		if (!pairwise &&
+ 		    key_idx < NUM_DEFAULT_KEYS +
+ 			      NUM_DEFAULT_MGMT_KEYS +
+ 			      NUM_DEFAULT_BEACON_KEYS)
+ 			return rcu_dereference_check_key_mtx(local,
+ 							     link_sta->gtk[key_idx]);
+ 
+ 		return NULL;
+ 	}
+ 
+ 	if (pairwise && key_idx < NUM_DEFAULT_KEYS)
+ 		return rcu_dereference_check_key_mtx(local,
+ 						     sdata->keys[key_idx]);
+ 
+ 	key = rcu_dereference_check_key_mtx(local, link->gtk[key_idx]);
+ 	if (key)
+ 		return key;
+ 
+ 	/* or maybe it was a WEP key */
+ 	if (key_idx < NUM_DEFAULT_KEYS)
+ 		return rcu_dereference_check_key_mtx(local, sdata->keys[key_idx]);
+ 
+ 	return NULL;
+ }
+ 
++>>>>>>> 09d838a457a8 (wifi: mac80211: fix maybe-unused warning)
  static int ieee80211_del_key(struct wiphy *wiphy, struct net_device *dev,
 -			     int link_id, u8 key_idx, bool pairwise,
 -			     const u8 *mac_addr)
 +			     u8 key_idx, bool pairwise, const u8 *mac_addr)
  {
  	struct ieee80211_sub_if_data *sdata = IEEE80211_DEV_TO_SUB_IF(dev);
  	struct ieee80211_local *local = sdata->local;
* Unmerged path net/mac80211/cfg.c
