ASoC: SOF: sof_ipc_pm_ops: Add support for DSP core power management

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
commit b41252d8820c7009078c3d401a807a9da899075f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/b41252d8.failed

Add a new ops for handling DSP core power state which can be used to tell
the DSP to turn on/off a core (or to inform it that a core is going to be
turned on/off if the core is host managed).

	Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
	Reviewed-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
	Reviewed-by: Bard Liao <yung-chuan.liao@linux.intel.com>
	Reviewed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20220610083549.16773-3-peter.ujfalusi@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit b41252d8820c7009078c3d401a807a9da899075f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/sof-priv.h
diff --cc sound/soc/sof/sof-priv.h
index 0972440dcebe,0544eb6a2322..000000000000
--- a/sound/soc/sof/sof-priv.h
+++ b/sound/soc/sof/sof-priv.h
@@@ -388,7 -358,55 +388,57 @@@ struct snd_sof_ipc_msg 
  	bool ipc_complete;
  };
  
++<<<<<<< HEAD
++=======
+ /**
+  * struct sof_ipc_fw_tracing_ops - IPC-specific firmware tracing ops
+  * @init:	Function pointer for initialization of the tracing
+  * @free:	Optional function pointer for freeing of the tracing
+  * @fw_crashed:	Optional function pointer to notify the tracing of a firmware crash
+  * @suspend:	Function pointer for system/runtime suspend
+  * @resume:	Function pointer for system/runtime resume
+  */
+ struct sof_ipc_fw_tracing_ops {
+ 	int (*init)(struct snd_sof_dev *sdev);
+ 	void (*free)(struct snd_sof_dev *sdev);
+ 	void (*fw_crashed)(struct snd_sof_dev *sdev);
+ 	void (*suspend)(struct snd_sof_dev *sdev, pm_message_t pm_state);
+ 	int (*resume)(struct snd_sof_dev *sdev);
+ };
+ 
+ /**
+  * struct sof_ipc_pm_ops - IPC-specific PM ops
+  * @ctx_save:		Optional function pointer for context save
+  * @ctx_restore:	Optional function pointer for context restore
+  * @set_core_state:	Optional function pointer for turning on/off a DSP core
+  */
+ struct sof_ipc_pm_ops {
+ 	int (*ctx_save)(struct snd_sof_dev *sdev);
+ 	int (*ctx_restore)(struct snd_sof_dev *sdev);
+ 	int (*set_core_state)(struct snd_sof_dev *sdev, int core_idx, bool on);
+ };
+ 
+ /**
+  * struct sof_ipc_fw_loader_ops - IPC/FW-specific loader ops
+  * @validate:		Function pointer for validating the firmware image
+  * @parse_ext_manifest:	Function pointer for parsing the manifest of the firmware
+  * @load_fw_to_dsp:	Optional function pointer for loading the firmware to the
+  *			DSP.
+  *			The function implements generic, hardware independent way
+  *			of loading the initial firmware and its modules (if any).
+  * @query_fw_configuration: Optional function pointer to query information and
+  *			configuration from the booted firmware.
+  *			Executed after the first successful firmware boot.
+  */
+ struct sof_ipc_fw_loader_ops {
+ 	int (*validate)(struct snd_sof_dev *sdev);
+ 	size_t (*parse_ext_manifest)(struct snd_sof_dev *sdev);
+ 	int (*load_fw_to_dsp)(struct snd_sof_dev *sdev);
+ 	int (*query_fw_configuration)(struct snd_sof_dev *sdev);
+ };
+ 
++>>>>>>> b41252d8820c (ASoC: SOF: sof_ipc_pm_ops: Add support for DSP core power management)
  struct sof_ipc_tplg_ops;
 -struct sof_ipc_pcm_ops;
  
  /**
   * struct sof_ipc_ops - IPC-specific ops
* Unmerged path sound/soc/sof/sof-priv.h
