wifi: mac80211: remove sta_info_tx_streams()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit 2a5ccbeec0f226c3a1099aac74069d89ea119e01
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/2a5ccbee.failed

The function is unused since commit 52b4810bed83 ("mac80211: Remove
support for changing AP SMPS mode") so we can just remove it.

	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 2a5ccbeec0f226c3a1099aac74069d89ea119e01)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/sta_info.c
diff --cc net/mac80211/sta_info.c
index f2be4a7c4886,6f6d83def8b8..000000000000
--- a/net/mac80211/sta_info.c
+++ b/net/mac80211/sta_info.c
@@@ -2085,41 -2093,6 +2085,44 @@@ int sta_info_move_state(struct sta_inf
  	return 0;
  }
  
++<<<<<<< HEAD
 +u8 sta_info_tx_streams(struct sta_info *sta)
 +{
 +	struct ieee80211_sta_ht_cap *ht_cap = &sta->sta.ht_cap;
 +	u8 rx_streams;
 +
 +	if (!sta->sta.ht_cap.ht_supported)
 +		return 1;
 +
 +	if (sta->sta.vht_cap.vht_supported) {
 +		int i;
 +		u16 tx_mcs_map =
 +			le16_to_cpu(sta->sta.vht_cap.vht_mcs.tx_mcs_map);
 +
 +		for (i = 7; i >= 0; i--)
 +			if ((tx_mcs_map & (0x3 << (i * 2))) !=
 +			    IEEE80211_VHT_MCS_NOT_SUPPORTED)
 +				return i + 1;
 +	}
 +
 +	if (ht_cap->mcs.rx_mask[3])
 +		rx_streams = 4;
 +	else if (ht_cap->mcs.rx_mask[2])
 +		rx_streams = 3;
 +	else if (ht_cap->mcs.rx_mask[1])
 +		rx_streams = 2;
 +	else
 +		rx_streams = 1;
 +
 +	if (!(ht_cap->mcs.tx_params & IEEE80211_HT_MCS_TX_RX_DIFF))
 +		return rx_streams;
 +
 +	return ((ht_cap->mcs.tx_params & IEEE80211_HT_MCS_TX_MAX_STREAMS_MASK)
 +			>> IEEE80211_HT_MCS_TX_MAX_STREAMS_SHIFT) + 1;
 +}
 +
++=======
++>>>>>>> 2a5ccbeec0f2 (wifi: mac80211: remove sta_info_tx_streams())
  static struct ieee80211_sta_rx_stats *
  sta_get_last_rx_stats(struct sta_info *sta)
  {
* Unmerged path net/mac80211/sta_info.c
diff --git a/net/mac80211/sta_info.h b/net/mac80211/sta_info.h
index addc78b398f0..9a25d4ec2e3a 100644
--- a/net/mac80211/sta_info.h
+++ b/net/mac80211/sta_info.h
@@ -854,7 +854,6 @@ u32 sta_get_expected_throughput(struct sta_info *sta);
 
 void ieee80211_sta_expire(struct ieee80211_sub_if_data *sdata,
 			  unsigned long exp_time);
-u8 sta_info_tx_streams(struct sta_info *sta);
 
 void ieee80211_sta_ps_deliver_wakeup(struct sta_info *sta);
 void ieee80211_sta_ps_deliver_poll_response(struct sta_info *sta);
