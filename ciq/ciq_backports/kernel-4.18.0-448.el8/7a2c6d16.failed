wifi: mac80211: mlme: release deflink channel in error case

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit 7a2c6d1616be5d49c0dae2c876af3fe20e71a111
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/7a2c6d16.failed

In the prep_channel error case we didn't release the deflink
channel leaving it to be left around. Fix that.

Change-Id: If0dfd748125ec46a31fc6045a480dc28e03723d2
	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 7a2c6d1616be5d49c0dae2c876af3fe20e71a111)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/mlme.c
diff --cc net/mac80211/mlme.c
index 446accddbebd,4c40f0427e88..000000000000
--- a/net/mac80211/mlme.c
+++ b/net/mac80211/mlme.c
@@@ -5746,6 -6507,11 +5746,14 @@@ skip_rates
  		ieee80211_scan_cancel(local);
  
  	return 0;
++<<<<<<< HEAD
++=======
+ 
+ out_err:
+ 	ieee80211_link_release_channel(&sdata->deflink);
+ 	ieee80211_vif_set_links(sdata, 0);
+ 	return err;
++>>>>>>> 7a2c6d1616be (wifi: mac80211: mlme: release deflink channel in error case)
  }
  
  /* config hooks */
* Unmerged path net/mac80211/mlme.c
