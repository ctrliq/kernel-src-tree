flow_offload: improve extack msg for user when adding invalid filter

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Baowen Zheng <baowen.zheng@corigine.com>
commit d922a99b96d0030f2e7e8128e98f29123172bd03
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/d922a99b.failed

Add extack message to return exact message to user when adding invalid
filter with conflict flags for TC action.

In previous implement we just return EINVAL which is confusing for user.

	Signed-off-by: Baowen Zheng <baowen.zheng@corigine.com>
	Reviewed-by: Roi Dayan <roid@nvidia.com>
Link: https://lore.kernel.org/r/1646191769-17761-1-git-send-email-baowen.zheng@corigine.com
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit d922a99b96d0030f2e7e8128e98f29123172bd03)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/act_api.c
diff --cc net/sched/act_api.c
index f274ee42a202,4f51094da9da..000000000000
--- a/net/sched/act_api.c
+++ b/net/sched/act_api.c
@@@ -1114,6 -1438,24 +1114,27 @@@ int tcf_action_init(struct net *net, st
  		sz += tcf_action_fill_size(act);
  		/* Start from index 0 */
  		actions[i - 1] = act;
++<<<<<<< HEAD
++=======
+ 		if (tc_act_bind(flags)) {
+ 			bool skip_sw = tc_skip_sw(fl_flags);
+ 			bool skip_hw = tc_skip_hw(fl_flags);
+ 
+ 			if (tc_act_bind(act->tcfa_flags))
+ 				continue;
+ 			if (skip_sw != tc_act_skip_sw(act->tcfa_flags) ||
+ 			    skip_hw != tc_act_skip_hw(act->tcfa_flags)) {
+ 				NL_SET_ERR_MSG(extack,
+ 					       "Mismatch between action and filter offload flags");
+ 				err = -EINVAL;
+ 				goto err;
+ 			}
+ 		} else {
+ 			err = tcf_action_offload_add(act, extack);
+ 			if (tc_act_skip_sw(act->tcfa_flags) && err)
+ 				goto err;
+ 		}
++>>>>>>> d922a99b96d0 (flow_offload: improve extack msg for user when adding invalid filter)
  	}
  
  	/* We have to commit them all together, because if any error happened in
* Unmerged path net/sched/act_api.c
