eth: sfc: remove remnants of the out-of-tree napi_weight module param

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Jakub Kicinski <kuba@kernel.org>
commit c28678162b330c8d3bfc472db8c47c8e5e7726f1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/c2867816.failed

Remove napi_weight statics which are set to 64 and never modified,
remnants of the out-of-tree napi_weight module param.

	Acked-by: Edward Cree <ecree.xilinx@gmail.com>
Link: https://lore.kernel.org/r/20220512205603.1536771-1-kuba@kernel.org
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit c28678162b330c8d3bfc472db8c47c8e5e7726f1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/sfc/efx_channels.c
#	drivers/net/ethernet/sfc/falcon/efx.c
diff --cc drivers/net/ethernet/sfc/efx_channels.c
index 373dc8e5ad2b,f4919e7ee77b..000000000000
--- a/drivers/net/ethernet/sfc/efx_channels.c
+++ b/drivers/net/ethernet/sfc/efx_channels.c
@@@ -1318,8 -1315,7 +1313,12 @@@ void efx_init_napi_channel(struct efx_c
  	struct efx_nic *efx = channel->efx;
  
  	channel->napi_dev = efx->net_dev;
++<<<<<<< HEAD
 +	netif_napi_add(channel->napi_dev, &channel->napi_str,
 +		       efx_poll, napi_weight);
++=======
+ 	netif_napi_add(channel->napi_dev, &channel->napi_str, efx_poll, 64);
++>>>>>>> c28678162b33 (eth: sfc: remove remnants of the out-of-tree napi_weight module param)
  }
  
  void efx_init_napi(struct efx_nic *efx)
diff --cc drivers/net/ethernet/sfc/falcon/efx.c
index e73a06debd2b,a63f40b09856..000000000000
--- a/drivers/net/ethernet/sfc/falcon/efx.c
+++ b/drivers/net/ethernet/sfc/falcon/efx.c
@@@ -2021,8 -2012,7 +2016,12 @@@ static void ef4_init_napi_channel(struc
  	struct ef4_nic *efx = channel->efx;
  
  	channel->napi_dev = efx->net_dev;
++<<<<<<< HEAD
 +	netif_napi_add(channel->napi_dev, &channel->napi_str,
 +		       ef4_poll, napi_weight);
++=======
+ 	netif_napi_add(channel->napi_dev, &channel->napi_str, ef4_poll, 64);
++>>>>>>> c28678162b33 (eth: sfc: remove remnants of the out-of-tree napi_weight module param)
  }
  
  static void ef4_init_napi(struct ef4_nic *efx)
* Unmerged path drivers/net/ethernet/sfc/efx_channels.c
* Unmerged path drivers/net/ethernet/sfc/falcon/efx.c
diff --git a/drivers/net/ethernet/sfc/siena/efx_channels.c b/drivers/net/ethernet/sfc/siena/efx_channels.c
index 28391875de69..2465cf4d505c 100644
--- a/drivers/net/ethernet/sfc/siena/efx_channels.c
+++ b/drivers/net/ethernet/sfc/siena/efx_channels.c
@@ -46,11 +46,6 @@ module_param(irq_adapt_high_thresh, uint, 0644);
 MODULE_PARM_DESC(irq_adapt_high_thresh,
 		 "Threshold score for increasing IRQ moderation");
 
-/* This is the weight assigned to each of the (per-channel) virtual
- * NAPI devices.
- */
-static int napi_weight = 64;
-
 static const struct efx_channel_type efx_default_channel_type;
 
 /*************
@@ -1324,8 +1319,7 @@ static void efx_init_napi_channel(struct efx_channel *channel)
 	struct efx_nic *efx = channel->efx;
 
 	channel->napi_dev = efx->net_dev;
-	netif_napi_add_weight(channel->napi_dev, &channel->napi_str, efx_poll,
-			      napi_weight);
+	netif_napi_add(channel->napi_dev, &channel->napi_str, efx_poll, 64);
 }
 
 void efx_siena_init_napi(struct efx_nic *efx)
