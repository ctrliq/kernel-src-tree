qdisc: add new field for qdisc_enqueue tracepoint

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Tonghao Zhang <xiangxia.m.yue@gmail.com>
commit 409f386b8e5d69ba5b13bb94618b6b668a7a3736
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/409f386b.failed

qdisc_enqueue tracepoint can work with qdisc:qdisc_dequeue
to measure packets latency in qdisc queues.

Add a new field txq for it, then we can retrieve more info.

	Signed-off-by: Tonghao Zhang <xiangxia.m.yue@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 409f386b8e5d69ba5b13bb94618b6b668a7a3736)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/trace/events/qdisc.h
diff --cc include/trace/events/qdisc.h
index 58209557cb3a,59c945b66f9c..000000000000
--- a/include/trace/events/qdisc.h
+++ b/include/trace/events/qdisc.h
@@@ -46,6 -46,34 +46,37 @@@ TRACE_EVENT(qdisc_dequeue
  		  __entry->txq_state, __entry->packets, __entry->skbaddr )
  );
  
++<<<<<<< HEAD
++=======
+ TRACE_EVENT(qdisc_enqueue,
+ 
+ 	TP_PROTO(struct Qdisc *qdisc, const struct netdev_queue *txq, struct sk_buff *skb),
+ 
+ 	TP_ARGS(qdisc, txq, skb),
+ 
+ 	TP_STRUCT__entry(
+ 		__field(struct Qdisc *, qdisc)
+ 		__field(const struct netdev_queue *, txq)
+ 		__field(void *,	skbaddr)
+ 		__field(int, ifindex)
+ 		__field(u32, handle)
+ 		__field(u32, parent)
+ 	),
+ 
+ 	TP_fast_assign(
+ 		__entry->qdisc = qdisc;
+ 		__entry->txq	 = txq;
+ 		__entry->skbaddr = skb;
+ 		__entry->ifindex = txq->dev ? txq->dev->ifindex : 0;
+ 		__entry->handle	 = qdisc->handle;
+ 		__entry->parent	 = qdisc->parent;
+ 	),
+ 
+ 	TP_printk("enqueue ifindex=%d qdisc handle=0x%X parent=0x%X skbaddr=%px",
+ 		  __entry->ifindex, __entry->handle, __entry->parent, __entry->skbaddr)
+ );
+ 
++>>>>>>> 409f386b8e5d (qdisc: add new field for qdisc_enqueue tracepoint)
  TRACE_EVENT(qdisc_reset,
  
  	TP_PROTO(struct Qdisc *q),
* Unmerged path include/trace/events/qdisc.h
