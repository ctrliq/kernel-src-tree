wifi: mac80211: mlme: set sta.mlo correctly

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit bd363ee5330250b93cb1e0e16c1c54682fcbe595
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/bd363ee5.failed

Due to some changes and rebasing between different patches
this fell through the cracks; we need to set sta.mlo if the
connection is using MLO.

	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit bd363ee5330250b93cb1e0e16c1c54682fcbe595)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/mlme.c
diff --cc net/mac80211/mlme.c
index 446accddbebd,912095e4e256..000000000000
--- a/net/mac80211/mlme.c
+++ b/net/mac80211/mlme.c
@@@ -5603,9 -6391,19 +5603,25 @@@ static int ieee80211_prep_connection(st
  	}
  
  	if (!have_sta) {
++<<<<<<< HEAD
 +		new_sta = sta_info_alloc(sdata, cbss->bssid, GFP_KERNEL);
 +		if (!new_sta)
 +			return -ENOMEM;
++=======
+ 		if (link_id >= 0)
+ 			new_sta = sta_info_alloc_with_link(sdata, ap_mld_addr,
+ 							   link_id, cbss->bssid,
+ 							   GFP_KERNEL);
+ 		else
+ 			new_sta = sta_info_alloc(sdata, ap_mld_addr, GFP_KERNEL);
+ 
+ 		if (!new_sta) {
+ 			err = -ENOMEM;
+ 			goto out_err;
+ 		}
+ 
+ 		new_sta->sta.mlo = link_id >= 0;
++>>>>>>> bd363ee53302 (wifi: mac80211: mlme: set sta.mlo correctly)
  	}
  
  	/*
* Unmerged path net/mac80211/mlme.c
