NFS: Clean up page array initialisation/free

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Trond Myklebust <trond.myklebust@hammerspace.com>
commit 9332cf14e2db4253bec827da66bd95e6c0f6a2f3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/9332cf14.failed

	Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
(cherry picked from commit 9332cf14e2db4253bec827da66bd95e6c0f6a2f3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/dir.c
diff --cc fs/nfs/dir.c
index ce0607cf0a27,4983950de2ad..000000000000
--- a/fs/nfs/dir.c
+++ b/fs/nfs/dir.c
@@@ -173,9 -177,26 +173,32 @@@ struct nfs_readdir_descriptor 
  	bool eof;
  };
  
++<<<<<<< HEAD
 +static void nfs_readdir_array_init(struct nfs_cache_array *array)
 +{
 +	memset(array, 0, sizeof(struct nfs_cache_array));
++=======
+ static void nfs_set_dtsize(struct nfs_readdir_descriptor *desc, unsigned int sz)
+ {
+ 	struct nfs_server *server = NFS_SERVER(file_inode(desc->file));
+ 	unsigned int maxsize = server->dtsize;
+ 
+ 	if (sz > maxsize)
+ 		sz = maxsize;
+ 	if (sz < NFS_MIN_FILE_IO_SIZE)
+ 		sz = NFS_MIN_FILE_IO_SIZE;
+ 	desc->dtsize = sz;
+ }
+ 
+ static void nfs_shrink_dtsize(struct nfs_readdir_descriptor *desc)
+ {
+ 	nfs_set_dtsize(desc, desc->dtsize >> 1);
+ }
+ 
+ static void nfs_grow_dtsize(struct nfs_readdir_descriptor *desc)
+ {
+ 	nfs_set_dtsize(desc, desc->dtsize << 1);
++>>>>>>> 9332cf14e2db (NFS: Clean up page array initialisation/free)
  }
  
  static void nfs_readdir_page_init_array(struct page *page, u64 last_cookie,
* Unmerged path fs/nfs/dir.c
