ASoC: SOF: ipc: Separate the ops checks by functions/topics

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
commit 785b3fbe61c6c1c413b696e335e9f288aaec4364
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/785b3fbe.failed

Separate the mandatory ops checks by topics (pcm and topology for now) to
be able to provide intuitive feedback on the possible missing ops and to
make it easier to add new mandatory ops checks in the future.

	Signed-off-by: Peter Ujfalusi <peter.ujfalusi@linux.intel.com>
	Reviewed-by: Daniel Baluta <daniel.baluta@nxp.com>
	Reviewed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
	Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Link: https://lore.kernel.org/r/20220405172708.122168-9-ranjani.sridharan@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 785b3fbe61c6c1c413b696e335e9f288aaec4364)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/ipc.c
diff --cc sound/soc/sof/ipc.c
index 991bdaf0a90c,4966a2a41704..000000000000
--- a/sound/soc/sof/ipc.c
+++ b/sound/soc/sof/ipc.c
@@@ -1077,6 -1058,24 +1078,27 @@@ struct snd_sof_ipc *snd_sof_ipc_init(st
  
  	init_waitqueue_head(&msg->waitq);
  
++<<<<<<< HEAD
++=======
+ 	/*
+ 	 * Use IPC3 ops as it is the only available version now. With the addition of new IPC
+ 	 * versions, this will need to be modified to use the selected version at runtime.
+ 	 */
+ 	ipc->ops = &ipc3_ops;
+ 	ops = ipc->ops;
+ 
+ 	/* check for mandatory ops */
+ 	if (!ops->pcm) {
+ 		dev_err(sdev->dev, "Missing IPC PCM ops\n");
+ 		return NULL;
+ 	}
+ 
+ 	if (!ops->tplg || !ops->tplg->widget || !ops->tplg->control) {
+ 		dev_err(sdev->dev, "Missing IPC topology ops\n");
+ 		return NULL;
+ 	}
+ 
++>>>>>>> 785b3fbe61c6 (ASoC: SOF: ipc: Separate the ops checks by functions/topics)
  	return ipc;
  }
  EXPORT_SYMBOL(snd_sof_ipc_init);
* Unmerged path sound/soc/sof/ipc.c
