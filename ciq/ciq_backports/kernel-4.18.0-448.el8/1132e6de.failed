x86, ACPI: rename init_freq_invariance_cppc() to arch_init_invariance_cppc()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Ionela Voinescu <ionela.voinescu@arm.com>
commit 1132e6de11cfc334b44f609792664f1bc3055c52
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/1132e6de.failed

init_freq_invariance_cppc() was called in acpi_cppc_processor_probe(),
after CPU performance information and controls were populated from the
per-cpu _CPC objects.

But these _CPC objects provide information that helps with both CPU
(u-arch) and frequency invariance. Therefore, change the function name
to a more generic one, while adding the arch_ prefix, as this function
is expected to be defined differently by different architectures.

	Signed-off-by: Ionela Voinescu <ionela.voinescu@arm.com>
	Acked-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Tested-by: Valentin Schneider <valentin.schneider@arm.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 1132e6de11cfc334b44f609792664f1bc3055c52)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/topology.h
diff --cc arch/x86/include/asm/topology.h
index 12cffa4da8c1,c512c647b4fc..000000000000
--- a/arch/x86/include/asm/topology.h
+++ b/arch/x86/include/asm/topology.h
@@@ -225,7 -227,14 +225,18 @@@ static inline void arch_set_max_freq_ra
  
  #ifdef CONFIG_ACPI_CPPC_LIB
  void init_freq_invariance_cppc(void);
++<<<<<<< HEAD
 +#define init_freq_invariance_cppc init_freq_invariance_cppc
++=======
+ #define arch_init_invariance_cppc init_freq_invariance_cppc
+ 
+ bool amd_set_max_freq_ratio(u64 *ratio);
+ #else
+ static inline bool amd_set_max_freq_ratio(u64 *ratio)
+ {
+ 	return false;
+ }
++>>>>>>> 1132e6de11cf (x86, ACPI: rename init_freq_invariance_cppc() to arch_init_invariance_cppc())
  #endif
  
  #endif /* _ASM_X86_TOPOLOGY_H */
* Unmerged path arch/x86/include/asm/topology.h
diff --git a/drivers/acpi/cppc_acpi.c b/drivers/acpi/cppc_acpi.c
index 815c8d13f6eb..8a453ca1cf08 100644
--- a/drivers/acpi/cppc_acpi.c
+++ b/drivers/acpi/cppc_acpi.c
@@ -637,8 +637,8 @@ static bool is_cppc_supported(int revision, int num_ent)
  *  )
  */
 
-#ifndef init_freq_invariance_cppc
-static inline void init_freq_invariance_cppc(void) { }
+#ifndef arch_init_invariance_cppc
+static inline void arch_init_invariance_cppc(void) { }
 #endif
 
 /**
@@ -820,7 +820,7 @@ int acpi_cppc_processor_probe(struct acpi_processor *pr)
 		goto out_free;
 	}
 
-	init_freq_invariance_cppc();
+	arch_init_invariance_cppc();
 
 	kfree(output.pointer);
 	return 0;
