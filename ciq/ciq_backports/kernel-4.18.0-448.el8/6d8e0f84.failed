wifi: mac80211: mlme: set sta.mlo to mlo state

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit 6d8e0f84f89f99c87608569e374d52cf248978ee
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/6d8e0f84.failed

At this point, we've already changed link_id to be zero for
a non-MLO connection, so use the 'mlo' variable rather than
link ID to determine the MLO status of the station.

Fixes: bd363ee53302 ("wifi: mac80211: mlme: set sta.mlo correctly")
Fixes: 81151ce462e5 ("wifi: mac80211: support MLO authentication/association with one link")
	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 6d8e0f84f89f99c87608569e374d52cf248978ee)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/mlme.c
diff --cc net/mac80211/mlme.c
index 446accddbebd,1ced0a4b428e..000000000000
--- a/net/mac80211/mlme.c
+++ b/net/mac80211/mlme.c
@@@ -5603,9 -6393,19 +5603,25 @@@ static int ieee80211_prep_connection(st
  	}
  
  	if (!have_sta) {
++<<<<<<< HEAD
 +		new_sta = sta_info_alloc(sdata, cbss->bssid, GFP_KERNEL);
 +		if (!new_sta)
 +			return -ENOMEM;
++=======
+ 		if (mlo)
+ 			new_sta = sta_info_alloc_with_link(sdata, ap_mld_addr,
+ 							   link_id, cbss->bssid,
+ 							   GFP_KERNEL);
+ 		else
+ 			new_sta = sta_info_alloc(sdata, ap_mld_addr, GFP_KERNEL);
+ 
+ 		if (!new_sta) {
+ 			err = -ENOMEM;
+ 			goto out_err;
+ 		}
+ 
+ 		new_sta->sta.mlo = mlo;
++>>>>>>> 6d8e0f84f89f (wifi: mac80211: mlme: set sta.mlo to mlo state)
  	}
  
  	/*
* Unmerged path net/mac80211/mlme.c
