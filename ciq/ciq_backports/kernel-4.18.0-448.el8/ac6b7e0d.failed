mlx5: prevent 64bit divide

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Jakub Kicinski <kuba@kernel.org>
commit ac6b7e0d9679db908d92fb96605d1ce01e8173d4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/ac6b7e0d.failed

mlx5_tout_ms() returns a u64, we can't directly divide it.
This is not a problem here, @timeout which is the value
that actually matters here is already a ulong, so this
implies storing return value of mlx5_tout_ms() on a ulong
should be fine.

This fixes:

  ERROR: modpost: "__udivdi3" [drivers/net/ethernet/mellanox/mlx5/core/mlx5_core.ko] undefined!

Fixes: 32def4120e48 ("net/mlx5: Read timeout values from DTOR")
Link: https://lore.kernel.org/r/20211018172608.1069754-1-kuba@kernel.org
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit ac6b7e0d9679db908d92fb96605d1ce01e8173d4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
index 106b50e42b46,0b0234f9d694..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
@@@ -395,16 -394,16 +395,26 @@@ static int fw_reset_event_notifier(stru
  	return NOTIFY_OK;
  }
  
 +#define MLX5_FW_RESET_TIMEOUT_MSEC 5000
  int mlx5_fw_reset_wait_reset_done(struct mlx5_core_dev *dev)
  {
++<<<<<<< HEAD
 +	unsigned long timeout = msecs_to_jiffies(MLX5_FW_RESET_TIMEOUT_MSEC);
++=======
+ 	unsigned long pci_sync_update_timeout = mlx5_tout_ms(dev, PCI_SYNC_UPDATE);
+ 	unsigned long timeout = msecs_to_jiffies(pci_sync_update_timeout);
++>>>>>>> ac6b7e0d9679 (mlx5: prevent 64bit divide)
  	struct mlx5_fw_reset *fw_reset = dev->priv.fw_reset;
  	int err;
  
  	if (!wait_for_completion_timeout(&fw_reset->done, timeout)) {
++<<<<<<< HEAD
 +		mlx5_core_warn(dev, "FW sync reset timeout after %d seconds\n",
 +			       MLX5_FW_RESET_TIMEOUT_MSEC / 1000);
++=======
+ 		mlx5_core_warn(dev, "FW sync reset timeout after %lu seconds\n",
+ 			       pci_sync_update_timeout / 1000);
++>>>>>>> ac6b7e0d9679 (mlx5: prevent 64bit divide)
  		err = -ETIMEDOUT;
  		goto out;
  	}
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
