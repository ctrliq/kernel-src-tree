NFS: Cache all entries in the readdirplus reply

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Trond Myklebust <trond.myklebust@hammerspace.com>
commit 612896ec5a4edbf98c4a631503899da04df76480
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/612896ec.failed

Even if we're not able to cache all the entries in the readdir buffer,
let's ensure that we do prime the dcache.

	Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
(cherry picked from commit 612896ec5a4edbf98c4a631503899da04df76480)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/dir.c
diff --cc fs/nfs/dir.c
index ce0607cf0a27,7e12102b29e7..000000000000
--- a/fs/nfs/dir.c
+++ b/fs/nfs/dir.c
@@@ -773,11 -830,7 +785,15 @@@ static int nfs_readdir_page_filler(stru
  		if (status != 0)
  			break;
  
++<<<<<<< HEAD
 +		if (desc->plus)
 +			nfs_prime_dcache(file_dentry(desc->file), entry,
 +					desc->dir_verifier);
 +
 +		status = nfs_readdir_add_to_array(entry, page);
++=======
+ 		status = nfs_readdir_page_array_append(page, entry, &cookie);
++>>>>>>> 612896ec5a4e (NFS: Cache all entries in the readdirplus reply)
  		if (status != -ENOSPC)
  			continue;
  
* Unmerged path fs/nfs/dir.c
