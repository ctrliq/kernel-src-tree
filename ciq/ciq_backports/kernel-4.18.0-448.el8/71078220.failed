s390/vfio-ap: fix kernel doc and signature of group notifier functions

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Tony Krowiak <akrowiak@linux.ibm.com>
commit 7107822004198f60dd46d102694a666db784d28b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/71078220.failed

The vfio_ap device driver registers a group notifier function to handle
the VFIO_GROUP_NOTIFY_SET_KVM event signalling the KVM pointer has been
set or cleared. There are two helper functions invoked by the handler
function: One called when the KVM pointer has been set, and the other
when the pointer is cleared.

The kernel doc for both of these functions contains a comment introduced
by commit 0cc00c8d4050 (s390/vfio-ap: fix circular lockdep when
setting/clearing crypto masks) that is no longer valid. This patch removes
this comment from the kernel doc of each helper function.

Commit 86956e70761b (s390/vfio-ap: replace open coded locks for
VFIO_GROUP_NOTIFY_SET_KVM notification) added a parameter to the signature
of the helper function that handles the event indicating the KVM pointer
has been cleared. The parameter added was the KVM pointer itself.
One of the function's primary purposes is to clear the KVM pointer from the
ap_matrix_mdev instance in which it is stored. Since the callers of this
function derive the KVM pointer passed to the function from the
ap_matrix_mdev object itself, it is completely unnecessary to include this
parameter in the function's signature since it can simply be retrieved from
the ap_matrix_mdev object which is also passed in. This patch removes the
KVM pointer from the function's signature.

	Signed-off-by: Tony Krowiak <akrowiak@linux.ibm.com>
	Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
(cherry picked from commit 7107822004198f60dd46d102694a666db784d28b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/s390/crypto/vfio_ap_ops.c
diff --cc drivers/s390/crypto/vfio_ap_ops.c
index f45446af4251,6e08d04b605d..000000000000
--- a/drivers/s390/crypto/vfio_ap_ops.c
+++ b/drivers/s390/crypto/vfio_ap_ops.c
@@@ -1306,16 -1425,16 +1292,20 @@@ static int vfio_ap_mdev_open(struct mde
  	return ret;
  }
  
 -static void vfio_ap_mdev_close_device(struct vfio_device *vdev)
 +static void vfio_ap_mdev_release(struct mdev_device *mdev)
  {
 -	struct ap_matrix_mdev *matrix_mdev =
 -		container_of(vdev, struct ap_matrix_mdev, vdev);
 +	struct ap_matrix_mdev *matrix_mdev = mdev_get_drvdata(mdev);
  
 -	vfio_unregister_notifier(vdev->dev, VFIO_IOMMU_NOTIFY,
 +	vfio_unregister_notifier(mdev_dev(mdev), VFIO_IOMMU_NOTIFY,
  				 &matrix_mdev->iommu_notifier);
 -	vfio_unregister_notifier(vdev->dev, VFIO_GROUP_NOTIFY,
 +	vfio_unregister_notifier(mdev_dev(mdev), VFIO_GROUP_NOTIFY,
  				 &matrix_mdev->group_notifier);
++<<<<<<< HEAD
 +	vfio_ap_mdev_unset_kvm(matrix_mdev, matrix_mdev->kvm);
 +	module_put(THIS_MODULE);
++=======
+ 	vfio_ap_mdev_unset_kvm(matrix_mdev);
++>>>>>>> 710782200419 (s390/vfio-ap: fix kernel doc and signature of group notifier functions)
  }
  
  static int vfio_ap_mdev_get_device_info(unsigned long arg)
* Unmerged path drivers/s390/crypto/vfio_ap_ops.c
