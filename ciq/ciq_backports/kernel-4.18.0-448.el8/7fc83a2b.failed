wifi: mac80211: pass link ID where already present

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit 7fc83a2ba2d54780690d871d03d0d8e75868a803
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/7fc83a2b.failed

In a few cases we already have the link ID in the APIs,
pass it already even if it cannot be non-zero yet.

	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 7fc83a2ba2d54780690d871d03d0d8e75868a803)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/cfg.c
diff --cc net/mac80211/cfg.c
index f7b5957d466a,69f540b0cbc6..000000000000
--- a/net/mac80211/cfg.c
+++ b/net/mac80211/cfg.c
@@@ -1321,7 -1334,7 +1321,11 @@@ static int ieee80211_change_beacon(stru
  		err |= BSS_CHANGED_HE_BSS_COLOR;
  	}
  
++<<<<<<< HEAD
 +	ieee80211_bss_info_change_notify(sdata, err);
++=======
+ 	ieee80211_link_info_change_notify(sdata, params->link_id, err);
++>>>>>>> 7fc83a2ba2d5 (wifi: mac80211: pass link ID where already present)
  	return 0;
  }
  
@@@ -1397,9 -1413,10 +1401,14 @@@ static int ieee80211_stop_ap(struct wip
  
  	sdata->vif.bss_conf.enable_beacon = false;
  	sdata->beacon_rate_set = false;
 -	sdata->vif.cfg.ssid_len = 0;
 +	sdata->vif.bss_conf.ssid_len = 0;
  	clear_bit(SDATA_STATE_OFFCHANNEL_BEACON_STOPPED, &sdata->state);
++<<<<<<< HEAD
 +	ieee80211_bss_info_change_notify(sdata, BSS_CHANGED_BEACON_ENABLED);
++=======
+ 	ieee80211_link_info_change_notify(sdata, link_id,
+ 					  BSS_CHANGED_BEACON_ENABLED);
++>>>>>>> 7fc83a2ba2d5 (wifi: mac80211: pass link ID where already present)
  
  	if (sdata->wdev.cac_started) {
  		chandef = sdata->vif.bss_conf.chandef;
@@@ -3959,7 -3982,7 +3968,11 @@@ static int ieee80211_set_ap_chanwidth(s
  
  	ret = ieee80211_vif_change_bandwidth(sdata, chandef, &changed);
  	if (ret == 0)
++<<<<<<< HEAD
 +		ieee80211_bss_info_change_notify(sdata, changed);
++=======
+ 		ieee80211_link_info_change_notify(sdata, link_id, changed);
++>>>>>>> 7fc83a2ba2d5 (wifi: mac80211: pass link ID where already present)
  
  	return ret;
  }
* Unmerged path net/mac80211/cfg.c
