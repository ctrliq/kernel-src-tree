swiotlb: fix passing local variable to debugfs_create_ulong()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Tianyu Lan <tiala@microsoft.com>
commit 5c850d31880e00f063fa2a3746ba212c4bcc510f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/5c850d31.failed

Debugfs node will be run-timely checked and so local variable
should be not passed to debugfs_create_ulong(). Fix it via
debugfs_create_file() to create io_tlb_used node and calculate
used io tlb number with fops_io_tlb_used attribute.

Fixes: 20347fca71a3 ("swiotlb: split up the global swiotlb lock")
	Signed-off-by: Tianyu Lan <tiala@microsoft.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 5c850d31880e00f063fa2a3746ba212c4bcc510f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/dma/swiotlb.c
diff --cc kernel/dma/swiotlb.c
index 623d86fa3853,c5a9190b218f..000000000000
--- a/kernel/dma/swiotlb.c
+++ b/kernel/dma/swiotlb.c
@@@ -764,7 -927,8 +771,12 @@@ static void swiotlb_create_debugfs_file
  		return;
  
  	debugfs_create_ulong("io_tlb_nslabs", 0400, mem->debugfs, &mem->nslabs);
++<<<<<<< HEAD
 +	debugfs_create_ulong("io_tlb_used", 0400, mem->debugfs, &mem->used);
++=======
+ 	debugfs_create_file("io_tlb_used", 0400, mem->debugfs, NULL,
+ 			&fops_io_tlb_used);
++>>>>>>> 5c850d31880e (swiotlb: fix passing local variable to debugfs_create_ulong())
  }
  
  static int __init __maybe_unused swiotlb_create_default_debugfs(void)
* Unmerged path kernel/dma/swiotlb.c
