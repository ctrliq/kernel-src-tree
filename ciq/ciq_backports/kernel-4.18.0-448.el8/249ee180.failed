ASoC: SOF: disable dma trace in s0ix

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Libin Yang <libin.yang@intel.com>
commit 249ee180874dd48a809caf70981b2aa800329d27
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/249ee180.failed

When system enters s0ix, the dma trace won't be used. Otherwise,
the DMA will access the host memory, which will prevent entering
S0ix. Driver has notified firmware not to send message through
dma trace. Let's also trigger stop dma trace in driver side.

	Signed-off-by: Libin Yang <libin.yang@intel.com>
	Reviewed-by: Kai Vehmanen <kai.vehmanen@intel.com>
	Reviewed-by: PÃ©ter Ujfalusi <peter.ujfalusi@linux.intel.com>
	Signed-off-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Link: https://lore.kernel.org/r/20220330201926.1330402-8-ranjani.sridharan@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 249ee180874dd48a809caf70981b2aa800329d27)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/pm.c
diff --cc sound/soc/sof/pm.c
index 1e40cb6e8b58,44008dd075c2..000000000000
--- a/sound/soc/sof/pm.c
+++ b/sound/soc/sof/pm.c
@@@ -205,12 -204,18 +212,19 @@@ static int sof_suspend(struct device *d
  	}
  
  	target_state = snd_sof_dsp_power_target(sdev);
 -	pm_state.event = target_state;
  
  	/* Skip to platform-specific suspend if DSP is entering D0 */
++<<<<<<< HEAD
 +	if (target_state == SOF_DSP_PM_D0)
++=======
+ 	if (target_state == SOF_DSP_PM_D0) {
+ 		snd_sof_trace_suspend(sdev, pm_state);
+ 		/* Notify clients not managed by pm framework about core suspend */
+ 		sof_suspend_clients(sdev, pm_state);
++>>>>>>> 249ee180874d (ASoC: SOF: disable dma trace in s0ix)
  		goto suspend;
 -	}
  
 -	if (tplg_ops->tear_down_all_pipelines)
 -		tplg_ops->tear_down_all_pipelines(sdev, false);
 +	sof_tear_down_pipelines(sdev, false);
  
  	/* suspend DMA trace */
  	snd_sof_trace_suspend(sdev, pm_state);
* Unmerged path sound/soc/sof/pm.c
