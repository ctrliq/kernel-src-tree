scsi: mpi3mr: Unlock on error path

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit 2a8a0147cb523ff8c21e57195dae1833b35dafaf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/2a8a0147.failed

There is some clean up necessary before returning.  Smatch complains:

    drivers/scsi/mpi3mr/mpi3mr_fw.c:4786 mpi3mr_soft_reset_handler()
    warn: inconsistent returns '&mrioc->reset_mutex'.
      Locked on  : 4730
      Unlocked on: 4786

Link: https://lore.kernel.org/r/YtVCEsxMU8buuMjP@kili
Fixes: f10af057325c ("scsi: mpi3mr: Resource Based Metering")
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 2a8a0147cb523ff8c21e57195dae1833b35dafaf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/mpi3mr/mpi3mr_fw.c
diff --cc drivers/scsi/mpi3mr/mpi3mr_fw.c
index a891e8c285f7,0866dfd43318..000000000000
--- a/drivers/scsi/mpi3mr/mpi3mr_fw.c
+++ b/drivers/scsi/mpi3mr/mpi3mr_fw.c
@@@ -4677,6 -4721,15 +4677,18 @@@ int mpi3mr_soft_reset_handler(struct mp
  		ioc_err(mrioc, "Failed to issue soft reset to the ioc\n");
  		goto out;
  	}
++<<<<<<< HEAD
++=======
+ 	if (mrioc->num_io_throttle_group !=
+ 	    mrioc->facts.max_io_throttle_group) {
+ 		ioc_err(mrioc,
+ 		    "max io throttle group doesn't match old(%d), new(%d)\n",
+ 		    mrioc->num_io_throttle_group,
+ 		    mrioc->facts.max_io_throttle_group);
+ 		retval = -EPERM;
+ 		goto out;
+ 	}
++>>>>>>> 2a8a0147cb52 (scsi: mpi3mr: Unlock on error path)
  
  	mpi3mr_flush_delayed_cmd_lists(mrioc);
  	mpi3mr_flush_drv_cmds(mrioc);
* Unmerged path drivers/scsi/mpi3mr/mpi3mr_fw.c
