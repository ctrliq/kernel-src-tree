ASoC: Intel: bdw_rt286: Improve probe() function quality

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Cezary Rojewski <cezary.rojewski@intel.com>
commit 9177203c209d9137dce52c7f0bc28e54960e5a41
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/9177203c.failed

Declare local 'dev' and make use of it plus dev_get_platdata() to
improve code readability. Relocate few relevant to the function macros
for the exact same read too.

	Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
	Reviewed-by: Amadeusz Sławiński <amadeuszx.slawinski@linux.intel.com>
	Tested-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20220620101402.2684366-14-cezary.rojewski@intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 9177203c209d9137dce52c7f0bc28e54960e5a41)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/bdw_rt286.c
diff --cc sound/soc/intel/boards/bdw_rt286.c
index fd0659f00447,c5737f548bef..000000000000
--- a/sound/soc/intel/boards/bdw_rt286.c
+++ b/sound/soc/intel/boards/bdw_rt286.c
@@@ -262,56 -234,52 +262,87 @@@ static int broadwell_resume(struct snd_
  	return 0;
  }
  
++<<<<<<< HEAD
 +/* use space before codec name to simplify card ID, and simplify driver name */
 +#define SOF_CARD_NAME "bdw rt286" /* card name will be 'sof-bdw rt286' */
 +#define SOF_DRIVER_NAME "SOF"
 +
 +#define CARD_NAME "broadwell-rt286"
 +#define DRIVER_NAME NULL /* card name will be used for driver name */
 +
 +/* broadwell audio machine driver for WPT + RT286S */
 +static struct snd_soc_card broadwell_rt286 = {
++=======
+ static struct snd_soc_card bdw_rt286_card = {
++>>>>>>> 9177203c209d (ASoC: Intel: bdw_rt286: Improve probe() function quality)
  	.owner = THIS_MODULE,
 -	.dai_link = card_dai_links,
 -	.num_links = ARRAY_SIZE(card_dai_links),
 -	.controls = card_controls,
 -	.num_controls = ARRAY_SIZE(card_controls),
 -	.dapm_widgets = card_widgets,
 -	.num_dapm_widgets = ARRAY_SIZE(card_widgets),
 -	.dapm_routes = card_routes,
 -	.num_dapm_routes = ARRAY_SIZE(card_routes),
 +	.dai_link = broadwell_rt286_dais,
 +	.num_links = ARRAY_SIZE(broadwell_rt286_dais),
 +	.controls = broadwell_controls,
 +	.num_controls = ARRAY_SIZE(broadwell_controls),
 +	.dapm_widgets = broadwell_widgets,
 +	.num_dapm_widgets = ARRAY_SIZE(broadwell_widgets),
 +	.dapm_routes = broadwell_rt286_map,
 +	.num_dapm_routes = ARRAY_SIZE(broadwell_rt286_map),
  	.fully_routed = true,
 -	.suspend_pre = bdw_rt286_suspend,
 -	.resume_post = bdw_rt286_resume,
 +	.suspend_pre = broadwell_suspend,
 +	.resume_post = broadwell_resume,
  };
  
++<<<<<<< HEAD
 +static int broadwell_audio_probe(struct platform_device *pdev)
++=======
+ /* Use space before codec name to simplify card ID, and simplify driver name. */
+ #define SOF_CARD_NAME "bdw rt286" /* card name will be 'sof-bdw rt286' */
+ #define SOF_DRIVER_NAME "SOF"
+ 
+ #define CARD_NAME "broadwell-rt286"
+ 
+ static int bdw_rt286_probe(struct platform_device *pdev)
++>>>>>>> 9177203c209d (ASoC: Intel: bdw_rt286: Improve probe() function quality)
  {
  	struct snd_soc_acpi_mach *mach;
+ 	struct device *dev = &pdev->dev;
  	int ret;
  
++<<<<<<< HEAD
 +	broadwell_rt286.dev = &pdev->dev;
++=======
+ 	bdw_rt286_card.dev = dev;
+ 	mach = dev_get_platdata(dev);
++>>>>>>> 9177203c209d (ASoC: Intel: bdw_rt286: Improve probe() function quality)
  
 -	ret = snd_soc_fixup_dai_links_platform_name(&bdw_rt286_card, mach->mach_params.platform);
 +	/* override platform name, if required */
 +	mach = pdev->dev.platform_data;
 +	ret = snd_soc_fixup_dai_links_platform_name(&broadwell_rt286,
 +						    mach->mach_params.platform);
  	if (ret)
  		return ret;
  
++<<<<<<< HEAD
 +	/* set card and driver name */
 +	if (snd_soc_acpi_sof_parent(&pdev->dev)) {
 +		broadwell_rt286.name = SOF_CARD_NAME;
 +		broadwell_rt286.driver_name = SOF_DRIVER_NAME;
 +	} else {
 +		broadwell_rt286.name = CARD_NAME;
 +		broadwell_rt286.driver_name = DRIVER_NAME;
 +	}
 +
 +	return devm_snd_soc_register_card(&pdev->dev, &broadwell_rt286);
++=======
+ 	if (snd_soc_acpi_sof_parent(dev)) {
+ 		bdw_rt286_card.name = SOF_CARD_NAME;
+ 		bdw_rt286_card.driver_name = SOF_DRIVER_NAME;
+ 	} else {
+ 		bdw_rt286_card.name = CARD_NAME;
+ 	}
+ 
+ 	return devm_snd_soc_register_card(dev, &bdw_rt286_card);
++>>>>>>> 9177203c209d (ASoC: Intel: bdw_rt286: Improve probe() function quality)
  }
  
 -static int bdw_rt286_remove(struct platform_device *pdev)
 +static int broadwell_audio_remove(struct platform_device *pdev)
  {
  	struct snd_soc_card *card = platform_get_drvdata(pdev);
  
* Unmerged path sound/soc/intel/boards/bdw_rt286.c
