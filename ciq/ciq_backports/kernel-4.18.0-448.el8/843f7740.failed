tcp: fix signed/unsigned comparison

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Eric Dumazet <edumazet@google.com>
commit 843f77407eebee07c2a3300df0c4b33f64322e29
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/843f7740.failed

Kernel test robot reported:

smatch warnings:
net/ipv4/tcp_input.c:5966 tcp_rcv_established() warn: unsigned 'reason' is never less than zero.

I actually had one packetdrill failing because of this bug,
and was about to send the fix :)

v2: Andreas Schwab also pointed out that @reason needs to be negated
    before we reach tcp_drop_reason()

Fixes: 4b506af9c5b8 ("tcp: add two drop reasons for tcp_ack()")
	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Reported-by: kernel test robot <lkp@intel.com>
	Reported-by: Andreas Schwab <schwab@linux-m68k.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 843f77407eebee07c2a3300df0c4b33f64322e29)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/tcp_input.c
diff --cc net/ipv4/tcp_input.c
index c9955d3e9c07,daff631b9486..000000000000
--- a/net/ipv4/tcp_input.c
+++ b/net/ipv4/tcp_input.c
@@@ -5821,9 -5958,11 +5821,15 @@@ slow_path
  		return;
  
  step5:
++<<<<<<< HEAD
 +	if (tcp_ack(sk, skb, FLAG_SLOWPATH | FLAG_UPDATE_TS_RECENT) < 0)
++=======
+ 	reason = tcp_ack(sk, skb, FLAG_SLOWPATH | FLAG_UPDATE_TS_RECENT);
+ 	if ((int)reason < 0) {
+ 		reason = -reason;
++>>>>>>> 843f77407eeb (tcp: fix signed/unsigned comparison)
  		goto discard;
- 
+ 	}
  	tcp_rcv_rtt_measure_ts(sk, skb);
  
  	/* Process urgent data. */
* Unmerged path net/ipv4/tcp_input.c
