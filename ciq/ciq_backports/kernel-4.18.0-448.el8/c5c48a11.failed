wifi: mac80211: debug: omit link if non-MLO connection

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-448.el8
commit-author Johannes Berg <johannes.berg@intel.com>
commit c5c48a11dd86c7f9d86b8c4cc8eaed350ffd1ea7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-448.el8/c5c48a11.failed

If we don't really have multiple links, omit the link ID from
link debug prints, otherwise we change the format for all of
the existing drivers (most of which might never support MLO),
and also have extra noise in the logs.

	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit c5c48a11dd86c7f9d86b8c4cc8eaed350ffd1ea7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mac80211/debug.h
diff --cc net/mac80211/debug.h
index d90a8f9cc3fd,b4c20f5e778e..000000000000
--- a/net/mac80211/debug.h
+++ b/net/mac80211/debug.h
@@@ -130,6 -134,35 +130,38 @@@ do {									
  #define sdata_dbg(sdata, fmt, ...)					\
  	_sdata_dbg(1, sdata, fmt, ##__VA_ARGS__)
  
++<<<<<<< HEAD
++=======
+ #define link_info(link, fmt, ...)					\
+ 	do {								\
+ 		if ((link)->sdata->vif.valid_links)			\
+ 			_sdata_info((link)->sdata, "[link %d] " fmt,	\
+ 				    (link)->link_id,			\
+ 				    ##__VA_ARGS__);			\
+ 		else							\
+ 			_sdata_info((link)->sdata, fmt, ##__VA_ARGS__);	\
+ 	} while (0)
+ #define link_err(link, fmt, ...)					\
+ 	do {								\
+ 		if ((link)->sdata->vif.valid_links)			\
+ 			_sdata_err((link)->sdata, "[link %d] " fmt,	\
+ 				   (link)->link_id,			\
+ 				   ##__VA_ARGS__);			\
+ 		else							\
+ 			_sdata_err((link)->sdata, fmt, ##__VA_ARGS__);	\
+ 	} while (0)
+ #define link_dbg(link, fmt, ...)					\
+ 	do {								\
+ 		if ((link)->sdata->vif.valid_links)			\
+ 			_sdata_dbg(1, (link)->sdata, "[link %d] " fmt,	\
+ 				   (link)->link_id,			\
+ 				   ##__VA_ARGS__);			\
+ 		else							\
+ 			_sdata_dbg(1, (link)->sdata, fmt,		\
+ 				   ##__VA_ARGS__);			\
+ 	} while (0)
+ 
++>>>>>>> c5c48a11dd86 (wifi: mac80211: debug: omit link if non-MLO connection)
  #define ht_dbg(sdata, fmt, ...)						\
  	_sdata_dbg(MAC80211_HT_DEBUG,					\
  		   sdata, fmt, ##__VA_ARGS__)
* Unmerged path net/mac80211/debug.h
