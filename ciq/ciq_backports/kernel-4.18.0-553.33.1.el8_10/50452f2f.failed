drm/i915: Fix HPD polling, reenabling the output poll work as needed

jira LE-2183
Rebuild_History Non-Buildable kernel-4.18.0-553.33.1.el8_10
commit-author Imre Deak <imre.deak@intel.com>
commit 50452f2f76852322620b63e62922b85e955abe94
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-553.33.1.el8_10/50452f2f.failed

After the commit in the Fixes: line below, HPD polling stopped working
on i915, since after that change calling drm_kms_helper_poll_enable()
doesn't restart drm_mode_config::output_poll_work if the work was
stopped (no connectors needing polling) and enabling polling for a
connector (during runtime suspend or detecting an HPD IRQ storm).

After the above change calling drm_kms_helper_poll_enable() is a nop
after it's been called already and polling for some connectors was
disabled/re-enabled.

Fix this by calling drm_kms_helper_poll_reschedule() added in the
previous patch instead, which reschedules the work whenever expected.

Fixes: d33a54e3991d ("drm/probe_helper: sort out poll_running vs poll_enabled")
CC: stable@vger.kernel.org # 6.4+
	Cc: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
	Cc: dri-devel@lists.freedesktop.org
	Reviewed-by: Jouni HÃ¶gander <jouni.hogander@intel.com>
	Signed-off-by: Imre Deak <imre.deak@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20230822113015.41224-2-imre.deak@intel.com
(cherry picked from commit 50452f2f76852322620b63e62922b85e955abe94)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_hotplug.c
diff --cc drivers/gpu/drm/i915/display/intel_hotplug.c
index 907ab7526cb4,e8562f6f8bb4..000000000000
--- a/drivers/gpu/drm/i915/display/intel_hotplug.c
+++ b/drivers/gpu/drm/i915/display/intel_hotplug.c
@@@ -210,8 -212,9 +210,14 @@@ intel_hpd_irq_storm_switch_to_polling(s
  
  	/* Enable polling and queue hotplug re-enabling. */
  	if (hpd_disabled) {
++<<<<<<< HEAD
 +		drm_kms_helper_poll_enable(&dev_priv->drm);
 +		mod_delayed_work(system_wq, &dev_priv->display.hotplug.reenable_work,
++=======
+ 		drm_kms_helper_poll_reschedule(&dev_priv->drm);
+ 		mod_delayed_work(dev_priv->unordered_wq,
+ 				 &dev_priv->display.hotplug.reenable_work,
++>>>>>>> 50452f2f7685 (drm/i915: Fix HPD polling, reenabling the output poll work as needed)
  				 msecs_to_jiffies(HPD_STORM_REENABLE_DELAY));
  	}
  }
* Unmerged path drivers/gpu/drm/i915/display/intel_hotplug.c
