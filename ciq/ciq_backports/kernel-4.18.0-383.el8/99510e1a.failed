drm/i915: Disable DSB usage for now

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-383.el8
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 99510e1afb4863a225207146bd988064c5fd0629
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-383.el8/99510e1a.failed

Turns out the DSB has trouble correctly loading the gamma LUT.
From a cursory look maybe like some entries do not load
properly, or they get loaded with some gibberish. Unfortunately
our current kms_color/etc. tests do not seem to catch this.

I had a brief look at the generated DSB batch and it looked
correct. Tried a few quick tricks like writing the index
register twice/etc. but didn't see any improvement.
Also tried switching to the 10bit gamma mode in case
there is yet another issue with the multi-segment mode, but
even the 10bit mode was showing issues.

Switching to mmio fixes all of it. I suppose one theory is that
maybe the DSB bangs on the LUT too quickly and it can't keep up
and instead some data either gets dropped or corrupted. To confirm
that someone should try to slow down the DSB's progress a bit.
Another thought was that maybe the LUT has crappy dual porting
and you get contention if you try to load it during active
scanout. But why then would the mmio path work, unless it's
just sufficiently slow?

Whatever the case, this is currently busted so let's disable
it until we get to the root of the problem.

Closes: https://gitlab.freedesktop.org/drm/intel/-/issues/3916
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20211014181856.17581-2-ville.syrjala@linux.intel.com
	Reviewed-by: Uma Shankar <uma.shankar@intel.com>
(cherry picked from commit 99510e1afb4863a225207146bd988064c5fd0629)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/i915_pci.c
diff --cc drivers/gpu/drm/i915/i915_pci.c
index e401da16807b,52749b8f4f6b..000000000000
--- a/drivers/gpu/drm/i915/i915_pci.c
+++ b/drivers/gpu/drm/i915/i915_pci.c
@@@ -884,7 -872,8 +884,12 @@@ static const struct intel_device_info j
  	}, \
  	TGL_CURSOR_OFFSETS, \
  	.has_global_mocs = 1, \
++<<<<<<< HEAD
 +	.display.has_dsb = 1
++=======
+ 	.has_pxp = 1, \
+ 	.display.has_dsb = 0 /* FIXME: LUT load is broken with DSB */
++>>>>>>> 99510e1afb48 (drm/i915: Disable DSB usage for now)
  
  static const struct intel_device_info tgl_info = {
  	GEN12_FEATURES,
* Unmerged path drivers/gpu/drm/i915/i915_pci.c
