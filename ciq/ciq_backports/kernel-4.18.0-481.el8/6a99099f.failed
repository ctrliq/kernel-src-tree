drm/display: Move HDCP helpers into display-helper module

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-481.el8
commit-author Thomas Zimmermann <tzimmermann@suse.de>
commit 6a99099fe1d6c46cbcd74298eeb386c4b9048f77
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-481.el8/6a99099f.failed

Move DRM's HDCP helper library into the display/ subdirectory and add
it to DRM's display helpers. Split the header file into core and helpers.
Update all affected drivers. No functional changes.

v3:
	* fix Kconfig dependencies
v2:
	* fix include statements (Jani, Javier)
	* update Kconfig symbols

	Signed-off-by: Thomas Zimmermann <tzimmermann@suse.de>
	Reviewed-by: Javier Martinez Canillas <javierm@redhat.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20220421073108.19226-7-tzimmermann@suse.de
(cherry picked from commit 6a99099fe1d6c46cbcd74298eeb386c4b9048f77)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/gpu/drm-kms-helpers.rst
#	drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c
#	drivers/gpu/drm/display/Kconfig
#	drivers/gpu/drm/display/Makefile
#	drivers/gpu/drm/i915/Kconfig
#	drivers/gpu/drm/i915/display/intel_hdmi.c
diff --cc Documentation/gpu/drm-kms-helpers.rst
index e37557b30f62,cfda5a092a48..000000000000
--- a/Documentation/gpu/drm-kms-helpers.rst
+++ b/Documentation/gpu/drm-kms-helpers.rst
@@@ -157,6 -214,21 +157,24 @@@ Panel Helper Referenc
  .. kernel-doc:: drivers/gpu/drm/drm_panel_orientation_quirks.c
     :export:
  
++<<<<<<< HEAD
++=======
+ Panel Self Refresh Helper Reference
+ ===================================
+ 
+ .. kernel-doc:: drivers/gpu/drm/drm_self_refresh_helper.c
+    :doc: overview
+ 
+ .. kernel-doc:: drivers/gpu/drm/drm_self_refresh_helper.c
+    :export:
+ 
+ HDCP Helper Functions Reference
+ ===============================
+ 
+ .. kernel-doc:: drivers/gpu/drm/display/drm_hdcp_helper.c
+    :export:
+ 
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  Display Port Helper Functions Reference
  =======================================
  
diff --cc drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c
index ab63e7b11944,67f0f444b4e8..000000000000
--- a/drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c
+++ b/drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c
@@@ -44,7 -43,6 +44,10 @@@
  #include <drm/drm_bridge.h>
  #include <drm/drm_connector.h>
  #include <drm/drm_crtc_helper.h>
++<<<<<<< HEAD
 +#include <drm/drm_edid.h>
++=======
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  #include <drm/drm_modeset_helper_vtables.h>
  #include <drm/drm_print.h>
  #include <drm/drm_probe_helper.h>
diff --cc drivers/gpu/drm/display/Kconfig
index 09712b88a5b8,4406af5cc8bb..000000000000
--- a/drivers/gpu/drm/display/Kconfig
+++ b/drivers/gpu/drm/display/Kconfig
@@@ -23,16 -23,9 +23,19 @@@ config DRM_DISPLAY_HDCP_HELPE
  	help
  	  DRM display helpers for HDCP.
  
++<<<<<<< HEAD
 +config DRM_DISPLAY_HDMI_HELPER
 +	bool
 +	depends on DRM_DISPLAY_HELPER
 +	help
 +	  DRM display helpers for HDMI.
 +
++=======
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  config DRM_DP_AUX_CHARDEV
  	bool "DRM DP AUX Interface"
 -	depends on DRM
 +	depends on DRM && DRM_DISPLAY_HELPER
 +	select DRM_DISPLAY_DP_HELPER
  	help
  	  Choose this option to enable a /dev/drm_dp_auxN node that allows to
  	  read and write values to arbitrary DPCD registers on the DP aux
diff --cc drivers/gpu/drm/display/Makefile
index 52cdda1180d9,abeb5ad8c351..000000000000
--- a/drivers/gpu/drm/display/Makefile
+++ b/drivers/gpu/drm/display/Makefile
@@@ -8,8 -8,6 +8,11 @@@ drm_display_helper-$(CONFIG_DRM_DISPLAY
  						      drm_dp_mst_topology.o \
  						      drm_dsc_helper.o
  drm_display_helper-$(CONFIG_DRM_DISPLAY_HDCP_HELPER) += drm_hdcp_helper.o
++<<<<<<< HEAD
 +drm_display_helper-$(CONFIG_DRM_DISPLAY_HDMI_HELPER) += drm_hdmi_helper.o \
 +							drm_scdc_helper.o
++=======
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  drm_display_helper-$(CONFIG_DRM_DP_AUX_CHARDEV) += drm_dp_aux_dev.o
  drm_display_helper-$(CONFIG_DRM_DP_CEC) += drm_dp_cec.o
  
diff --cc drivers/gpu/drm/i915/Kconfig
index 7ae3b7d67fcf,a78d82cccbff..000000000000
--- a/drivers/gpu/drm/i915/Kconfig
+++ b/drivers/gpu/drm/i915/Kconfig
@@@ -12,7 -12,6 +12,10 @@@ config DRM_I91
  	select TMPFS
  	select DRM_DISPLAY_DP_HELPER
  	select DRM_DISPLAY_HDCP_HELPER
++<<<<<<< HEAD
 +	select DRM_DISPLAY_HDMI_HELPER
++=======
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  	select DRM_DISPLAY_HELPER
  	select DRM_KMS_HELPER
  	select DRM_PANEL
diff --cc drivers/gpu/drm/i915/display/intel_hdmi.c
index ebd91aa69dd2,c713cebc63fe..000000000000
--- a/drivers/gpu/drm/i915/display/intel_hdmi.c
+++ b/drivers/gpu/drm/i915/display/intel_hdmi.c
@@@ -33,11 -33,10 +33,18 @@@
  #include <linux/string_helpers.h>
  
  #include <drm/display/drm_hdcp_helper.h>
++<<<<<<< HEAD
 +#include <drm/display/drm_hdmi_helper.h>
 +#include <drm/display/drm_scdc_helper.h>
 +#include <drm/drm_atomic_helper.h>
 +#include <drm/drm_crtc.h>
 +#include <drm/drm_edid.h>
++=======
+ #include <drm/drm_atomic_helper.h>
+ #include <drm/drm_crtc.h>
+ #include <drm/drm_edid.h>
+ #include <drm/drm_scdc_helper.h>
++>>>>>>> 6a99099fe1d6 (drm/display: Move HDCP helpers into display-helper module)
  #include <drm/intel_lpe_audio.h>
  
  #include "i915_debugfs.h"
* Unmerged path Documentation/gpu/drm-kms-helpers.rst
* Unmerged path drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c
* Unmerged path drivers/gpu/drm/display/Kconfig
* Unmerged path drivers/gpu/drm/display/Makefile
* Unmerged path drivers/gpu/drm/i915/Kconfig
* Unmerged path drivers/gpu/drm/i915/display/intel_hdmi.c
diff --git a/drivers/misc/mei/hdcp/mei_hdcp.h b/drivers/misc/mei/hdcp/mei_hdcp.h
index 834757f5e072..ca09c8f83d6b 100644
--- a/drivers/misc/mei/hdcp/mei_hdcp.h
+++ b/drivers/misc/mei/hdcp/mei_hdcp.h
@@ -9,7 +9,7 @@
 #ifndef __MEI_HDCP_H__
 #define __MEI_HDCP_H__
 
-#include <drm/drm_hdcp.h>
+#include <drm/display/drm_hdcp.h>
 
 /* me_hdcp_status: Enumeration of all HDCP Status Codes */
 enum me_hdcp_status {
