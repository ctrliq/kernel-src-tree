regmap: Add missing map->bus check

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-481.el8
commit-author Marek Vasut <marex@denx.de>
commit 5c422f0b970d287efa864b8390a02face404db5d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-481.el8/5c422f0b.failed

The map->bus can be NULL here, add the missing NULL pointer check.

Fixes: d77e745613680 ("regmap: Add bulk read/write callbacks into regmap_config")
	Reported-by: kernel test robot <lkp@intel.com>
	Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
	Signed-off-by: Marek Vasut <marex@denx.de>
	Cc: Dan Carpenter <dan.carpenter@oracle.com>
	Cc: Mark Brown <broonie@kernel.org>
To: linux-kernel@vger.kernel.org
Link: https://lore.kernel.org/r/20220509003035.225272-1-marex@denx.de
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 5c422f0b970d287efa864b8390a02face404db5d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/regmap/regmap.c
diff --cc drivers/base/regmap/regmap.c
index a5fdb7dad64b,2221d9863831..000000000000
--- a/drivers/base/regmap/regmap.c
+++ b/drivers/base/regmap/regmap.c
@@@ -1652,11 -1835,11 +1652,19 @@@ static int _regmap_raw_write_impl(struc
  	 * write.
  	 */
  	if (val == work_val)
++<<<<<<< HEAD
 +		ret = map->bus->write(map->bus_context, map->work_buf,
 +				      map->format.reg_bytes +
 +				      map->format.pad_bytes +
 +				      val_len);
 +	else if (map->bus->gather_write)
++=======
+ 		ret = map->write(map->bus_context, map->work_buf,
+ 				 map->format.reg_bytes +
+ 				 map->format.pad_bytes +
+ 				 val_len);
+ 	else if (map->bus && map->bus->gather_write)
++>>>>>>> 5c422f0b970d (regmap: Add missing map->bus check)
  		ret = map->bus->gather_write(map->bus_context, map->work_buf,
  					     map->format.reg_bytes +
  					     map->format.pad_bytes,
* Unmerged path drivers/base/regmap/regmap.c
