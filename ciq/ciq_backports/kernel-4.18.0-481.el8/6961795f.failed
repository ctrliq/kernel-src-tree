PM: domains: Measure power-on/off latencies in genpd based on a governor

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-481.el8
commit-author Ulf Hansson <ulf.hansson@linaro.org>
commit 6961795f0d0a9c424915b3d73198c18b3dbd5e85
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-481.el8/6961795f.failed

The measurements of the power-on|off latencies in genpd for a PM domain are
superfluous, unless the corresponding genpd has a governor assigned to it,
which would make use of the data.

Therefore, let's improve the behaviour in genpd by making the measurements
conditional, based upon if there's a governor assigned.

	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 6961795f0d0a9c424915b3d73198c18b3dbd5e85)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/power/domain.c
diff --cc drivers/base/power/domain.c
index 9e2b595b8793,83b073cdd0ed..000000000000
--- a/drivers/base/power/domain.c
+++ b/drivers/base/power/domain.c
@@@ -529,7 -528,7 +530,11 @@@ static int _genpd_power_on(struct gener
  		goto out;
  
  	genpd->states[state_idx].power_on_latency_ns = elapsed_ns;
++<<<<<<< HEAD
 +	genpd->max_off_time_changed = true;
++=======
+ 	genpd->gd->max_off_time_changed = true;
++>>>>>>> 6961795f0d0a (PM: domains: Measure power-on/off latencies in genpd based on a governor)
  	pr_debug("%s: Power-%s latency exceeded, new value %lld ns\n",
  		 genpd->name, "on", elapsed_ns);
  
@@@ -578,7 -578,7 +584,11 @@@ static int _genpd_power_off(struct gene
  		goto out;
  
  	genpd->states[state_idx].power_off_latency_ns = elapsed_ns;
++<<<<<<< HEAD
 +	genpd->max_off_time_changed = true;
++=======
+ 	genpd->gd->max_off_time_changed = true;
++>>>>>>> 6961795f0d0a (PM: domains: Measure power-on/off latencies in genpd based on a governor)
  	pr_debug("%s: Power-%s latency exceeded, new value %lld ns\n",
  		 genpd->name, "off", elapsed_ns);
  
* Unmerged path drivers/base/power/domain.c
