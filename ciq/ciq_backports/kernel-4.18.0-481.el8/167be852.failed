drm/amdgpu/vcn: update vcn4 fw shared data structure

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-481.el8
commit-author Ruijing Dong <ruijing.dong@amd.com>
commit 167be8522821fd38636410103e1c154b589cb1d9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-481.el8/167be852.failed

update VF_RB_SETUP_FLAG, add SMU_DPM_INTERFACE_FLAG,
and corresponding change in VCN4.

	Reviewed-by: Leo Liu <leo.liu@amd.com>
	Signed-off-by: Ruijing Dong <ruijing.dong@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 167be8522821fd38636410103e1c154b589cb1d9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h
#	drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
diff --cc drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h
index 60c608144480,253ea6b159df..000000000000
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h
@@@ -161,6 -161,8 +161,11 @@@
  #define AMDGPU_VCN_SW_RING_FLAG		(1 << 9)
  #define AMDGPU_VCN_FW_LOGGING_FLAG	(1 << 10)
  #define AMDGPU_VCN_SMU_VERSION_INFO_FLAG (1 << 11)
++<<<<<<< HEAD
++=======
+ #define AMDGPU_VCN_SMU_DPM_INTERFACE_FLAG (1 << 11)
+ #define AMDGPU_VCN_VF_RB_SETUP_FLAG (1 << 14)
++>>>>>>> 167be8522821 (drm/amdgpu/vcn: update vcn4 fw shared data structure)
  
  #define AMDGPU_VCN_IB_FLAG_DECODE_BUFFER	0x00000001
  #define AMDGPU_VCN_CMD_FLAG_MSG_BUFFER		0x00000001
@@@ -323,6 -339,9 +331,12 @@@ struct amdgpu_vcn4_fw_shared 
  	struct amdgpu_fw_shared_unified_queue_struct sq;
  	uint8_t pad1[8];
  	struct amdgpu_fw_shared_fw_logging fw_log;
++<<<<<<< HEAD
++=======
+ 	uint8_t pad2[20];
+ 	struct amdgpu_fw_shared_rb_setup rb_setup;
+ 	struct amdgpu_fw_shared_smu_interface_info smu_dpm_interface;
++>>>>>>> 167be8522821 (drm/amdgpu/vcn: update vcn4 fw shared data structure)
  };
  
  struct amdgpu_vcn_fwlog {
diff --cc drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
index fb2d74f30448,897a5ce9c9da..000000000000
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
@@@ -132,6 -150,13 +132,16 @@@ static int vcn_v4_0_sw_init(void *handl
  		fw_shared->present_flag_0 = cpu_to_le32(AMDGPU_FW_SHARED_FLAG_0_UNIFIED_QUEUE);
  		fw_shared->sq.is_enabled = 1;
  
++<<<<<<< HEAD
++=======
+ 		fw_shared->present_flag_0 |= cpu_to_le32(AMDGPU_VCN_SMU_DPM_INTERFACE_FLAG);
+ 		fw_shared->smu_dpm_interface.smu_interface_type = (adev->flags & AMD_IS_APU) ?
+ 			AMDGPU_VCN_SMU_DPM_INTERFACE_APU : AMDGPU_VCN_SMU_DPM_INTERFACE_DGPU;
+ 
+ 		if (amdgpu_sriov_vf(adev))
+ 			fw_shared->present_flag_0 |= cpu_to_le32(AMDGPU_VCN_VF_RB_SETUP_FLAG);
+ 
++>>>>>>> 167be8522821 (drm/amdgpu/vcn: update vcn4 fw shared data structure)
  		if (amdgpu_vcnfw_log)
  			amdgpu_vcn_fwlog_init(&adev->vcn.inst[i]);
  	}
* Unmerged path drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h
* Unmerged path drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
