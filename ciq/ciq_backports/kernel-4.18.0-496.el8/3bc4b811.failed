wifi: mt76: dma: reset wed queues in mt76_dma_rx_reset

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-496.el8
commit-author Sujuan Chen <sujuan.chen@mediatek.com>
commit 3bc4b811688dad5d293a7dcc969d0c387bf4e369
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-496.el8/3bc4b811.failed

This is a preliminary patch to introduce proper wed reset support.

	Tested-by: Daniel Golle <daniel@makrotopia.org>
Co-developed-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Sujuan Chen <sujuan.chen@mediatek.com>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit 3bc4b811688dad5d293a7dcc969d0c387bf4e369)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/dma.c
diff --cc drivers/net/wireless/mediatek/mt76/dma.c
index 9d738bdc4bc2,3bf3216f2f9d..000000000000
--- a/drivers/net/wireless/mediatek/mt76/dma.c
+++ b/drivers/net/wireless/mediatek/mt76/dma.c
@@@ -740,8 -758,13 +740,18 @@@ mt76_dma_rx_reset(struct mt76_dev *dev
  		q->desc[i].ctrl = cpu_to_le32(MT_DMA_CTL_DMA_DONE);
  
  	mt76_dma_rx_cleanup(dev, q);
++<<<<<<< HEAD
 +	mt76_dma_sync_idx(dev, q);
 +	mt76_dma_rx_fill(dev, q);
++=======
+ 
+ 	/* reset WED rx queues */
+ 	mt76_dma_wed_setup(dev, q, true);
+ 	if (q->flags != MT_WED_Q_TXFREE) {
+ 		mt76_dma_sync_idx(dev, q);
+ 		mt76_dma_rx_fill(dev, q, false);
+ 	}
++>>>>>>> 3bc4b811688d (wifi: mt76: dma: reset wed queues in mt76_dma_rx_reset)
  }
  
  static void
* Unmerged path drivers/net/wireless/mediatek/mt76/dma.c
