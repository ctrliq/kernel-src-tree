devlink: Add new "max_mac_per_vf" generic device param

jira KERNEL-572
Rebuild_History Non-Buildable kernel-6.12.0-124.31.1.el10_1
commit-author Mohammad Heib <mheib@redhat.com>
commit 9352d40c8bcd2ef29366d2c38b163c0b115039ed
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-6.12.0-124.31.1.el10_1/9352d40c.failed

Add a new device generic parameter to controls the maximum
number of MAC filters allowed per VF.

For example, to limit a VF to 3 MAC addresses:
 $ devlink dev param set pci/0000:3b:00.0 name max_mac_per_vf \
        value 3 \
        cmode runtime

	Signed-off-by: Mohammad Heib <mheib@redhat.com>
	Reviewed-by: Simon Horman <horms@kernel.org>
	Signed-off-by: Jacob Keller <jacob.e.keller@intel.com>
	Signed-off-by: Tony Nguyen <anthony.l.nguyen@intel.com>
(cherry picked from commit 9352d40c8bcd2ef29366d2c38b163c0b115039ed)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/networking/devlink/devlink-params.rst
#	include/net/devlink.h
#	net/devlink/param.c
diff --cc Documentation/networking/devlink/devlink-params.rst
index 211b58177e12,c0597d456641..000000000000
--- a/Documentation/networking/devlink/devlink-params.rst
+++ b/Documentation/networking/devlink/devlink-params.rst
@@@ -143,3 -143,15 +143,18 @@@ own name
     * - ``clock_id``
       - u64
       - Clock ID used by the device for registering DPLL devices and pins.
++<<<<<<< HEAD
++=======
+    * - ``total_vfs``
+      - u32
+      - The max number of Virtual Functions (VFs) exposed by the PF.
+        after reboot/pci reset, 'sriov_totalvfs' entry under the device's sysfs
+        directory will report this value.
+    * - ``num_doorbells``
+      - u32
+      - Controls the number of doorbells used by the device.
+    * - ``max_mac_per_vf``
+      - u32
+      - Controls the maximum number of MAC address filters that can be assigned
+        to a Virtual Function (VF).
++>>>>>>> 9352d40c8bcd (devlink: Add new "max_mac_per_vf" generic device param)
diff --cc include/net/devlink.h
index c0824ca087f4,d01046ef0577..000000000000
--- a/include/net/devlink.h
+++ b/include/net/devlink.h
@@@ -556,6 -530,9 +556,12 @@@ enum devlink_param_generic_id 
  	DEVLINK_PARAM_GENERIC_ID_EVENT_EQ_SIZE,
  	DEVLINK_PARAM_GENERIC_ID_ENABLE_PHC,
  	DEVLINK_PARAM_GENERIC_ID_CLOCK_ID,
++<<<<<<< HEAD
++=======
+ 	DEVLINK_PARAM_GENERIC_ID_TOTAL_VFS,
+ 	DEVLINK_PARAM_GENERIC_ID_NUM_DOORBELLS,
+ 	DEVLINK_PARAM_GENERIC_ID_MAX_MAC_PER_VF,
++>>>>>>> 9352d40c8bcd (devlink: Add new "max_mac_per_vf" generic device param)
  
  	/* add new param generic ids above here*/
  	__DEVLINK_PARAM_GENERIC_ID_MAX,
@@@ -620,6 -597,15 +626,18 @@@
  #define DEVLINK_PARAM_GENERIC_CLOCK_ID_NAME "clock_id"
  #define DEVLINK_PARAM_GENERIC_CLOCK_ID_TYPE DEVLINK_PARAM_TYPE_U64
  
++<<<<<<< HEAD
++=======
+ #define DEVLINK_PARAM_GENERIC_TOTAL_VFS_NAME "total_vfs"
+ #define DEVLINK_PARAM_GENERIC_TOTAL_VFS_TYPE DEVLINK_PARAM_TYPE_U32
+ 
+ #define DEVLINK_PARAM_GENERIC_NUM_DOORBELLS_NAME "num_doorbells"
+ #define DEVLINK_PARAM_GENERIC_NUM_DOORBELLS_TYPE DEVLINK_PARAM_TYPE_U32
+ 
+ #define DEVLINK_PARAM_GENERIC_MAX_MAC_PER_VF_NAME "max_mac_per_vf"
+ #define DEVLINK_PARAM_GENERIC_MAX_MAC_PER_VF_TYPE DEVLINK_PARAM_TYPE_U32
+ 
++>>>>>>> 9352d40c8bcd (devlink: Add new "max_mac_per_vf" generic device param)
  #define DEVLINK_PARAM_GENERIC(_id, _cmodes, _get, _set, _validate)	\
  {									\
  	.id = DEVLINK_PARAM_GENERIC_ID_##_id,				\
diff --cc net/devlink/param.c
index 41dcc86cfd94,6b233b13b69a..000000000000
--- a/net/devlink/param.c
+++ b/net/devlink/param.c
@@@ -102,6 -102,21 +102,24 @@@ static const struct devlink_param devli
  		.name = DEVLINK_PARAM_GENERIC_CLOCK_ID_NAME,
  		.type = DEVLINK_PARAM_GENERIC_CLOCK_ID_TYPE,
  	},
++<<<<<<< HEAD
++=======
+ 	{
+ 		.id = DEVLINK_PARAM_GENERIC_ID_TOTAL_VFS,
+ 		.name = DEVLINK_PARAM_GENERIC_TOTAL_VFS_NAME,
+ 		.type = DEVLINK_PARAM_GENERIC_TOTAL_VFS_TYPE,
+ 	},
+ 	{
+ 		.id = DEVLINK_PARAM_GENERIC_ID_NUM_DOORBELLS,
+ 		.name = DEVLINK_PARAM_GENERIC_NUM_DOORBELLS_NAME,
+ 		.type = DEVLINK_PARAM_GENERIC_NUM_DOORBELLS_TYPE,
+ 	},
+ 	{
+ 		.id = DEVLINK_PARAM_GENERIC_ID_MAX_MAC_PER_VF,
+ 		.name = DEVLINK_PARAM_GENERIC_MAX_MAC_PER_VF_NAME,
+ 		.type = DEVLINK_PARAM_GENERIC_MAX_MAC_PER_VF_TYPE,
+ 	},
++>>>>>>> 9352d40c8bcd (devlink: Add new "max_mac_per_vf" generic device param)
  };
  
  static int devlink_param_generic_verify(const struct devlink_param *param)
* Unmerged path Documentation/networking/devlink/devlink-params.rst
* Unmerged path include/net/devlink.h
* Unmerged path net/devlink/param.c
