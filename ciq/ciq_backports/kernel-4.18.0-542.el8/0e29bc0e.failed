selftests/vm: use top_srcdir instead of recomputing relative paths

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-542.el8
commit-author Axel Rasmussen <axelrasmussen@google.com>
commit 0e29bc0ebaabf4e5270a23fd5ccce06fac3e140d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-542.el8/0e29bc0e.failed

In various places both in t/t/s/v/Makefile as well as some of the test
sources, we were referring to headers or directories using some fairly
long relative paths.

Since we have a working top_srcdir variable though, which refers to the
root of the kernel tree, we can clean up all of these "up and over"
relative paths, just relying on the single variable instead.

	Signed-off-by: Axel Rasmussen <axelrasmussen@google.com>
	Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>
(cherry picked from commit 0e29bc0ebaabf4e5270a23fd5ccce06fac3e140d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/vm/hmm-tests.c
#	tools/testing/selftests/vm/ksm_tests.c
diff --cc tools/testing/selftests/vm/hmm-tests.c
index 1063430acb76,98b949c279be..000000000000
--- a/tools/testing/selftests/vm/hmm-tests.c
+++ b/tools/testing/selftests/vm/hmm-tests.c
@@@ -35,7 -35,8 +35,12 @@@
   * This is a private UAPI to the kernel test module so it isn't exported
   * in the usual include/uapi/... directory.
   */
++<<<<<<< HEAD
 +#include "../../../../lib/test_hmm_uapi.h"
++=======
+ #include <lib/test_hmm_uapi.h>
+ #include <mm/gup_test.h>
++>>>>>>> 0e29bc0ebaab (selftests/vm: use top_srcdir instead of recomputing relative paths)
  
  struct hmm_buffer {
  	void		*ptr;
* Unmerged path tools/testing/selftests/vm/ksm_tests.c
diff --git a/tools/testing/selftests/vm/Makefile b/tools/testing/selftests/vm/Makefile
index 7799278a1068..ac2392de0e05 100644
--- a/tools/testing/selftests/vm/Makefile
+++ b/tools/testing/selftests/vm/Makefile
@@ -25,7 +25,7 @@ MACHINE ?= $(shell echo $(uname_M) | sed -e 's/aarch64.*/arm64/' -e 's/ppc64.*/p
 # LDLIBS.
 MAKEFLAGS += --no-builtin-rules
 
-CFLAGS = -Wall -I ../../../../usr/include $(EXTRA_CFLAGS) $(KHDR_INCLUDES)
+CFLAGS = -Wall -I $(top_srcdir) -I $(top_srcdir)/usr/include $(EXTRA_CFLAGS) $(KHDR_INCLUDES)
 LDLIBS = -lrt -lpthread
 TEST_GEN_FILES = compaction_test
 TEST_GEN_FILES += gup_test
diff --git a/tools/testing/selftests/vm/gup_test.c b/tools/testing/selftests/vm/gup_test.c
index 7b68b10c8395..99132e048e41 100644
--- a/tools/testing/selftests/vm/gup_test.c
+++ b/tools/testing/selftests/vm/gup_test.c
@@ -10,7 +10,7 @@
 #include <sys/types.h>
 #include <pthread.h>
 #include <assert.h>
-#include "../../../../mm/gup_test.h"
+#include <mm/gup_test.h>
 #include "../kselftest.h"
 
 #define MB (1UL << 20)
* Unmerged path tools/testing/selftests/vm/hmm-tests.c
* Unmerged path tools/testing/selftests/vm/ksm_tests.c
