selftests/mm: dump a summary in run_vmtests.sh

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-542.el8
commit-author Peter Xu <peterx@redhat.com>
commit c7c55fc4e39aed6a5a4d47f2201e53b1efb24ca6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-542.el8/c7c55fc4.failed

Dump a summary after running whatever test specified.  Useful for human
runners to identify any kind of failures (besides exit code).

Link: https://lkml.kernel.org/r/20230412164117.327720-1-peterx@redhat.com
	Signed-off-by: Peter Xu <peterx@redhat.com>
	Reviewed-by: Axel Rasmussen <axelrasmussen@google.com>
	Reviewed-by: David Hildenbrand <david@redhat.com>
	Reviewed-by: Mike Rapoport (IBM) <rppt@kernel.org>
	Cc: Dmitry Safonov <0x7f454c46@gmail.com>
	Cc: Mike Kravetz <mike.kravetz@oracle.com>
	Cc: Zach O'Keefe <zokeefe@google.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
(cherry picked from commit c7c55fc4e39aed6a5a4d47f2201e53b1efb24ca6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/vm/run_vmtests.sh
diff --cc tools/testing/selftests/vm/run_vmtests.sh
index e8a1591aca37,ddf40f883747..000000000000
mode 100755,100644..100755
--- a/tools/testing/selftests/vm/run_vmtests.sh
+++ b/tools/testing/selftests/vm/run_vmtests.sh
@@@ -5,7 -5,9 +5,13 @@@
  # Kselftest framework requirement - SKIP code is 4.
  ksft_skip=4
  
++<<<<<<< HEAD:tools/testing/selftests/vm/run_vmtests.sh
 +mnt=./huge
++=======
+ count_pass=0
+ count_fail=0
+ count_skip=0
++>>>>>>> c7c55fc4e39a (selftests/mm: dump a summary in run_vmtests.sh):tools/testing/selftests/mm/run_vmtests.sh
  exitcode=0
  
  usage() {
@@@ -229,7 -277,14 +238,17 @@@ f
  
  if [ -x ./protection_keys_64 ]
  then
 -	CATEGORY="pkey" run_test ./protection_keys_64
 +	run_test ./protection_keys_64
  fi
  
++<<<<<<< HEAD:tools/testing/selftests/vm/run_vmtests.sh
++=======
+ CATEGORY="soft_dirty" run_test ./soft-dirty
+ 
+ # COW tests
+ CATEGORY="cow" run_test ./cow
+ 
+ echo "SUMMARY: PASS=${count_pass} SKIP=${count_skip} FAIL=${count_fail}"
+ 
++>>>>>>> c7c55fc4e39a (selftests/mm: dump a summary in run_vmtests.sh):tools/testing/selftests/mm/run_vmtests.sh
  exit $exitcode
* Unmerged path tools/testing/selftests/vm/run_vmtests.sh
