PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-425.13.1.el8_7
commit-author Thomas Gleixner <tglx@linutronix.de>
commit 981aa1d366bf46bdc1c9259a5ab818a8d522724e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-425.13.1.el8_7/981aa1d3.failed

The unconditional selection of PCI_MSI_ARCH_FALLBACKS has an unmet
dependency because PCI_MSI_ARCH_FALLBACKS is defined in a 'if PCI' clause.

As it is only relevant when PCI_MSI is enabled, update the affected
architecture Kconfigs to make the selection of PCI_MSI_ARCH_FALLBACKS
depend on 'if PCI_MSI'.

Fixes: 077ee78e3928 ("PCI/MSI: Make arch_.*_msi_irq[s] fallbacks selectable")
	Reported-by: Qian Cai <cai@redhat.com>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Cc: Vasily Gorbik <gor@linux.ibm.com>
Links: https://lore.kernel.org/r/cdfd63305caa57785b0925dd24c0711ea02c8527.camel@redhat.com
(cherry picked from commit 981aa1d366bf46bdc1c9259a5ab818a8d522724e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/ia64/Kconfig
#	arch/mips/Kconfig
#	arch/powerpc/Kconfig
#	arch/s390/Kconfig
#	arch/sparc/Kconfig
diff --cc arch/ia64/Kconfig
index d6f777303de9,9d0f1e13c918..000000000000
--- a/arch/ia64/Kconfig
+++ b/arch/ia64/Kconfig
@@@ -55,6 -55,8 +55,11 @@@ config IA6
  	select HAVE_ARCH_AUDITSYSCALL
  	select NEED_DMA_MAP_STATE
  	select NEED_SG_DMA_LENGTH
++<<<<<<< HEAD
++=======
+ 	select NUMA if !FLATMEM
+ 	select PCI_MSI_ARCH_FALLBACKS if PCI_MSI
++>>>>>>> 981aa1d366bf (PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS)
  	default y
  	help
  	  The Itanium Processor Family is Intel's 64-bit successor to
diff --cc arch/mips/Kconfig
index 8ef87c03cf44,ea2212934136..000000000000
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@@ -69,10 -82,12 +69,15 @@@ config MIP
  	select HAVE_SYSCALL_TRACEPOINTS
  	select HAVE_VIRT_CPU_ACCOUNTING_GEN if 64BIT || !SMP
  	select IRQ_FORCED_THREADING
 -	select ISA if EISA
 -	select MODULES_USE_ELF_REL if MODULES
  	select MODULES_USE_ELF_RELA if MODULES && 64BIT
 +	select MODULES_USE_ELF_REL if MODULES
  	select PERF_USE_VMALLOC
++<<<<<<< HEAD
 +	select RTC_LIB if !MACH_LOONGSON64
++=======
+ 	select PCI_MSI_ARCH_FALLBACKS if PCI_MSI
+ 	select RTC_LIB
++>>>>>>> 981aa1d366bf (PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS)
  	select SYSCTL_EXCEPTION_TRACE
  	select VIRT_TO_BUS
  
diff --cc arch/powerpc/Kconfig
index 7d9887476f0b,1f953c90cfc7..000000000000
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@@ -231,10 -241,13 +231,16 @@@ config PP
  	select NEED_DMA_MAP_STATE		if PPC64 || NOT_COHERENT_CACHE
  	select NEED_SG_DMA_LENGTH
  	select OF
 -	select OF_DMA_DEFAULT_COHERENT		if !NOT_COHERENT_CACHE
  	select OF_EARLY_FLATTREE
 +	select OF_RESERVED_MEM
  	select OLD_SIGACTION			if PPC32
  	select OLD_SIGSUSPEND
++<<<<<<< HEAD
++=======
+ 	select PCI_DOMAINS			if PCI
+ 	select PCI_MSI_ARCH_FALLBACKS		if PCI_MSI
+ 	select PCI_SYSCALL			if PCI
++>>>>>>> 981aa1d366bf (PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS)
  	select PPC_DAWR				if PPC64
  	select RTC_LIB
  	select SPARSE_IRQ
diff --cc arch/s390/Kconfig
index 53b3712d90ef,0a3899386a51..000000000000
--- a/arch/s390/Kconfig
+++ b/arch/s390/Kconfig
@@@ -168,9 -175,17 +168,15 @@@ config S39
  	select HAVE_RSEQ
  	select HAVE_SYSCALL_TRACEPOINTS
  	select HAVE_VIRT_CPU_ACCOUNTING
 -	select IOMMU_HELPER		if PCI
 -	select IOMMU_SUPPORT		if PCI
  	select MODULES_USE_ELF_RELA
 -	select NEED_DMA_MAP_STATE	if PCI
 -	select NEED_SG_DMA_LENGTH	if PCI
  	select OLD_SIGACTION
  	select OLD_SIGSUSPEND3
++<<<<<<< HEAD
++=======
+ 	select PCI_DOMAINS		if PCI
+ 	select PCI_MSI			if PCI
+ 	select PCI_MSI_ARCH_FALLBACKS	if PCI_MSI
++>>>>>>> 981aa1d366bf (PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS)
  	select SPARSE_IRQ
  	select SYSCTL_EXCEPTION_TRACE
  	select THREAD_INFO_IN_TASK
diff --cc arch/sparc/Kconfig
index 12d490d796fe,91ed1104b7f4..000000000000
--- a/arch/sparc/Kconfig
+++ b/arch/sparc/Kconfig
@@@ -38,9 -42,10 +38,14 @@@ config SPAR
  	select GENERIC_STRNCPY_FROM_USER
  	select GENERIC_STRNLEN_USER
  	select MODULES_USE_ELF_RELA
++<<<<<<< HEAD
++=======
+ 	select PCI_SYSCALL if PCI
+ 	select PCI_MSI_ARCH_FALLBACKS if PCI_MSI
++>>>>>>> 981aa1d366bf (PCI: MSI: Fix Kconfig dependencies for PCI_MSI_ARCH_FALLBACKS)
  	select ODD_RT_SIGACTION
  	select OLD_SIGSUSPEND
 +	select ARCH_HAS_SG_CHAIN
  	select CPU_NO_EFFICIENT_FFS
  	select LOCKDEP_SMALL if LOCKDEP
  	select NEED_DMA_MAP_STATE
* Unmerged path arch/ia64/Kconfig
* Unmerged path arch/mips/Kconfig
* Unmerged path arch/powerpc/Kconfig
* Unmerged path arch/s390/Kconfig
* Unmerged path arch/sparc/Kconfig
