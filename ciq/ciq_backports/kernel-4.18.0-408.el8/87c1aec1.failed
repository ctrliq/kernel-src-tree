nl80211: Add support to offload SA Query procedures for AP SME device

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Veerendranath Jakkam <vjakkam@codeaurora.org>
commit 87c1aec15dee8bdb245aabbd181f9f9e1a4770ae
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/87c1aec1.failed

Add a flag attribute to use in ap settings to indicate userspace
supports offloading of SA Query procedures to driver. Also add AP SME
device feature flag to advertise that the SA Query procedures offloaded
to driver when userspace indicates support for offloading of SA Query
procedures.

Driver handles SA Query procedures in driver's SME it self and skip
sending SA Query request or response frames to userspace when userspace
indicates support for SA Query procedures offload. But if userspace
doesn't advertise support for SA Query procedures offload driver shall
not offload SA Query procedures handling.

Also userspace with SA Query procedures offload capability shall skip SA
Query specific validations when driver indicates support for handling SA
Query procedures.

	Signed-off-by: Veerendranath Jakkam <vjakkam@codeaurora.org>
Link: https://lore.kernel.org/r/1637911519-21306-2-git-send-email-vjakkam@codeaurora.org
	Signed-off-by: Johannes Berg <johannes.berg@intel.com>
(cherry picked from commit 87c1aec15dee8bdb245aabbd181f9f9e1a4770ae)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/uapi/linux/nl80211.h
diff --cc include/uapi/linux/nl80211.h
index f75f8bcd1fb4,d997252de986..000000000000
--- a/include/uapi/linux/nl80211.h
+++ b/include/uapi/linux/nl80211.h
@@@ -7471,4 -7491,20 +7473,23 @@@ enum nl80211_mbssid_config_attributes 
  	NL80211_MBSSID_CONFIG_ATTR_MAX = __NL80211_MBSSID_CONFIG_ATTR_LAST - 1,
  };
  
++<<<<<<< HEAD
++=======
+ /**
+  * enum nl80211_ap_settings_flags - AP settings flags
+  *
+  * @NL80211_AP_SETTINGS_EXTERNAL_AUTH_SUPPORT: AP supports external
+  *	authentication.
+  * @NL80211_AP_SETTINGS_SA_QUERY_OFFLOAD_SUPPORT: Userspace supports SA Query
+  *	procedures offload to driver. If driver advertises
+  *	%NL80211_AP_SME_SA_QUERY_OFFLOAD in AP SME features, userspace shall
+  *	ignore SA Query procedures and validations when this flag is set by
+  *	userspace.
+  */
+ enum nl80211_ap_settings_flags {
+ 	NL80211_AP_SETTINGS_EXTERNAL_AUTH_SUPPORT	= 1 << 0,
+ 	NL80211_AP_SETTINGS_SA_QUERY_OFFLOAD_SUPPORT	= 1 << 1,
+ };
+ 
++>>>>>>> 87c1aec15dee (nl80211: Add support to offload SA Query procedures for AP SME device)
  #endif /* __LINUX_NL80211_H */
* Unmerged path include/uapi/linux/nl80211.h
