ACPI: platform-profile: call sysfs_notify() from platform_profile_store()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Hans de Goede <hdegoede@redhat.com>
commit b25d5a1cd19896bb87b399d6e24896cf6f854d44
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/b25d5a1c.failed

Drivers like thinkpad_acpi and ideapad_laptop call the
platform_profile_notify() helper when the profile is changed by hardware
(the embedded-controller/EC) in response to an EC handled hotkey.

This allows userspace to monitor for such changes by polling for POLLPRI
on the platform_profile sysfs file. But the profile can also be changed
underneath a userspace program monitoring it by anonther userspace program
storing a new value.

Add a sysfs_notify() call to platform_profile_store(), so that userspace
programs monitoring for changes also get notified in this case.

Also update the documentation to document that POLLPRI polling can be
used to watch for changes.

	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit b25d5a1cd19896bb87b399d6e24896cf6f854d44)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/ABI/testing/sysfs-platform_profile
* Unmerged path Documentation/ABI/testing/sysfs-platform_profile
* Unmerged path Documentation/ABI/testing/sysfs-platform_profile
diff --git a/drivers/acpi/platform_profile.c b/drivers/acpi/platform_profile.c
index e8c3cd2a2e29..dccf81b1f830 100644
--- a/drivers/acpi/platform_profile.c
+++ b/drivers/acpi/platform_profile.c
@@ -106,6 +106,9 @@ static ssize_t platform_profile_store(struct device *dev,
 	}
 
 	err = cur_profile->profile_set(cur_profile, i);
+	if (!err)
+		sysfs_notify(acpi_kobj, NULL, "platform_profile");
+
 	mutex_unlock(&profile_lock);
 	if (err)
 		return err;
