selinuxfs: unify policy load error reporting

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Ondrej Mosnacek <omosnace@redhat.com>
commit ee5de60a08b7d8d255722662da461ea159c15538
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/ee5de60a.failed

Let's drop the pr_err()s from sel_make_policy_nodes() and just add one
pr_warn_ratelimited() call to the sel_make_policy_nodes() error path in
sel_write_load().

Changing from error to warning makes sense, since after 02a52c5c8c3b
("selinux: move policy commit after updating selinuxfs"), this error
path no longer leads to a broken selinuxfs tree (it's just kept in the
original state and policy load is aborted).

I also added _ratelimited to be consistent with the other prtin in the
same function (it's probably not necessary, but can't really hurt...
there are likely more important error messages to be printed when
filesystem entry creation starts erroring out).

	Suggested-by: Paul Moore <paul@paul-moore.com>
	Signed-off-by: Ondrej Mosnacek <omosnace@redhat.com>
	Signed-off-by: Paul Moore <paul@paul-moore.com>
(cherry picked from commit ee5de60a08b7d8d255722662da461ea159c15538)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	security/selinux/selinuxfs.c
diff --cc security/selinux/selinuxfs.c
index 04269129ce20,fff6babeeae6..000000000000
--- a/security/selinux/selinuxfs.c
+++ b/security/selinux/selinuxfs.c
@@@ -645,9 -644,10 +641,14 @@@ static ssize_t sel_write_load(struct fi
  		goto out;
  	}
  
 -	length = sel_make_policy_nodes(fsi, load_state.policy);
 +	length = sel_make_policy_nodes(fsi, newpolicy);
  	if (length) {
++<<<<<<< HEAD
 +		selinux_policy_cancel(fsi->state, newpolicy);
++=======
+ 		pr_warn_ratelimited("SELinux: failed to initialize selinuxfs\n");
+ 		selinux_policy_cancel(fsi->state, &load_state);
++>>>>>>> ee5de60a08b7 (selinuxfs: unify policy load error reporting)
  		goto out;
  	}
  
* Unmerged path security/selinux/selinuxfs.c
