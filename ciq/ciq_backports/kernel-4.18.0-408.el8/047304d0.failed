netdevsim: fix uninit value in nsim_drv_configure_vfs()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Jakub Kicinski <kuba@kernel.org>
commit 047304d0bfa5be2ace106974f87eec51e0832cd0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/047304d0.failed

Build bot points out that I missed initializing ret
after refactoring.

	Reported-by: kernel test robot <lkp@intel.com>
Fixes: 1c401078bcf3 ("netdevsim: move details of vf config to dev")
Link: https://lore.kernel.org/r/20211101221845.3188490-1-kuba@kernel.org
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 047304d0bfa5be2ace106974f87eec51e0832cd0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/netdevsim/dev.c
diff --cc drivers/net/netdevsim/dev.c
index 79ed736717c1,54345c096a16..000000000000
--- a/drivers/net/netdevsim/dev.c
+++ b/drivers/net/netdevsim/dev.c
@@@ -1614,6 -1719,43 +1614,46 @@@ int nsim_dev_port_del(struct nsim_bus_d
  	return err;
  }
  
++<<<<<<< HEAD
++=======
+ int nsim_drv_configure_vfs(struct nsim_bus_dev *nsim_bus_dev,
+ 			   unsigned int num_vfs)
+ {
+ 	struct nsim_dev *nsim_dev = dev_get_drvdata(&nsim_bus_dev->dev);
+ 	int ret = 0;
+ 
+ 	mutex_lock(&nsim_dev->vfs_lock);
+ 	if (nsim_bus_dev->num_vfs == num_vfs)
+ 		goto exit_unlock;
+ 	if (nsim_bus_dev->num_vfs && num_vfs) {
+ 		ret = -EBUSY;
+ 		goto exit_unlock;
+ 	}
+ 	if (nsim_bus_dev->max_vfs < num_vfs) {
+ 		ret = -ENOMEM;
+ 		goto exit_unlock;
+ 	}
+ 
+ 	nsim_bus_dev_set_vfs(nsim_bus_dev, num_vfs);
+ 	if (nsim_esw_mode_is_switchdev(nsim_dev)) {
+ 		if (num_vfs) {
+ 			ret = nsim_esw_switchdev_enable(nsim_dev, NULL);
+ 			if (ret) {
+ 				nsim_bus_dev_set_vfs(nsim_bus_dev, 0);
+ 				goto exit_unlock;
+ 			}
+ 		} else {
+ 			nsim_esw_legacy_enable(nsim_dev, NULL);
+ 		}
+ 	}
+ 
+ exit_unlock:
+ 	mutex_unlock(&nsim_dev->vfs_lock);
+ 
+ 	return ret;
+ }
+ 
++>>>>>>> 047304d0bfa5 (netdevsim: fix uninit value in nsim_drv_configure_vfs())
  int nsim_dev_init(void)
  {
  	nsim_dev_ddir = debugfs_create_dir(DRV_NAME, NULL);
* Unmerged path drivers/net/netdevsim/dev.c
