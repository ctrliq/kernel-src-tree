KVM: x86: warn on incorrectly NULL members of kvm_x86_ops

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Paolo Bonzini <pbonzini@redhat.com>
commit dd2319c61888018a5295264c9b631e151dad364d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/dd2319c6.failed

Use the newly corrected KVM_X86_OP annotations to warn about possible
NULL pointer dereferences as soon as the vendor module is loaded.

	Reviewed-by: Sean Christopherson <seanjc@google.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit dd2319c61888018a5295264c9b631e151dad364d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/kvm_host.h
diff --cc arch/x86/include/asm/kvm_host.h
index 96ecf6f2c1a5,a7e82fc1f1f3..000000000000
--- a/arch/x86/include/asm/kvm_host.h
+++ b/arch/x86/include/asm/kvm_host.h
@@@ -1537,10 -1545,13 +1537,17 @@@ extern struct kvm_x86_ops kvm_x86_ops
  
  static inline void kvm_ops_static_call_update(void)
  {
- #define KVM_X86_OP(func) \
+ #define __KVM_X86_OP(func) \
  	static_call_update(kvm_x86_##func, kvm_x86_ops.func);
++<<<<<<< HEAD
 +#define KVM_X86_OP_NULL KVM_X86_OP
++=======
+ #define KVM_X86_OP(func) \
+ 	WARN_ON(!kvm_x86_ops.func); __KVM_X86_OP(func)
+ #define KVM_X86_OP_OPTIONAL __KVM_X86_OP
++>>>>>>> dd2319c61888 (KVM: x86: warn on incorrectly NULL members of kvm_x86_ops)
  #include <asm/kvm-x86-ops.h>
+ #undef __KVM_X86_OP
  }
  
  #define __KVM_HAVE_ARCH_VM_ALLOC
* Unmerged path arch/x86/include/asm/kvm_host.h
