selftests: vm: Fix 64-bit test builds for powerpc64le

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Sandipan Das <sandipan@linux.ibm.com>
commit 963e3e9c9a127013eb4d3c82eb997068b1adbb89
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/963e3e9c.failed

Some tests are built only for 64-bit systems. This makes
sure that these tests are built for both big and little
endian variants of powerpc64.

Fixes: 7549b3364201 ("selftests: vm: Build/Run 64bit tests only on 64bit arch")
	Reviewed-by: Kamalesh Babulal <kamalesh@linux.vnet.ibm.com>
	Signed-off-by: Sandipan Das <sandipan@linux.ibm.com>
	Tested-by: Michael Ellerman <mpe@ellerman.id.au>
	Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>
(cherry picked from commit 963e3e9c9a127013eb4d3c82eb997068b1adbb89)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/vm/Makefile
#	tools/testing/selftests/vm/run_vmtests
diff --cc tools/testing/selftests/vm/Makefile
index fd931bcaaa4a,6998877f707e..000000000000
--- a/tools/testing/selftests/vm/Makefile
+++ b/tools/testing/selftests/vm/Makefile
@@@ -16,7 -19,8 +16,12 @@@ TEST_GEN_FILES += on-fault-limi
  TEST_GEN_FILES += thuge-gen
  TEST_GEN_FILES += transhuge-stress
  TEST_GEN_FILES += userfaultfd
++<<<<<<< HEAD
 +TEST_GEN_FILES += khugepaged
++=======
+ 
+ ifneq (,$(filter $(MACHINE),arm64 ia64 mips64 parisc64 ppc64 ppc64le riscv64 s390x sh64 sparc64 x86_64))
++>>>>>>> 963e3e9c9a12 (selftests: vm: Fix 64-bit test builds for powerpc64le)
  TEST_GEN_FILES += va_128TBswitch
  TEST_GEN_FILES += virtual_address_range
  TEST_GEN_FILES += write_to_hugetlbfs
diff --cc tools/testing/selftests/vm/run_vmtests
index 5043347397a6,76ca5e7a3951..000000000000
--- a/tools/testing/selftests/vm/run_vmtests
+++ b/tools/testing/selftests/vm/run_vmtests
@@@ -58,6 -58,14 +58,17 @@@ els
  	exit 1
  fi
  
++<<<<<<< HEAD
++=======
+ #filter 64bit architectures
+ ARCH64STR="arm64 ia64 mips64 parisc64 ppc64 ppc64le riscv64 s390x sh64 sparc64 x86_64"
+ if [ -z $ARCH ]; then
+   ARCH=`uname -m 2>/dev/null | sed -e 's/aarch64.*/arm64/'`
+ fi
+ VADDR64=0
+ echo "$ARCH64STR" | grep $ARCH && VADDR64=1
+ 
++>>>>>>> 963e3e9c9a12 (selftests: vm: Fix 64-bit test builds for powerpc64le)
  mkdir $mnt
  mount -t hugetlbfs none $mnt
  
* Unmerged path tools/testing/selftests/vm/Makefile
* Unmerged path tools/testing/selftests/vm/run_vmtests
