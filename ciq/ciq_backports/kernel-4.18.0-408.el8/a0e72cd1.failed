KVM: x86/mmu: Remove unused "kvm" of __rmap_write_protect()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Jinrong Liang <cloudliang@tencent.com>
commit a0e72cd1e9524b458c3fdf44712a40a462f2f07a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/a0e72cd1.failed

The "struct kvm *kvm" parameter of __rmap_write_protect()
is not used, so remove it. No functional change intended.

	Signed-off-by: Jinrong Liang <cloudliang@tencent.com>
Message-Id: <20220125095909.38122-3-cloudliang@tencent.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit a0e72cd1e9524b458c3fdf44712a40a462f2f07a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/mmu/mmu.c
diff --cc arch/x86/kvm/mmu/mmu.c
index 71afb04eecbc,bb9791564ca9..000000000000
--- a/arch/x86/kvm/mmu/mmu.c
+++ b/arch/x86/kvm/mmu/mmu.c
@@@ -1301,10 -1303,14 +1300,16 @@@ static void kvm_mmu_write_protect_pt_ma
  	if (is_tdp_mmu_enabled(kvm))
  		kvm_tdp_mmu_clear_dirty_pt_masked(kvm, slot,
  				slot->base_gfn + gfn_offset, mask, true);
 -
 -	if (!kvm_memslots_have_rmaps(kvm))
 -		return;
 -
  	while (mask) {
++<<<<<<< HEAD
 +		rmap_head = __gfn_to_rmap(slot->base_gfn + gfn_offset + __ffs(mask),
 +					  PG_LEVEL_4K, slot);
 +		__rmap_write_protect(kvm, rmap_head, false);
++=======
+ 		rmap_head = gfn_to_rmap(slot->base_gfn + gfn_offset + __ffs(mask),
+ 					PG_LEVEL_4K, slot);
+ 		__rmap_write_protect(rmap_head, false);
++>>>>>>> a0e72cd1e952 (KVM: x86/mmu: Remove unused "kvm" of __rmap_write_protect())
  
  		/* clear the first set bit */
  		mask &= mask - 1;
@@@ -1396,9 -1406,11 +1401,17 @@@ bool kvm_mmu_slot_gfn_write_protect(str
  	int i;
  	bool write_protected = false;
  
++<<<<<<< HEAD
 +	for (i = min_level; i <= KVM_MAX_HUGEPAGE_LEVEL; ++i) {
 +		rmap_head = __gfn_to_rmap(gfn, i, slot);
 +		write_protected |= __rmap_write_protect(kvm, rmap_head, true);
++=======
+ 	if (kvm_memslots_have_rmaps(kvm)) {
+ 		for (i = min_level; i <= KVM_MAX_HUGEPAGE_LEVEL; ++i) {
+ 			rmap_head = gfn_to_rmap(gfn, i, slot);
+ 			write_protected |= __rmap_write_protect(rmap_head, true);
+ 		}
++>>>>>>> a0e72cd1e952 (KVM: x86/mmu: Remove unused "kvm" of __rmap_write_protect())
  	}
  
  	if (is_tdp_mmu_enabled(kvm))
@@@ -5726,9 -5799,9 +5739,9 @@@ void kvm_zap_gfn_range(struct kvm *kvm
  
  static bool slot_rmap_write_protect(struct kvm *kvm,
  				    struct kvm_rmap_head *rmap_head,
 -				    const struct kvm_memory_slot *slot)
 +				    struct kvm_memory_slot *slot)
  {
- 	return __rmap_write_protect(kvm, rmap_head, false);
+ 	return __rmap_write_protect(rmap_head, false);
  }
  
  void kvm_mmu_slot_remove_write_access(struct kvm *kvm,
* Unmerged path arch/x86/kvm/mmu/mmu.c
