driver core: Split device_platform_notify()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit b2ebd9dd52670a931e8f1bd77d70c57f9aa186a5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/b2ebd9dd.failed

Split device_platform_notify_remove) out of device_platform_notify()
and call the latter on device addition and the former on device
removal.

No intentional functional impact.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit b2ebd9dd52670a931e8f1bd77d70c57f9aa186a5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/core.c
diff --cc drivers/base/core.c
index bb4d7a7dbbec,70ef0ed710b8..000000000000
--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@@ -1986,25 -2000,24 +1986,37 @@@ static inline int device_is_not_partiti
  }
  #endif
  
- static int
- device_platform_notify(struct device *dev, enum kobject_action action)
+ static void device_platform_notify(struct device *dev)
  {
++<<<<<<< HEAD
 +	int ret;
 +
 +	if (action == KOBJ_ADD)
 +		acpi_device_notify(dev);
 +	else if (action == KOBJ_REMOVE)
 +		acpi_device_notify_remove(dev);
 +
 +	ret = software_node_notify(dev, action);
 +	if (ret)
 +		return ret;
++=======
+ 	acpi_device_notify(dev);
  
- 	if (platform_notify && action == KOBJ_ADD)
+ 	software_node_notify(dev);
++>>>>>>> b2ebd9dd5267 (driver core: Split device_platform_notify())
+ 
+ 	if (platform_notify)
  		platform_notify(dev);
- 	else if (platform_notify_remove && action == KOBJ_REMOVE)
+ }
+ 
+ static void device_platform_notify_remove(struct device *dev)
+ {
+ 	acpi_device_notify_remove(dev);
+ 
+ 	software_node_notify_remove(dev);
+ 
+ 	if (platform_notify_remove)
  		platform_notify_remove(dev);
- 	return 0;
  }
  
  /**
* Unmerged path drivers/base/core.c
