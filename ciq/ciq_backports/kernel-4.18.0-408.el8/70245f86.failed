x86/pci: Create PCI/MSI irqdomain after x86_init.pci.arch_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Thomas Gleixner <tglx@linutronix.de>
commit 70245f86c109e0eafb92ea9653184c0e44b4b35c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/70245f86.failed

Invoking x86_init.irqs.create_pci_msi_domain() before
x86_init.pci.arch_init() breaks XEN PV.

The XEN_PV specific pci.arch_init() function overrides the default
create_pci_msi_domain() which is obviously too late.

As a consequence the XEN PV PCI/MSI allocation goes through the native
path which runs out of vectors and causes malfunction.

Invoke it after x86_init.pci.arch_init().

Fixes: 6b15ffa07dc3 ("x86/irq: Initialize PCI/MSI domain at PCI init time")
	Reported-by: Juergen Gross <jgross@suse.com>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Tested-by: Juergen Gross <jgross@suse.com>
	Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/r/87pn18djte.fsf@nanos.tec.linutronix.de
(cherry picked from commit 70245f86c109e0eafb92ea9653184c0e44b4b35c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/pci/init.c
diff --cc arch/x86/pci/init.c
index bf6690935943,0bb3b8b44e4e..000000000000
--- a/arch/x86/pci/init.c
+++ b/arch/x86/pci/init.c
@@@ -8,7 -9,7 +8,11 @@@
     in the right sequence from here. */
  static __init int pci_arch_init(void)
  {
++<<<<<<< HEAD
 +	int type;
++=======
+ 	int type, pcbios = 1;
++>>>>>>> 70245f86c109 (x86/pci: Create PCI/MSI irqdomain after x86_init.pci.arch_init())
  
  	type = pci_direct_probe();
  
* Unmerged path arch/x86/pci/init.c
