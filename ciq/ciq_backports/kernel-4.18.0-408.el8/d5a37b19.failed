block: remove bioset_init_from_src

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Christoph Hellwig <hch@lst.de>
commit d5a37b19983725d2045588cfa3a4699f5b39ae26
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/d5a37b19.failed

Unused now, and the interface never really made a whole lot of sense to
start with.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Mike Snitzer <snitzer@kernel.org>
(cherry picked from commit d5a37b19983725d2045588cfa3a4699f5b39ae26)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/bio.c
diff --cc block/bio.c
index 2bdb2ef7c75d,51c99f2c5c90..000000000000
--- a/block/bio.c
+++ b/block/bio.c
@@@ -2190,52 -1747,6 +2190,55 @@@ bad
  }
  EXPORT_SYMBOL(bioset_init);
  
++<<<<<<< HEAD
 +/*
 + * Initialize and setup a new bio_set, based on the settings from
 + * another bio_set.
 + */
 +int bioset_init_from_src(struct bio_set *bs, struct bio_set *src)
 +{
 +	int flags;
 +
 +	flags = 0;
 +	if (src->bvec_pool.min_nr)
 +		flags |= BIOSET_NEED_BVECS;
 +	if (src->rescue_workqueue)
 +		flags |= BIOSET_NEED_RESCUER;
 +
 +	return bioset_init(bs, src->bio_pool.min_nr, src->front_pad, flags);
 +}
 +EXPORT_SYMBOL(bioset_init_from_src);
 +
 +#ifdef CONFIG_BLK_CGROUP
 +/**
 + * bio_associate_blkg - associate a bio with a blkg
 + * @bio: target bio
 + *
 + * Associate @bio with the blkg found from the bio's css and request_queue.
 + * If one is not found, bio_lookup_blkg() creates the blkg.  If a blkg is
 + * already associated, the css is reused and association redone as the
 + * request_queue may have changed.
 + */
 +void bio_associate_blkg(struct bio *bio)
 +{
 +	struct cgroup_subsys_state *css;
 +
 +	rcu_read_lock();
 +
 +	if (bio->bi_blkg)
 +		css = &bio_blkcg(bio)->css;
 +	else
 +		css = blkcg_css();
 +
 +	bio_associate_blkg_from_css(bio, css);
 +
 +	rcu_read_unlock();
 +}
 +EXPORT_SYMBOL_GPL(bio_associate_blkg);
 +#endif /* CONFIG_BLK_CGROUP */
 +
++=======
++>>>>>>> d5a37b199837 (block: remove bioset_init_from_src)
  static int __init init_bio(void)
  {
  	int i;
* Unmerged path block/bio.c
diff --git a/include/linux/bio.h b/include/linux/bio.h
index a748b91a0767..3769f990dad3 100644
--- a/include/linux/bio.h
+++ b/include/linux/bio.h
@@ -376,7 +376,6 @@ enum {
 extern int bioset_init(struct bio_set *, unsigned int, unsigned int, int flags);
 extern void bioset_exit(struct bio_set *);
 extern int biovec_init_pool(mempool_t *pool, int pool_entries);
-extern int bioset_init_from_src(struct bio_set *bs, struct bio_set *src);
 
 extern struct bio *bio_alloc_bioset(gfp_t, unsigned int, struct bio_set *);
 extern void bio_put(struct bio *);
