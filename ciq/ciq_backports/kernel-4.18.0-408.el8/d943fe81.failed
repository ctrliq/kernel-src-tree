selftests/vm: run_vmtests.sh: update and clean up gup_test invocation

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author John Hubbard <jhubbard@nvidia.com>
commit d943fe81e0bf49dda1369e87d49c5276a02698df
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/d943fe81.failed

Run benchmarks on the _fast variants of gup and pup, as originally
intended.

Run the new gup_test sub-test: dump pages.  In addition to exercising the
dump_page() call, it also demonstrates the various options you can use to
specify which pages to dump, and how.

Link: https://lkml.kernel.org/r/20201026064021.3545418-8-jhubbard@nvidia.com
	Signed-off-by: John Hubbard <jhubbard@nvidia.com>
	Cc: Jérôme Glisse <jglisse@redhat.com>
	Cc: Jonathan Corbet <corbet@lwn.net>
	Cc: Ralph Campbell <rcampbell@nvidia.com>
	Cc: Shuah Khan <shuah@kernel.org>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit d943fe81e0bf49dda1369e87d49c5276a02698df)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/vm/run_vmtests
diff --cc tools/testing/selftests/vm/run_vmtests
index 5043347397a6,4ac84b350d9f..000000000000
--- a/tools/testing/selftests/vm/run_vmtests
+++ b/tools/testing/selftests/vm/run_vmtests
@@@ -104,10 -112,21 +104,28 @@@ echo "NOTE: The above hugetlb tests pro
  echo "      https://github.com/libhugetlbfs/libhugetlbfs.git for"
  echo "      hugetlb regression testing."
  
++<<<<<<< HEAD
 +echo "--------------------------------------------"
 +echo "running 'gup_benchmark -U' (normal/slow gup)"
 +echo "--------------------------------------------"
 +./gup_benchmark -U
++=======
+ echo "---------------------------"
+ echo "running map_fixed_noreplace"
+ echo "---------------------------"
+ ./map_fixed_noreplace
+ if [ $? -ne 0 ]; then
+ 	echo "[FAIL]"
+ 	exitcode=1
+ else
+ 	echo "[PASS]"
+ fi
+ 
+ echo "------------------------------------------------------"
+ echo "running: gup_test -u # get_user_pages_fast() benchmark"
+ echo "------------------------------------------------------"
+ ./gup_test -u
++>>>>>>> d943fe81e0bf (selftests/vm: run_vmtests.sh: update and clean up gup_test invocation)
  if [ $? -ne 0 ]; then
  	echo "[FAIL]"
  	exitcode=1
@@@ -115,10 -134,22 +133,29 @@@ els
  	echo "[PASS]"
  fi
  
++<<<<<<< HEAD
 +echo "------------------------------------------"
 +echo "running gup_benchmark -b (pin_user_pages)"
 +echo "------------------------------------------"
 +./gup_benchmark -b
++=======
+ echo "------------------------------------------------------"
+ echo "running: gup_test -a # pin_user_pages_fast() benchmark"
+ echo "------------------------------------------------------"
+ ./gup_test -a
+ if [ $? -ne 0 ]; then
+ 	echo "[FAIL]"
+ 	exitcode=1
+ else
+ 	echo "[PASS]"
+ fi
+ 
+ echo "------------------------------------------------------------"
+ echo "# Dump pages 0, 19, and 4096, using pin_user_pages:"
+ echo "running: gup_test -ct -F 0x1 0 19 0x1000 # dump_page() test"
+ echo "------------------------------------------------------------"
+ ./gup_test -ct -F 0x1 0 19 0x1000
++>>>>>>> d943fe81e0bf (selftests/vm: run_vmtests.sh: update and clean up gup_test invocation)
  if [ $? -ne 0 ]; then
  	echo "[FAIL]"
  	exitcode=1
* Unmerged path tools/testing/selftests/vm/run_vmtests
