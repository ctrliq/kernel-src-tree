NFSv4 store server support for fs_location attribute

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Olga Kornievskaia <kolga@netapp.com>
commit 8a59bb93b7e3cca389af44781a429ac12ac49be6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/8a59bb93.failed

Define and store if server returns it supports fs_locations attribute
as a capability.

	Signed-off-by: Olga Kornievskaia <kolga@netapp.com>
	Signed-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>
(cherry picked from commit 8a59bb93b7e3cca389af44781a429ac12ac49be6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/nfs_fs_sb.h
diff --cc include/linux/nfs_fs_sb.h
index 00360c34b406,8c08b356c8ca..000000000000
--- a/include/linux/nfs_fs_sb.h
+++ b/include/linux/nfs_fs_sb.h
@@@ -283,6 -286,8 +283,11 @@@ struct nfs_server 
  #define NFS_CAP_COPY		(1U << 24)
  #define NFS_CAP_OFFLOAD_CANCEL	(1U << 25)
  #define NFS_CAP_LAYOUTERROR	(1U << 26)
 -#define NFS_CAP_COPY_NOTIFY	(1U << 27)
  #define NFS_CAP_XATTR		(1U << 28)
++<<<<<<< HEAD
 +
++=======
+ #define NFS_CAP_READ_PLUS	(1U << 29)
+ #define NFS_CAP_FS_LOCATIONS	(1U << 30)
++>>>>>>> 8a59bb93b7e3 (NFSv4 store server support for fs_location attribute)
  #endif
diff --git a/fs/nfs/nfs4proc.c b/fs/nfs/nfs4proc.c
index 64f7f57769df..be429cf93612 100644
--- a/fs/nfs/nfs4proc.c
+++ b/fs/nfs/nfs4proc.c
@@ -3862,6 +3862,8 @@ static int _nfs4_server_capabilities(struct nfs_server *server, struct nfs_fh *f
 		if (res.attr_bitmask[2] & FATTR4_WORD2_SECURITY_LABEL)
 			server->caps |= NFS_CAP_SECURITY_LABEL;
 #endif
+		if (res.attr_bitmask[0] & FATTR4_WORD0_FS_LOCATIONS)
+			server->caps |= NFS_CAP_FS_LOCATIONS;
 		if (!(res.attr_bitmask[0] & FATTR4_WORD0_FILEID))
 			server->fattr_valid &= ~NFS_ATTR_FATTR_FILEID;
 		if (!(res.attr_bitmask[1] & FATTR4_WORD1_MODE))
* Unmerged path include/linux/nfs_fs_sb.h
