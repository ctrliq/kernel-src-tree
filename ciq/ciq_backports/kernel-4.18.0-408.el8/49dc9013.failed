net/smc: Use the bitmap API when applicable

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Christophe JAILLET <christophe.jaillet@wanadoo.fr>
commit 49dc9013e34b205bae9d7a5f365a3da33c508c9d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/49dc9013.failed

Using the bitmap API is less verbose than hand writing them.
It also improves the semantic.

	Signed-off-by: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 49dc9013e34b205bae9d7a5f365a3da33c508c9d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/smc/smc_wr.c
diff --cc net/smc/smc_wr.c
index 6dff77883154,1b09012d637a..000000000000
--- a/net/smc/smc_wr.c
+++ b/net/smc/smc_wr.c
@@@ -643,7 -669,8 +639,12 @@@ void smc_wr_free_link(struct smc_link *
  	smc_wr_wakeup_reg_wait(lnk);
  	smc_wr_wakeup_tx_wait(lnk);
  
++<<<<<<< HEAD
 +	smc_wr_tx_wait_no_pending_sends(lnk);
++=======
+ 	if (smc_wr_tx_wait_no_pending_sends(lnk))
+ 		bitmap_zero(lnk->wr_tx_mask, SMC_WR_BUF_CNT);
++>>>>>>> 49dc9013e34b (net/smc: Use the bitmap API when applicable)
  	wait_event(lnk->wr_reg_wait, (!atomic_read(&lnk->wr_reg_refcnt)));
  	wait_event(lnk->wr_tx_wait, (!atomic_read(&lnk->wr_tx_refcnt)));
  
* Unmerged path net/smc/smc_wr.c
