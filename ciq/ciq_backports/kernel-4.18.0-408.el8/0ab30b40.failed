dm: eliminate copying of dm_io fields in dm_io_dec_pending

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-408.el8
commit-author Mike Snitzer <snitzer@redhat.com>
commit 0ab30b4079e103b517bdfc4331507bf8d8dd8f7b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-408.el8/0ab30b40.failed

There is no need for dm_io_dec_pending() to copy dm_io fields
anymore now that DM provides its own pending_io counters again.

The race documented in commit d208b89401e0 ("dm: fix mempool NULL
pointer race when completing IO") no longer exists now that block
core's in_flight counters aren't used to signal all dm_io is
complete.

Also, rename {start,end}_io_acct to dm_{start,end}_io_acct.

	Signed-off-by: Mike Snitzer <snitzer@redhat.com>
(cherry picked from commit 0ab30b4079e103b517bdfc4331507bf8d8dd8f7b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/dm.c
diff --cc drivers/md/dm.c
index 495368816d3f,33376e679ef5..000000000000
--- a/drivers/md/dm.c
+++ b/drivers/md/dm.c
@@@ -903,11 -838,8 +900,14 @@@ void dm_io_dec_pending(struct dm_io *io
  		}
  
  		io_error = io->status;
++<<<<<<< HEAD
 +		bio = io->orig_bio;
 +		start_time = io->start_time;
 +		stats_aux = io->stats_aux;
++=======
+ 		dm_end_io_acct(io);
++>>>>>>> 0ab30b4079e1 (dm: eliminate copying of dm_io fields in dm_io_dec_pending)
  		free_io(md, io);
- 		end_io_acct(md, bio, start_time, &stats_aux);
  		smp_wmb();
  		this_cpu_dec(*md->pending_io);
  
@@@ -1643,11 -1447,11 +1643,11 @@@ static blk_qc_t __split_and_process_bio
  			ci.io->orig_bio = b;
  
  			bio_chain(b, bio);
 -			trace_block_split(b, bio->bi_iter.bi_sector);
 -			submit_bio_noacct(bio);
 +			trace_block_split(md->queue, b, bio->bi_iter.bi_sector);
 +			ret = generic_make_request(bio);
  		}
  	}
- 	start_io_acct(ci.io);
+ 	dm_start_io_acct(ci.io);
  
  	/* drop the extra reference count */
  	dm_io_dec_pending(ci.io, errno_to_blk_status(error));
* Unmerged path drivers/md/dm.c
