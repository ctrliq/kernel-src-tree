ceph: do not print the whole xattr value if it's too long

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-534.el8
commit-author Xiubo Li <xiubli@redhat.com>
commit 7a6c3a035a2e133b41d01c1a479b50aac4aeecad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-534.el8/7a6c3a03.failed

If the xattr's value size is long enough the kernel will warn and
then will fail the xfstests test case.

Just print part of the value string if it's too long.

At the same time fix the function name issue in the debug logs.

Link: https://tracker.ceph.com/issues/58404
	Signed-off-by: Xiubo Li <xiubli@redhat.com>
	Reviewed-by: Ilya Dryomov <idryomov@gmail.com>
	Signed-off-by: Ilya Dryomov <idryomov@gmail.com>
(cherry picked from commit 7a6c3a035a2e133b41d01c1a479b50aac4aeecad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ceph/xattr.c
diff --cc fs/ceph/xattr.c
index 259fe86df87a,8b6b3075f4d1..000000000000
--- a/fs/ceph/xattr.c
+++ b/fs/ceph/xattr.c
@@@ -625,11 -627,13 +627,18 @@@ static int __set_xattr(struct ceph_inod
  	if (new) {
  		rb_link_node(&xattr->node, parent, p);
  		rb_insert_color(&xattr->node, &ci->i_xattrs.index);
- 		dout("__set_xattr_val p=%p\n", p);
+ 		dout("%s p=%p\n", __func__, p);
  	}
  
++<<<<<<< HEAD
 +	dout("__set_xattr_val added %llx.%llx xattr %p %.*s=%.*s\n",
 +	     ceph_vinop(&ci->vfs_inode), xattr, name_len, name, val_len, val);
++=======
+ 	dout("%s added %llx.%llx xattr %p %.*s=%.*s%s\n", __func__,
+ 	     ceph_vinop(&ci->netfs.inode), xattr, name_len, name,
+ 	     min(val_len, MAX_XATTR_VAL_PRINT_LEN), val,
+ 	     val_len > MAX_XATTR_VAL_PRINT_LEN ? "..." : "");
++>>>>>>> 7a6c3a035a2e (ceph: do not print the whole xattr value if it's too long)
  
  	return 0;
  }
* Unmerged path fs/ceph/xattr.c
