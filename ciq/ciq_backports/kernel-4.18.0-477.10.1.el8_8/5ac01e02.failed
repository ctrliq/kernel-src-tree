regmap: Re-introduce bulk read support check in regmap_bulk_read()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-477.10.1.el8_8
commit-author Javier Martinez Canillas <javierm@redhat.com>
commit 5ac01e023a1b0492e159ad2f6734e0a350c1b6b6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-477.10.1.el8_8/5ac01e02.failed

Support for drivers to define bulk read/write callbacks in regmap_config
was introduced by the commit d77e74561368 ("regmap: Add bulk read/write
callbacks into regmap_config"), but this commit wrongly dropped a check
in regmap_bulk_read() to determine whether bulk reads can be done or not.

Before that commit, it was checked if map->bus was set. Now has to check
if a map->read callback has been set.

Fixes: d77e74561368 ("regmap: Add bulk read/write callbacks into regmap_config")
	Signed-off-by: Javier Martinez Canillas <javierm@redhat.com>
Link: https://lore.kernel.org/r/20220616073435.1988219-2-javierm@redhat.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 5ac01e023a1b0492e159ad2f6734e0a350c1b6b6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/regmap/regmap.c
diff --cc drivers/base/regmap/regmap.c
index a5fdb7dad64b,e5bb70374ffc..000000000000
--- a/drivers/base/regmap/regmap.c
+++ b/drivers/base/regmap/regmap.c
@@@ -2706,7 -3017,7 +2706,11 @@@ int regmap_bulk_read(struct regmap *map
  	if (val_count == 0)
  		return -EINVAL;
  
++<<<<<<< HEAD
 +	if (map->bus && map->format.parse_inplace && (vol || map->cache_type == REGCACHE_NONE)) {
++=======
+ 	if (map->read && map->format.parse_inplace && (vol || map->cache_type == REGCACHE_NONE)) {
++>>>>>>> 5ac01e023a1b (regmap: Re-introduce bulk read support check in regmap_bulk_read())
  		ret = regmap_raw_read(map, reg, val, val_bytes * val_count);
  		if (ret != 0)
  			return ret;
* Unmerged path drivers/base/regmap/regmap.c
