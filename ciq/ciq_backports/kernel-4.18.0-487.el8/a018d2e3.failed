x86/cpufeatures: Add Architectural PerfMon Extension bit

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-487.el8
commit-author Kan Liang <kan.liang@linux.intel.com>
commit a018d2e3d4b1abc4a3cb64415c5d204fc5d2eafd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-487.el8/a018d2e3.failed

CPUID.(EAX=07H, ECX=1):EAX[8] indicates whether the Architectural
PerfMon Extension leaf (CPUID leaf 23) is supported.

The "X86_FEATURE_..., word 12" is already mirrored from CPUID
"0x00000007:1 (EAX)". Add X86_FEATURE_ARCH_PERFMON_EXT under the
"word 12" section.

The new Architectural PerfMon Extension leaf (CPUID leaf 23) will be
supported in the perf_events subsystem later.

The feature will not appear in /proc/cpuinfo.

	Signed-off-by: Kan Liang <kan.liang@linux.intel.com>
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
	Acked-by: Peter Zijlstra <peterz@infradead.org>
Link: https://lore.kernel.org/r/20230104201349.1451191-4-kan.liang@linux.intel.com
(cherry picked from commit a018d2e3d4b1abc4a3cb64415c5d204fc5d2eafd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/cpufeatures.h
diff --cc arch/x86/include/asm/cpufeatures.h
index e4c7c22cab69,b64555b68a14..000000000000
--- a/arch/x86/include/asm/cpufeatures.h
+++ b/arch/x86/include/asm/cpufeatures.h
@@@ -307,9 -311,10 +307,16 @@@
  /* Intel-defined CPU features, CPUID level 0x00000007:1 (EAX), word 12 */
  #define X86_FEATURE_AVX_VNNI		(12*32+ 4) /* AVX VNNI instructions */
  #define X86_FEATURE_AVX512_BF16		(12*32+ 5) /* AVX512 BFLOAT16 instructions */
++<<<<<<< HEAD
 +#define X86_FEATURE_AMX_BF16		(18*32+22) /* AMX bf16 Support */
 +#define X86_FEATURE_AMX_TILE		(18*32+24) /* AMX tile Support */
 +#define X86_FEATURE_AMX_INT8		(18*32+25) /* AMX int8 Support */
++=======
+ #define X86_FEATURE_CMPCCXADD           (12*32+ 7) /* "" CMPccXADD instructions */
+ #define X86_FEATURE_ARCH_PERFMON_EXT	(12*32+ 8) /* "" Intel Architectural PerfMon Extension */
+ #define X86_FEATURE_AMX_FP16		(12*32+21) /* "" AMX fp16 Support */
+ #define X86_FEATURE_AVX_IFMA            (12*32+23) /* "" Support for VPMADD52[H,L]UQ */
++>>>>>>> a018d2e3d4b1 (x86/cpufeatures: Add Architectural PerfMon Extension bit)
  
  /* AMD-defined CPU features, CPUID level 0x80000008 (EBX), word 13 */
  #define X86_FEATURE_CLZERO		(13*32+ 0) /* CLZERO instruction */
* Unmerged path arch/x86/include/asm/cpufeatures.h
