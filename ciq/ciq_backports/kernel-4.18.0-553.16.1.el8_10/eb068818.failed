cifs: fix string declarations and assignments in tracepoints

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-553.16.1.el8_10
commit-author Shyam Prasad N <sprasad@microsoft.com>
commit eb0688180549e3b72464e9f78df58cb7a5592c7f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-553.16.1.el8_10/eb068818.failed

We missed using the variable length string macros in several
tracepoints. Fixed them in this change.

There's probably more useful macros that we can use to print
others like flags etc. But I'll submit sepawrate patches for
those at a future date.

	Signed-off-by: Shyam Prasad N <sprasad@microsoft.com>
	Cc: <stable@vger.kernel.org> # v5.12
	Signed-off-by: Steve French <stfrench@microsoft.com>
(cherry picked from commit eb0688180549e3b72464e9f78df58cb7a5592c7f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/cifs/trace.h
diff --cc fs/cifs/trace.h
index c3d1a584f251,dafcb6ab050d..000000000000
--- a/fs/cifs/trace.h
+++ b/fs/cifs/trace.h
@@@ -851,18 -856,22 +856,32 @@@ DEFINE_SMB3_LEASE_ERR_EVENT(lease_err)
  
  DECLARE_EVENT_CLASS(smb3_reconnect_class,
  	TP_PROTO(__u64	currmid,
 -		__u64 conn_id,
  		char *hostname),
 -	TP_ARGS(currmid, conn_id, hostname),
 +	TP_ARGS(currmid, hostname),
  	TP_STRUCT__entry(
  		__field(__u64, currmid)
++<<<<<<< HEAD
 +		__field(char *, hostname)
 +	),
 +	TP_fast_assign(
 +		__entry->currmid = currmid;
 +		__entry->hostname = hostname;
 +	),
 +	TP_printk("server=%s current_mid=0x%llx",
 +		__entry->hostname,
++=======
+ 		__field(__u64, conn_id)
+ 		__string(hostname, hostname)
+ 	),
+ 	TP_fast_assign(
+ 		__entry->currmid = currmid;
+ 		__entry->conn_id = conn_id;
+ 		__assign_str(hostname, hostname);
+ 	),
+ 	TP_printk("conn_id=0x%llx server=%s current_mid=%llu",
+ 		__entry->conn_id,
+ 		__get_str(hostname),
++>>>>>>> eb0688180549 (cifs: fix string declarations and assignments in tracepoints)
  		__entry->currmid)
  )
  
@@@ -877,27 -887,36 +896,44 @@@ DEFINE_SMB3_RECONNECT_EVENT(partial_sen
  
  DECLARE_EVENT_CLASS(smb3_credit_class,
  	TP_PROTO(__u64	currmid,
 -		__u64 conn_id,
  		char *hostname,
  		int credits,
 -		int credits_to_add,
 -		int in_flight),
 -	TP_ARGS(currmid, conn_id, hostname, credits, credits_to_add, in_flight),
 +		int credits_to_add),
 +	TP_ARGS(currmid, hostname, credits, credits_to_add),
  	TP_STRUCT__entry(
  		__field(__u64, currmid)
++<<<<<<< HEAD
 +		__field(char *, hostname)
++=======
+ 		__field(__u64, conn_id)
+ 		__string(hostname, hostname)
++>>>>>>> eb0688180549 (cifs: fix string declarations and assignments in tracepoints)
  		__field(int, credits)
  		__field(int, credits_to_add)
 -		__field(int, in_flight)
  	),
  	TP_fast_assign(
  		__entry->currmid = currmid;
++<<<<<<< HEAD
 +		__entry->hostname = hostname;
++=======
+ 		__entry->conn_id = conn_id;
+ 		__assign_str(hostname, hostname);
++>>>>>>> eb0688180549 (cifs: fix string declarations and assignments in tracepoints)
  		__entry->credits = credits;
  		__entry->credits_to_add = credits_to_add;
 -		__entry->in_flight = in_flight;
  	),
++<<<<<<< HEAD
 +	TP_printk("server=%s current_mid=0x%llx credits=%d credits_to_add=%d",
 +		__entry->hostname,
++=======
+ 	TP_printk("conn_id=0x%llx server=%s current_mid=%llu "
+ 			"credits=%d credit_change=%d in_flight=%d",
+ 		__entry->conn_id,
+ 		__get_str(hostname),
++>>>>>>> eb0688180549 (cifs: fix string declarations and assignments in tracepoints)
  		__entry->currmid,
  		__entry->credits,
 -		__entry->credits_to_add,
 -		__entry->in_flight)
 +		__entry->credits_to_add)
  )
  
  #define DEFINE_SMB3_CREDIT_EVENT(name)        \
* Unmerged path fs/cifs/trace.h
