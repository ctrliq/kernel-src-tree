s390/mm: add missing arch_set_page_dat() call to vmem_crst_alloc()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-537.el8
commit-author Heiko Carstens <hca@linux.ibm.com>
commit 09cda0a400519b1541591c506e54c9c48e3101bf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-537.el8/09cda0a4.failed

If the cmma no-dat feature is available all pages that are not used for
dynamic address translation are marked as "no-dat" with the ESSA
instruction. This information is visible to the hypervisor, so that the
hypervisor can optimize purging of guest TLB entries. This also means that
pages which are used for dynamic address translation must not be marked as
"no-dat", since the hypervisor may then incorrectly not purge guest TLB
entries.

Region and segment tables allocated via vmem_crst_alloc() are incorrectly
marked as "no-dat", as soon as slab_is_available() returns true.

Such tables are allocated e.g. when kernel page tables are split, memory is
hotplugged, or a DCSS segment is loaded.

Fix this by adding the missing arch_set_page_dat() call.

	Cc: <stable@vger.kernel.org>
	Reviewed-by: Claudio Imbrenda <imbrenda@linux.ibm.com>
	Signed-off-by: Heiko Carstens <hca@linux.ibm.com>
	Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
(cherry picked from commit 09cda0a400519b1541591c506e54c9c48e3101bf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/mm/vmem.c
diff --cc arch/s390/mm/vmem.c
index 6765b1f22df9,2e8a1064f103..000000000000
--- a/arch/s390/mm/vmem.c
+++ b/arch/s390/mm/vmem.c
@@@ -12,9 -11,12 +12,14 @@@
  #include <linux/list.h>
  #include <linux/hugetlb.h>
  #include <linux/slab.h>
++<<<<<<< HEAD
++=======
+ #include <linux/sort.h>
+ #include <asm/page-states.h>
++>>>>>>> 09cda0a40051 (s390/mm: add missing arch_set_page_dat() call to vmem_crst_alloc())
  #include <asm/cacheflush.h>
 -#include <asm/nospec-branch.h>
 -#include <asm/ctlreg.h>
  #include <asm/pgalloc.h>
 +#include <asm/pgtable.h>
  #include <asm/setup.h>
  #include <asm/tlbflush.h>
  #include <asm/sections.h>
* Unmerged path arch/s390/mm/vmem.c
