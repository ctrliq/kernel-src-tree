net/mlx5e: Fix SQ SW state layout in SQ devlink health diagnostics

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-537.el8
commit-author Adham Faris <afaris@nvidia.com>
commit b0d87ed27be7853af8f897c3cfcb9ddc5179a2a3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-537.el8/b0d87ed2.failed

Remove nesting level before SQ's SW state title and before SQ's SW
state capabilities line.

Preceding the SQ's SW state with a nameless nesting, wraps the inner SW
state map/dictionary with a nameless dictionary which is prohibited in
JSON file format.

Removing preceding SW state nest by removing function call
devlink_fmsg_obj_nest_start() and devlink_fmsg_obj_nest_end().

	Signed-off-by: Adham Faris <afaris@nvidia.com>
	Reviewed-by: Tariq Toukan <tariqt@nvidia.com>
	Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
(cherry picked from commit b0d87ed27be7853af8f897c3cfcb9ddc5179a2a3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
index a3826c6a29a2,b35ff289af49..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
@@@ -36,6 -50,27 +36,30 @@@ static void mlx5e_reset_txqsq_cc_pc(str
  	sq->pc = 0;
  }
  
++<<<<<<< HEAD
++=======
+ static int mlx5e_health_sq_put_sw_state(struct devlink_fmsg *fmsg, struct mlx5e_txqsq *sq)
+ {
+ 	int err;
+ 	int i;
+ 
+ 	BUILD_BUG_ON_MSG(ARRAY_SIZE(sq_sw_state_type_name) != MLX5E_NUM_SQ_STATES,
+ 			 "sq_sw_state_type_name string array must be consistent with MLX5E_SQ_STATE_* enum in en.h");
+ 	err = mlx5e_health_fmsg_named_obj_nest_start(fmsg, "SW State");
+ 	if (err)
+ 		return err;
+ 
+ 	for (i = 0; i < ARRAY_SIZE(sq_sw_state_type_name); ++i) {
+ 		err = devlink_fmsg_u32_pair_put(fmsg, sq_sw_state_type_name[i],
+ 						test_bit(i, &sq->state));
+ 		if (err)
+ 			return err;
+ 	}
+ 
+ 	return mlx5e_health_fmsg_named_obj_nest_end(fmsg);
+ }
+ 
++>>>>>>> b0d87ed27be7 (net/mlx5e: Fix SQ SW state layout in SQ devlink health diagnostics)
  static int mlx5e_tx_reporter_err_cqe_recover(void *ctx)
  {
  	struct mlx5_core_dev *mdev;
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
