ASoC: rt5682: Use clk_hw based APIs for registration

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-372.9.1.el8
commit-author Stephen Boyd <swboyd@chromium.org>
commit 653bdab267bd8dbce9cbd16bec843ca9d20a8450
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-372.9.1.el8/653bdab2.failed

The (new?) style of clk registration uses clk_hw based APIs so that we
can more easily see the difference between clk providers and clk
consumers. Use the clk_hw based APIs to do this and migrate to devm for
the clkdev creation so that we can reduce the amount of code.

	Signed-off-by: Stephen Boyd <swboyd@chromium.org>
	Cc: Cheng-Yi Chiang <cychiang@chromium.org>
	Cc: Shuming Fan <shumingf@realtek.com>
Link: https://lore.kernel.org/r/20200804000531.920688-4-swboyd@chromium.org
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 653bdab267bd8dbce9cbd16bec843ca9d20a8450)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/codecs/rt5682.c
diff --cc sound/soc/codecs/rt5682.c
index 453facb1879d,bfb26fec7137..000000000000
--- a/sound/soc/codecs/rt5682.c
+++ b/sound/soc/codecs/rt5682.c
@@@ -2795,11 -2755,7 +2795,14 @@@ static int rt5682_register_dai_clks(str
  	struct device *dev = component->dev;
  	struct rt5682_priv *rt5682 = snd_soc_component_get_drvdata(component);
  	struct rt5682_platform_data *pdata = &rt5682->pdata;
++<<<<<<< HEAD
 +	struct clk_init_data init;
 +	struct clk *dai_clk;
 +	struct clk_lookup *dai_clk_lookup;
++=======
++>>>>>>> 653bdab267bd (ASoC: rt5682: Use clk_hw based APIs for registration)
  	struct clk_hw *dai_clk_hw;
 +	const char *parent_name;
  	int i, ret;
  
  	for (i = 0; i < RT5682_DAI_NUM_CLKS; ++i) {
* Unmerged path sound/soc/codecs/rt5682.c
diff --git a/sound/soc/codecs/rt5682.h b/sound/soc/codecs/rt5682.h
index c4aea9fcf7ce..b59221048ebf 100644
--- a/sound/soc/codecs/rt5682.h
+++ b/sound/soc/codecs/rt5682.h
@@ -1427,8 +1427,6 @@ struct rt5682_priv {
 
 #ifdef CONFIG_COMMON_CLK
 	struct clk_hw dai_clks_hw[RT5682_DAI_NUM_CLKS];
-	struct clk_lookup *dai_clks_lookup[RT5682_DAI_NUM_CLKS];
-	struct clk *dai_clks[RT5682_DAI_NUM_CLKS];
 	struct clk *mclk;
 #endif
 
