x86,bugs: Unconditionally allow spectre_v2=retpoline,amd

jira LE-1907
cve CVE-2022-0002
cve CVE-2022-0001
Rebuild_History Non-Buildable kernel-4.18.0-372.9.1.el8
commit-author Peter Zijlstra <peterz@infradead.org>
commit f8a66d608a3e471e1202778c2a36cbdc96bae73b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-372.9.1.el8/f8a66d60.failed

Currently Linux prevents usage of retpoline,amd on !AMD hardware, this
is unfriendly and gets in the way of testing. Remove this restriction.

	Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
	Reviewed-by: Borislav Petkov <bp@suse.de>
	Acked-by: Josh Poimboeuf <jpoimboe@redhat.com>
	Tested-by: Alexei Starovoitov <ast@kernel.org>
Link: https://lore.kernel.org/r/20211026120310.487348118@infradead.org
(cherry picked from commit f8a66d608a3e471e1202778c2a36cbdc96bae73b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/cpu/bugs.c
diff --cc arch/x86/kernel/cpu/bugs.c
index 7357f251348a,ba43597f1027..000000000000
--- a/arch/x86/kernel/cpu/bugs.c
+++ b/arch/x86/kernel/cpu/bugs.c
@@@ -859,12 -882,6 +859,15 @@@ static enum spectre_v2_mitigation_cmd _
  		return SPECTRE_V2_CMD_AUTO;
  	}
  
++<<<<<<< HEAD
 +	if (cmd == SPECTRE_V2_CMD_RETPOLINE_AMD &&
 +	    boot_cpu_data.x86_vendor != X86_VENDOR_AMD) {
 +		pr_err("retpoline,amd selected but CPU is not AMD. Switching to AUTO select\n");
 +		return SPECTRE_V2_CMD_AUTO;
 +	}
 +
++=======
++>>>>>>> f8a66d608a3e (x86,bugs: Unconditionally allow spectre_v2=retpoline,amd)
  	spec_v2_print_cond(mitigation_options[i].option,
  			   mitigation_options[i].secure);
  	return cmd;
* Unmerged path arch/x86/kernel/cpu/bugs.c
