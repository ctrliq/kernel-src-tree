usb: typec: ucsi: acpi: fix a NULL vs IS_ERR() check in probe

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-526.el8
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit a9face899413f468460219c79503c091c4d362cb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-526.el8/a9face89.failed

The devm_memremap() function never returns NULL.  It returns error
pointers.

Fixes: cdc3d2abf438 ("usb: typec: ucsi: acpi: Map the mailbox with memremap()")
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Reviewed-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>
	Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit a9face899413f468460219c79503c091c4d362cb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/typec/ucsi/ucsi_acpi.c
diff --cc drivers/usb/typec/ucsi/ucsi_acpi.c
index f07610cb48aa,8873c1644a29..000000000000
--- a/drivers/usb/typec/ucsi/ucsi_acpi.c
+++ b/drivers/usb/typec/ucsi/ucsi_acpi.c
@@@ -132,20 -132,9 +132,26 @@@ static int ucsi_acpi_probe(struct platf
  		return -ENODEV;
  	}
  
++<<<<<<< HEAD
 +	/* This will make sure we can use ioremap_nocache() */
 +	status = acpi_release_memory(ACPI_HANDLE(&pdev->dev), res, 1);
 +	if (ACPI_FAILURE(status))
 +		return -ENOMEM;
 +
 +	/*
 +	 * NOTE: The memory region for the data structures is used also in an
 +	 * operation region, which means ACPI has already reserved it. Therefore
 +	 * it can not be requested here, and we can not use
 +	 * devm_ioremap_resource().
 +	 */
 +	ua->base = devm_ioremap(&pdev->dev, res->start, resource_size(res));
 +	if (!ua->base)
 +		return -ENOMEM;
++=======
+ 	ua->base = devm_memremap(&pdev->dev, res->start, resource_size(res), MEMREMAP_WB);
+ 	if (IS_ERR(ua->base))
+ 		return PTR_ERR(ua->base);
++>>>>>>> a9face899413 (usb: typec: ucsi: acpi: fix a NULL vs IS_ERR() check in probe)
  
  	ret = guid_parse(UCSI_DSM_UUID, &ua->guid);
  	if (ret)
* Unmerged path drivers/usb/typec/ucsi/ucsi_acpi.c
