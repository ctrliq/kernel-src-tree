arm64: cpu_errata: Apply Erratum 845719 to KRYO2XX Silver

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Konrad Dybcio <konrad.dybcio@somainline.org>
commit 23c216416056148136bdaf0cdd18caf4904bb6e1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/23c21641.failed

QCOM KRYO2XX Silver cores are Cortex-A53 based and are
susceptible to the 845719 erratum. Add them to the lookup
list to apply the erratum.

	Signed-off-by: Konrad Dybcio <konrad.dybcio@somainline.org>
Link: https://lore.kernel.org/r/20201104232218.198800-5-konrad.dybcio@somainline.org
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit 23c216416056148136bdaf0cdd18caf4904bb6e1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm64/kernel/cpu_errata.c
diff --cc arch/arm64/kernel/cpu_errata.c
index 550bbacfeb31,cafaf0da05b7..000000000000
--- a/arch/arm64/kernel/cpu_errata.c
+++ b/arch/arm64/kernel/cpu_errata.c
@@@ -754,6 -287,37 +754,40 @@@ static const struct midr_range erratum_
  	MIDR_RANGE(MIDR_CORTEX_A76, 0, 0, 3, 1),
  	/* Neoverse-N1 r0p0 to r3p1 */
  	MIDR_RANGE(MIDR_NEOVERSE_N1, 0, 0, 3, 1),
++<<<<<<< HEAD
++=======
+ 	/* Kryo4xx Gold (rcpe to rfpf) => (r0p0 to r3p1) */
+ 	MIDR_RANGE(MIDR_QCOM_KRYO_4XX_GOLD, 0xc, 0xe, 0xf, 0xf),
+ 	{},
+ };
+ #endif
+ 
+ #ifdef CONFIG_ARM64_ERRATUM_845719
+ static const struct midr_range erratum_845719_list[] = {
+ 	/* Cortex-A53 r0p[01234] */
+ 	MIDR_REV_RANGE(MIDR_CORTEX_A53, 0, 0, 4),
+ 	/* Brahma-B53 r0p[0] */
+ 	MIDR_REV(MIDR_BRAHMA_B53, 0, 0),
+ 	/* Kryo2XX Silver rAp4 */
+ 	MIDR_REV(MIDR_QCOM_KRYO_2XX_SILVER, 0xa, 0x4),
+ 	{},
+ };
+ #endif
+ 
+ #ifdef CONFIG_ARM64_ERRATUM_843419
+ static const struct arm64_cpu_capabilities erratum_843419_list[] = {
+ 	{
+ 		/* Cortex-A53 r0p[01234] */
+ 		.matches = is_affected_midr_range,
+ 		ERRATA_MIDR_REV_RANGE(MIDR_CORTEX_A53, 0, 0, 4),
+ 		MIDR_FIXED(0x4, BIT(8)),
+ 	},
+ 	{
+ 		/* Brahma-B53 r0p[0] */
+ 		.matches = is_affected_midr_range,
+ 		ERRATA_MIDR_REV(MIDR_BRAHMA_B53, 0, 0),
+ 	},
++>>>>>>> 23c216416056 (arm64: cpu_errata: Apply Erratum 845719 to KRYO2XX Silver)
  	{},
  };
  #endif
* Unmerged path arch/arm64/kernel/cpu_errata.c
