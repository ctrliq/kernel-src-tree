xfs: simplify xfs_attr_remove_args

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 605e74e29218bb22edd5ddcf90a4d37df00446cc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/605e74e2.failed

Directly return from the subfunctions and avoid the error variable.  Also
remove the not really needed dp local variable.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Brian Foster <bfoster@redhat.com>
	Reviewed-by: Darrick J. Wong <djwong@kernel.org>
	Signed-off-by: Darrick J. Wong <djwong@kernel.org>
(cherry picked from commit 605e74e29218bb22edd5ddcf90a4d37df00446cc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/libxfs/xfs_attr.c
diff --cc fs/xfs/libxfs/xfs_attr.c
index be7124728a01,43ef85678cba..000000000000
--- a/fs/xfs/libxfs/xfs_attr.c
+++ b/fs/xfs/libxfs/xfs_attr.c
@@@ -366,21 -386,16 +366,28 @@@ in
  xfs_attr_remove_args(
  	struct xfs_da_args      *args)
  {
- 	struct xfs_inode	*dp = args->dp;
- 	int			error;
+ 	if (!xfs_inode_hasattr(args->dp))
+ 		return -ENOATTR;
  
++<<<<<<< HEAD
 +	if (!xfs_inode_hasattr(dp)) {
 +		error = -ENOATTR;
 +	} else if (dp->i_afp->if_format == XFS_DINODE_FMT_LOCAL) {
 +		ASSERT(dp->i_afp->if_flags & XFS_IFINLINE);
 +		error = xfs_attr_shortform_remove(args);
 +	} else if (xfs_bmap_one_block(dp, XFS_ATTR_FORK)) {
 +		error = xfs_attr_leaf_removename(args);
 +	} else {
 +		error = xfs_attr_node_removename(args);
++=======
+ 	if (args->dp->i_afp->if_format == XFS_DINODE_FMT_LOCAL) {
+ 		ASSERT(args->dp->i_afp->if_flags & XFS_IFINLINE);
+ 		return xfs_attr_shortform_remove(args);
++>>>>>>> 605e74e29218 (xfs: simplify xfs_attr_remove_args)
  	}
- 
- 	return error;
+ 	if (xfs_attr_is_leaf(args->dp))
+ 		return xfs_attr_leaf_removename(args);
+ 	return xfs_attr_node_removename(args);
  }
  
  /*
* Unmerged path fs/xfs/libxfs/xfs_attr.c
