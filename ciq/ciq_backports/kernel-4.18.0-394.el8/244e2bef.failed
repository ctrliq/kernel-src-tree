NFSD: Replace READ* macros in nfsd4_decode_write()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Chuck Lever <chuck.lever@oracle.com>
commit 244e2befcba80f42c65293b6c56282bb78f9f417
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/244e2bef.failed

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
(cherry picked from commit 244e2befcba80f42c65293b6c56282bb78f9f417)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfsd/nfs4xdr.c
diff --cc fs/nfsd/nfs4xdr.c
index 9704ae2f6006,8e960cdc351d..000000000000
--- a/fs/nfsd/nfs4xdr.c
+++ b/fs/nfsd/nfs4xdr.c
@@@ -1349,24 -1396,23 +1349,33 @@@ nfsd4_decode_verify(struct nfsd4_compou
  static __be32
  nfsd4_decode_write(struct nfsd4_compoundargs *argp, struct nfsd4_write *write)
  {
- 	DECODE_HEAD;
+ 	__be32 status;
  
- 	status = nfsd4_decode_stateid(argp, &write->wr_stateid);
+ 	status = nfsd4_decode_stateid4(argp, &write->wr_stateid);
  	if (status)
  		return status;
- 	READ_BUF(16);
- 	p = xdr_decode_hyper(p, &write->wr_offset);
- 	write->wr_stable_how = be32_to_cpup(p++);
+ 	if (xdr_stream_decode_u64(argp->xdr, &write->wr_offset) < 0)
+ 		return nfserr_bad_xdr;
+ 	if (xdr_stream_decode_u32(argp->xdr, &write->wr_stable_how) < 0)
+ 		return nfserr_bad_xdr;
  	if (write->wr_stable_how > NFS_FILE_SYNC)
++<<<<<<< HEAD
 +		goto xdr_error;
 +	write->wr_buflen = be32_to_cpup(p++);
 +
 +	status = svcxdr_construct_vector(argp, &write->wr_head,
 +					 &write->wr_pagelist, write->wr_buflen);
 +	if (status)
 +		return status;
++=======
+ 		return nfserr_bad_xdr;
+ 	if (xdr_stream_decode_u32(argp->xdr, &write->wr_buflen) < 0)
+ 		return nfserr_bad_xdr;
+ 	if (!xdr_stream_subsegment(argp->xdr, &write->wr_payload, write->wr_buflen))
+ 		return nfserr_bad_xdr;
++>>>>>>> 244e2befcba8 (NFSD: Replace READ* macros in nfsd4_decode_write())
  
- 	DECODE_TAIL;
+ 	return nfs_ok;
  }
  
  static __be32
* Unmerged path fs/nfsd/nfs4xdr.c
