arm64: remove ptrauth_keys_install_kernel sync arg

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Mark Rutland <mark.rutland@arm.com>
commit d0055da5266acd316b8cb22b6086b8f9ac2d72cb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/d0055da5.failed

The 'sync' argument to ptrauth_keys_install_kernel macro is somewhat
opaque at callsites, so instead lets have regular and _nosync variants
of the macro to make this a little more obvious.

	Signed-off-by: Mark Rutland <mark.rutland@arm.com>
	Cc: Amit Daniel Kachhap <amit.kachhap@arm.com>
	Cc: Catalin Marinas <catalin.marinas@arm.com>
	Cc: Will Deacon <will@kernel.org>
Link: https://lore.kernel.org/r/20200423101606.37601-2-mark.rutland@arm.com
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit d0055da5266acd316b8cb22b6086b8f9ac2d72cb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm64/include/asm/asm_pointer_auth.h
#	arch/arm64/kernel/entry.S
#	arch/arm64/mm/proc.S
diff --cc arch/arm64/kernel/entry.S
index 0227e1cf5b0b,a9265fef914f..000000000000
--- a/arch/arm64/kernel/entry.S
+++ b/arch/arm64/kernel/entry.S
@@@ -185,14 -176,9 +185,18 @@@ alternative_cb_en
  	ldr	x19, [tsk, #TSK_TI_FLAGS]
  	disable_step_tsk x19, x20
  
 -	apply_ssbd 1, x22, x23
 +	apply_ssbd 1, 1f, x22, x23
  
 +#ifdef CONFIG_ARM64_SSBD
 +	ldp	x0, x1, [sp, #16 * 0]
 +	ldp	x2, x3, [sp, #16 * 1]
 +#endif
 +1:
 +
++<<<<<<< HEAD
++=======
+ 	ptrauth_keys_install_kernel tsk, x20, x22, x23
++>>>>>>> d0055da5266a (arm64: remove ptrauth_keys_install_kernel sync arg)
  	.else
  	add	x21, sp, #S_FRAME_SIZE
  	get_current_task tsk
@@@ -1170,6 -900,7 +1174,10 @@@ SYM_FUNC_START(cpu_switch_to
  	ldr	lr, [x8]
  	mov	sp, x9
  	msr	sp_el0, x1
++<<<<<<< HEAD
++=======
+ 	ptrauth_keys_install_kernel x1, x8, x9, x10
++>>>>>>> d0055da5266a (arm64: remove ptrauth_keys_install_kernel sync arg)
  	ret
  SYM_FUNC_END(cpu_switch_to)
  NOKPROBE(cpu_switch_to)
diff --cc arch/arm64/mm/proc.S
index 768b1405972d,0401342741e6..000000000000
--- a/arch/arm64/mm/proc.S
+++ b/arch/arm64/mm/proc.S
@@@ -148,9 -139,10 +148,13 @@@ alternative_if ARM64_HAS_RAS_EXT
  	msr_s	SYS_DISR_EL1, xzr
  alternative_else_nop_endif
  
++<<<<<<< HEAD
++=======
+ 	ptrauth_keys_install_kernel_nosync x14, x1, x2, x3
++>>>>>>> d0055da5266a (arm64: remove ptrauth_keys_install_kernel sync arg)
  	isb
  	ret
 -SYM_FUNC_END(cpu_do_resume)
 +ENDPROC(cpu_do_resume)
  	.popsection
  #endif
  
* Unmerged path arch/arm64/include/asm/asm_pointer_auth.h
* Unmerged path arch/arm64/include/asm/asm_pointer_auth.h
* Unmerged path arch/arm64/kernel/entry.S
* Unmerged path arch/arm64/mm/proc.S
