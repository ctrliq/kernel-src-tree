xfs: use XFS_B_TO_FSB in xfs_ioctl_setattr

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Christoph Hellwig <hch@lst.de>
commit b231b1221b39bdf7ec4e45b05656bcba7d6a2153
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/b231b122.failed

Clean up xfs_ioctl_setattr a bit by using XFS_B_TO_FSB.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Darrick J. Wong <djwong@kernel.org>
	Signed-off-by: Darrick J. Wong <djwong@kernel.org>
(cherry picked from commit b231b1221b39bdf7ec4e45b05656bcba7d6a2153)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_ioctl.c
diff --cc fs/xfs/xfs_ioctl.c
index 0b05f7dd7822,7909e46b5c5a..000000000000
--- a/fs/xfs/xfs_ioctl.c
+++ b/fs/xfs/xfs_ioctl.c
@@@ -1512,15 -1520,14 +1512,23 @@@ xfs_ioctl_setattr
  	 * are set on the inode then unconditionally clear the extent size hint.
  	 */
  	if (ip->i_d.di_flags & (XFS_DIFLAG_EXTSIZE | XFS_DIFLAG_EXTSZINHERIT))
++<<<<<<< HEAD
 +		ip->i_d.di_extsize = fa->fsx_extsize >> mp->m_sb.sb_blocklog;
++=======
+ 		ip->i_extsize = XFS_B_TO_FSB(mp, fa->fsx_extsize);
++>>>>>>> b231b1221b39 (xfs: use XFS_B_TO_FSB in xfs_ioctl_setattr)
  	else
 -		ip->i_extsize = 0;
 +		ip->i_d.di_extsize = 0;
  	if (xfs_sb_version_has_v3inode(&mp->m_sb) &&
  	    (ip->i_d.di_flags2 & XFS_DIFLAG2_COWEXTSIZE))
++<<<<<<< HEAD
 +		ip->i_d.di_cowextsize = fa->fsx_cowextsize >>
 +				mp->m_sb.sb_blocklog;
++=======
+ 		ip->i_cowextsize = XFS_B_TO_FSB(mp, fa->fsx_cowextsize);
++>>>>>>> b231b1221b39 (xfs: use XFS_B_TO_FSB in xfs_ioctl_setattr)
  	else
 -		ip->i_cowextsize = 0;
 +		ip->i_d.di_cowextsize = 0;
  
  	error = xfs_trans_commit(tp);
  
* Unmerged path fs/xfs/xfs_ioctl.c
