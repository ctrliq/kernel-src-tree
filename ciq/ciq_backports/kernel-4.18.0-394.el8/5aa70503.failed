md: raid1 add nowait support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Vishal Verma <vverma@digitalocean.com>
commit 5aa705039c4fca84575539bfa2b8a28454a3d2ca
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/5aa70503.failed

This adds nowait support to the RAID1 driver. It makes RAID1 driver
return with EAGAIN for situations where it could wait for eg:

  - Waiting for the barrier,

wait_barrier() fn is modified to return bool to support error for
wait barriers. It returns true in case of wait or if wait is not
required and returns false if wait was required but not performed
to support nowait.

	Reviewed-by: Jens Axboe <axboe@kernel.dk>
	Signed-off-by: Vishal Verma <vverma@digitalocean.com>
	Signed-off-by: Song Liu <song@kernel.org>
(cherry picked from commit 5aa705039c4fca84575539bfa2b8a28454a3d2ca)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid1.c
diff --cc drivers/md/raid1.c
index 034d7d87a787,02db187090fa..000000000000
--- a/drivers/md/raid1.c
+++ b/drivers/md/raid1.c
@@@ -3431,5 -3440,3 +3468,8 @@@ MODULE_DESCRIPTION("RAID1 (mirroring) p
  MODULE_ALIAS("md-personality-3"); /* RAID1 */
  MODULE_ALIAS("md-raid1");
  MODULE_ALIAS("md-level-1");
++<<<<<<< HEAD
 +
 +module_param(max_queued_requests, int, S_IRUGO|S_IWUSR);
++=======
++>>>>>>> 5aa705039c4f (md: raid1 add nowait support)
* Unmerged path drivers/md/raid1.c
