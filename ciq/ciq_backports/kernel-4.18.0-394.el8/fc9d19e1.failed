RDMA/irdma: Use helper function to set GUIDs

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-394.el8
commit-author Kamal Heib <kamalheib1@gmail.com>
commit fc9d19e18aaac489e6ea86fd5bb59d50d151515b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-394.el8/fc9d19e1.failed

Use the addrconf_addr_eui48() helper function to set the GUIDs for both
RoCE and iWARP modes, Also make sure the GUIDs are valid EUI-64
identifiers.

Link: https://lore.kernel.org/r/20211107212227.44610-1-kamalheib1@gmail.com
	Signed-off-by: Kamal Heib <kamalheib1@gmail.com>
	Reviewed-by: Shiraz Saleem <shiraz.saleem@intel.com>
	Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
(cherry picked from commit fc9d19e18aaac489e6ea86fd5bb59d50d151515b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/irdma/verbs.c
diff --cc drivers/infiniband/hw/irdma/verbs.c
index 71192c361ca3,c3b8ba6036ff..000000000000
--- a/drivers/infiniband/hw/irdma/verbs.c
+++ b/drivers/infiniband/hw/irdma/verbs.c
@@@ -4327,24 -4309,6 +4328,27 @@@ static enum rdma_link_layer irdma_get_l
  	return IB_LINK_LAYER_ETHERNET;
  }
  
++<<<<<<< HEAD
 +static __be64 irdma_mac_to_guid(struct net_device *ndev)
 +{
 +	unsigned char *mac = ndev->dev_addr;
 +	__be64 guid;
 +	unsigned char *dst = (unsigned char *)&guid;
 +
 +	dst[0] = mac[0] ^ 2;
 +	dst[1] = mac[1];
 +	dst[2] = mac[2];
 +	dst[3] = 0xff;
 +	dst[4] = 0xfe;
 +	dst[5] = mac[3];
 +	dst[6] = mac[4];
 +	dst[7] = mac[5];
 +
 +	return guid;
 +}
 +
++=======
++>>>>>>> fc9d19e18aaa (RDMA/irdma: Use helper function to set GUIDs)
  static const struct ib_device_ops irdma_roce_dev_ops = {
  	.attach_mcast = irdma_attach_mcast,
  	.create_ah = irdma_create_ah,
* Unmerged path drivers/infiniband/hw/irdma/verbs.c
