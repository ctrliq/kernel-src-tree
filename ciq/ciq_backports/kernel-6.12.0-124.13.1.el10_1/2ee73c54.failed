ibmvnic: Add stat for tx direct vs tx batched

jira KERNEL-206
Rebuild_History Non-Buildable kernel-6.12.0-124.13.1.el10_1
commit-author Nick Child <nnac123@linux.ibm.com>
commit 2ee73c54a615b74d2e7ee6f20844fd3ba63fc485
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-6.12.0-124.13.1.el10_1/2ee73c54.failed

Allow tracking of packets sent with send_subcrq direct vs
indirect. `ethtool -S <dev>` will now provide a counter
of the number of uses of each xmit method. This metric will
be useful in performance debugging.

	Signed-off-by: Nick Child <nnac123@linux.ibm.com>
	Reviewed-by: Simon Horman <horms@kernel.org>
Link: https://patch.msgid.link/20241001163531.1803152-1-nnac123@linux.ibm.com
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 2ee73c54a615b74d2e7ee6f20844fd3ba63fc485)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/ibm/ibmvnic.c
diff --cc drivers/net/ethernet/ibm/ibmvnic.c
index 8bfa10b78e20,53b309ddc63b..000000000000
--- a/drivers/net/ethernet/ibm/ibmvnic.c
+++ b/drivers/net/ethernet/ibm/ibmvnic.c
@@@ -2612,8 -2612,7 +2616,12 @@@ early_exit
  		netif_stop_subqueue(netdev, queue_num);
  	}
  
++<<<<<<< HEAD
 +	tx_packets++;
 +	tx_bytes += skblen;
++=======
+ 	tx_bytes += skb->len;
++>>>>>>> 2ee73c54a615 (ibmvnic: Add stat for tx direct vs tx batched)
  	txq_trans_cond_update(txq);
  	ret = NETDEV_TX_OK;
  	goto out;
* Unmerged path drivers/net/ethernet/ibm/ibmvnic.c
diff --git a/drivers/net/ethernet/ibm/ibmvnic.h b/drivers/net/ethernet/ibm/ibmvnic.h
index 94ac36b1408b..a189038d88df 100644
--- a/drivers/net/ethernet/ibm/ibmvnic.h
+++ b/drivers/net/ethernet/ibm/ibmvnic.h
@@ -213,7 +213,8 @@ struct ibmvnic_statistics {
 
 #define NUM_TX_STATS 3
 struct ibmvnic_tx_queue_stats {
-	u64 packets;
+	u64 batched_packets;
+	u64 direct_packets;
 	u64 bytes;
 	u64 dropped_packets;
 };
