ASoC: intel: sof_sdw: Allow direct specification of CODEC name

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-536.el8
commit-author Charles Keepax <ckeepax@opensource.cirrus.com>
commit 009582008182bc0a2956d245fd0362e036f31dfe
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-536.el8/00958200.failed

Add support for MFD based CODEC drivers, by allowing the CODEC name to
not be the SoundWire device directly.

	Signed-off-by: Charles Keepax <ckeepax@opensource.cirrus.com>
	Signed-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>
	Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20230731214257.444605-20-pierre-louis.bossart@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 009582008182bc0a2956d245fd0362e036f31dfe)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/sof_sdw.c
diff --cc sound/soc/intel/boards/sof_sdw.c
index 1d39756d780e,e6faed2b99b2..000000000000
--- a/sound/soc/intel/boards/sof_sdw.c
+++ b/sound/soc/intel/boards/sof_sdw.c
@@@ -1159,7 -1174,11 +1159,15 @@@ static int create_codec_dai_name(struc
  		class_id = SDW_CLASS_ID(adr);
  
  		comp_index = i - adr_index + offset;
++<<<<<<< HEAD
 +		if (is_unique_device(link, sdw_version, mfg_id, part_id,
++=======
+ 		if (codec_info_list[codec_index].codec_name) {
+ 			codec[comp_index].name =
+ 				devm_kstrdup(dev, codec_info_list[codec_index].codec_name,
+ 					     GFP_KERNEL);
+ 		} else if (is_unique_device(adr_link, sdw_version, mfg_id, part_id,
++>>>>>>> 009582008182 (ASoC: intel: sof_sdw: Allow direct specification of CODEC name)
  				     class_id, i)) {
  			codec_str = "sdw:%01x:%04x:%04x:%02x";
  			codec[comp_index].name =
* Unmerged path sound/soc/intel/boards/sof_sdw.c
diff --git a/sound/soc/intel/boards/sof_sdw_common.h b/sound/soc/intel/boards/sof_sdw_common.h
index 37402170d5f9..fe234b98eb64 100644
--- a/sound/soc/intel/boards/sof_sdw_common.h
+++ b/sound/soc/intel/boards/sof_sdw_common.h
@@ -80,6 +80,7 @@ struct sof_sdw_dai_info {
 struct sof_sdw_codec_info {
 	const int part_id;
 	const int version_id;
+	const char *codec_name;
 	int amp_num;
 	const u8 acpi_id[ACPI_ID_LEN];
 	const bool ignore_pch_dmic;
