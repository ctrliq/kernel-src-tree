ASoC: intel: sof_sdw: Move group_generated logic

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-536.el8
commit-author Charles Keepax <ckeepax@opensource.cirrus.com>
commit a60ed3b738705dbcb4afce9a24af00e2671edf19
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-536.el8/a60ed3b7.failed

Hoist the handling logic for group_generated up to the
sof_card_dai_links_create level. This avoids the need to pass the array
through multiple levels of functions.

	Reviewed-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
	Reviewed-by: Bard Liao <yung-chuan.liao@linux.intel.com>
	Signed-off-by: Charles Keepax <ckeepax@opensource.cirrus.com>
	Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20230731214257.444605-24-pierre-louis.bossart@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit a60ed3b738705dbcb4afce9a24af00e2671edf19)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/sof_sdw.c
diff --cc sound/soc/intel/boards/sof_sdw.c
index 1d39756d780e,fd27e211211b..000000000000
--- a/sound/soc/intel/boards/sof_sdw.c
+++ b/sound/soc/intel/boards/sof_sdw.c
@@@ -1338,9 -1373,8 +1333,14 @@@ static int create_sdw_dailink(struct sn
  			      struct snd_soc_dai_link *dai_links,
  			      int sdw_be_num, int sdw_cpu_dai_num,
  			      struct snd_soc_dai_link_component *cpus,
++<<<<<<< HEAD
 +			      const struct snd_soc_acpi_link_adr *link,
 +			      int *cpu_id, bool *group_generated,
 +			      struct snd_soc_codec_conf *codec_conf,
++=======
+ 			      const struct snd_soc_acpi_link_adr *adr_link,
+ 			      int *cpu_id, struct snd_soc_codec_conf *codec_conf,
++>>>>>>> a60ed3b73870 (ASoC: intel: sof_sdw: Move group_generated logic)
  			      int codec_count, int *be_id,
  			      int *codec_conf_index,
  			      bool *ignore_pch_dmic,
@@@ -1362,8 -1397,8 +1362,13 @@@
  	int ret;
  	int k;
  
++<<<<<<< HEAD
 +	ret = get_slave_info(link, dev, cpu_dai_id, &cpu_dai_num, &codec_num,
 +			     &group_id, group_generated, adr_index);
++=======
+ 	ret = get_slave_info(adr_link, dev, cpu_dai_id, &cpu_dai_num, &codec_num,
+ 			     &group_id, adr_index);
++>>>>>>> a60ed3b73870 (ASoC: intel: sof_sdw: Move group_generated logic)
  	if (ret)
  		return ret;
  
@@@ -1556,17 -1551,18 +1561,23 @@@ static int sof_card_dai_links_create(st
  	struct mc_private *ctx = snd_soc_card_get_drvdata(card);
  	struct snd_soc_dai_link_component *idisp_components;
  	struct snd_soc_dai_link_component *ssp_components;
++<<<<<<< HEAD
 +	struct snd_soc_acpi_mach_params *mach_params;
 +	const struct snd_soc_acpi_link_adr *adr_link;
++=======
+ 	struct snd_soc_acpi_mach_params *mach_params = &mach->mach_params;
+ 	const struct snd_soc_acpi_link_adr *adr_link = mach_params->links;
+ 	bool aggregation = !(sof_sdw_quirk & SOF_SDW_NO_AGGREGATION);
++>>>>>>> a60ed3b73870 (ASoC: intel: sof_sdw: Move group_generated logic)
  	struct snd_soc_dai_link_component *cpus;
  	struct snd_soc_codec_conf *codec_conf;
  	bool append_dai_type = false;
  	bool ignore_pch_dmic = false;
 -	int codec_conf_num = 0;
 +	int codec_conf_count;
  	int codec_conf_index = 0;
- 	bool group_generated[SDW_MAX_GROUPS];
+ 	bool group_generated[SDW_MAX_GROUPS] = { };
  	int ssp_codec_index, ssp_mask;
 -	struct snd_soc_dai_link *dai_links;
 +	struct snd_soc_dai_link *links;
  	int num_links, link_index = 0;
  	char *name, *cpu_name;
  	int total_cpu_dai_num;
@@@ -1708,10 -1691,10 +1711,17 @@@ out
  				return codec_index;
  
  			for (j = 0; j < codec_info_list[codec_index].dai_num ; j++) {
++<<<<<<< HEAD
 +				ret = create_sdw_dailink(card, dev, &link_index, links, sdw_be_num,
 +							 sdw_cpu_dai_num, cpus, adr_link,
 +							 &cpu_id, group_generated,
 +							 codec_conf, codec_conf_count,
++=======
+ 				ret = create_sdw_dailink(card, &link_index, dai_links,
+ 							 sdw_be_num, sdw_cpu_dai_num, cpus,
+ 							 adr_link, &cpu_id,
+ 							 codec_conf, codec_conf_num,
++>>>>>>> a60ed3b73870 (ASoC: intel: sof_sdw: Move group_generated logic)
  							 &be_id, &codec_conf_index,
  							 &ignore_pch_dmic, append_dai_type, i, j);
  				if (ret < 0) {
* Unmerged path sound/soc/intel/boards/sof_sdw.c
