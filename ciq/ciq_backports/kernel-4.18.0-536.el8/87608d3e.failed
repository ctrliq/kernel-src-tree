ASoC: intel: sof-sdw: Move check for valid group id to get_dailink_info

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-536.el8
commit-author Charles Keepax <ckeepax@opensource.cirrus.com>
commit 87608d3e9de18331c5d3c9ecb915b0ff3d03c089
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-536.el8/87608d3e.failed

Move the check for a valid group id into get_dailink_info as
well. This does cause a slight change in behaviour in that the system
will return an error rather than just ignoring the link with an
invalid group id. There are presently no systems with invalid group
ids in mainline and failing seems more appropriate since it will
better highlight the code needs fixing.

	Reviewed-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
	Reviewed-by: Bard Liao <yung-chuan.liao@linux.intel.com>
	Signed-off-by: Charles Keepax <ckeepax@opensource.cirrus.com>
Link: https://lore.kernel.org/r/20230808132013.889419-4-ckeepax@opensource.cirrus.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 87608d3e9de18331c5d3c9ecb915b0ff3d03c089)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/sof_sdw.c
diff --cc sound/soc/intel/boards/sof_sdw.c
index 5f6ef7f8be22,b250fb7be4bf..000000000000
--- a/sound/soc/intel/boards/sof_sdw.c
+++ b/sound/soc/intel/boards/sof_sdw.c
@@@ -1029,9 -1062,23 +1029,26 @@@ static int get_sdw_dailink_info(struct 
  			codec_index = find_codec_info_part(adr);
  			if (codec_index < 0)
  				return codec_index;
 -
  			codec_info = &codec_info_list[codec_index];
  
++<<<<<<< HEAD
 +			endpoint = link->adr_d[i].endpoints;
++=======
+ 			*codecs_num += codec_info->dai_num;
+ 
+ 			if (!adr_link->adr_d[i].name_prefix) {
+ 				dev_err(dev, "codec 0x%llx does not have a name prefix\n",
+ 					adr_link->adr_d[i].adr);
+ 				return -EINVAL;
+ 			}
+ 
+ 			endpoint = adr_link->adr_d[i].endpoints;
+ 			if (endpoint->aggregated && !endpoint->group_id) {
+ 				dev_err(dev, "invalid group id on link %x\n",
+ 					adr_link->mask);
+ 				return -EINVAL;
+ 			}
++>>>>>>> 87608d3e9de1 (ASoC: intel: sof-sdw: Move check for valid group id to get_dailink_info)
  
  			for (j = 0; j < codec_info->dai_num; j++) {
  				/* count DAI number for playback and capture */
* Unmerged path sound/soc/intel/boards/sof_sdw.c
