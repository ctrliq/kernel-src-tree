Bluetooth: btqca: Add support for firmware image with mbn type for WCN6750

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-528.el8
commit-author Venkata Lakshmi Narayana Gubba <gubbaven@codeaurora.org>
commit ecf6b2d9566606cd78bdc0af36e5a938624b13d1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-528.el8/ecf6b2d9.failed

1. Added support to download firmware image with mbn type for wcn6750
   as it supports mbn type image.
2. If mbn type image is not present then check for tlv type image.
3. Added debug logs for mbn type image.

	Signed-off-by: Venkata Lakshmi Narayana Gubba <gubbaven@codeaurora.org>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
(cherry picked from commit ecf6b2d9566606cd78bdc0af36e5a938624b13d1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/bluetooth/btqca.c
diff --cc drivers/bluetooth/btqca.c
index 424366e6f3e3,3210283eb08f..000000000000
--- a/drivers/bluetooth/btqca.c
+++ b/drivers/bluetooth/btqca.c
@@@ -540,6 -556,20 +571,23 @@@ int qca_uart_setup(struct hci_dev *hdev
  			    (soc_ver & 0x0000000f);
  		snprintf(config.fwname, sizeof(config.fwname),
  			 "qca/crbtfw%02x.tlv", rom_ver);
++<<<<<<< HEAD
++=======
+ 	} else if (soc_type == QCA_QCA6390) {
+ 		rom_ver = ((soc_ver & 0x00000f00) >> 0x04) |
+ 			    (soc_ver & 0x0000000f);
+ 		snprintf(config.fwname, sizeof(config.fwname),
+ 			 "qca/htbtfw%02x.tlv", rom_ver);
+ 	} else if (soc_type == QCA_WCN6750) {
+ 		rom_ver = ((soc_ver & 0x00000f00) >> 0x04) |
+ 			    (soc_ver & 0x0000000f);
+ 		/* Choose mbn file by default.If mbn file is not found
+ 		 * then choose tlv file
+ 		 */
+ 		config.type = ELF_TYPE_PATCH;
+ 		snprintf(config.fwname, sizeof(config.fwname),
+ 			 "qca/msbtfw%02x.mbn", rom_ver);
++>>>>>>> ecf6b2d95666 (Bluetooth: btqca: Add support for firmware image with mbn type for WCN6750)
  	} else {
  		snprintf(config.fwname, sizeof(config.fwname),
  			 "qca/rampatch_%08x.bin", soc_ver);
* Unmerged path drivers/bluetooth/btqca.c
diff --git a/drivers/bluetooth/btqca.h b/drivers/bluetooth/btqca.h
index 1cbbc00fca46..b6479e590e77 100644
--- a/drivers/bluetooth/btqca.h
+++ b/drivers/bluetooth/btqca.h
@@ -81,7 +81,8 @@ enum qca_tlv_dnld_mode {
 
 enum qca_tlv_type {
 	TLV_TYPE_PATCH = 1,
-	TLV_TYPE_NVM
+	TLV_TYPE_NVM,
+	ELF_TYPE_PATCH,
 };
 
 struct qca_fw_config {
