platform/x86/intel/uncore-freq: Use sysfs API to create attributes

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Srinivas Pandruvada <srinivas.pandruvada@intel.com>
commit ae7b2ce578513adf0a77f0127e27ee4447d50443
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/ae7b2ce5.failed

Use of sysfs API is always preferable over using kobject calls to create
attributes. Remove usage of kobject_init_and_add() and use
sysfs_create_group(). To create relationship between sysfs attribute
and uncore instance use device_attribute*, which is defined per
uncore instance.

To create uniform locking for both read and write attributes take
lock in the sysfs callbacks, not in the actual functions where
the MSRs are read or updated.

No functional changes are expected.

	Signed-off-by: Srinivas Pandruvada <srinivas.pandruvada@intel.com>
	Acked-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Link: https://lore.kernel.org/r/20220204000306.2517447-3-srinivas.pandruvada@linux.intel.com
	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
(cherry picked from commit ae7b2ce578513adf0a77f0127e27ee4447d50443)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/intel/uncore-frequency/uncore-frequency.c
* Unmerged path drivers/platform/x86/intel/uncore-frequency/uncore-frequency.c
* Unmerged path drivers/platform/x86/intel/uncore-frequency/uncore-frequency.c
