xhci: Add hub_control to xhci_driver_overrides

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Jim Lin <jilin@nvidia.com>
commit 592338dde85411b1da74fa6b463e2a047c2545ab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/592338dd.failed

Add a hub_control() callback to the xhci_driver_overrides structure to
allow host drivers to override the default hub_control function. This
is required for Tegra which requires device specific actions for power
management to be executed during USB state transitions.

	Signed-off-by: Jim Lin <jilin@nvidia.com>
	Reviewed-by: Jon Hunter <jonathanh@nvidia.com>
	Tested-by: Jon Hunter <jonathanh@nvidia.com>
	Acked-by: Thierry Reding <treding@nvidia.com>
	Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Link: https://lore.kernel.org/r/20221111101813.32482-2-jilin@nvidia.com
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 592338dde85411b1da74fa6b463e2a047c2545ab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/host/xhci.c
#	drivers/usb/host/xhci.h
diff --cc drivers/usb/host/xhci.c
index 92eeae6bd1c4,748c7158198f..000000000000
--- a/drivers/usb/host/xhci.c
+++ b/drivers/usb/host/xhci.c
@@@ -5516,8 -5502,8 +5516,13 @@@ void xhci_init_driver(struct hc_driver 
  			drv->check_bandwidth = over->check_bandwidth;
  		if (over->reset_bandwidth)
  			drv->reset_bandwidth = over->reset_bandwidth;
++<<<<<<< HEAD
 +		if (over->update_hub_device)
 +			drv->update_hub_device = over->update_hub_device;
++=======
+ 		if (over->hub_control)
+ 			drv->hub_control = over->hub_control;
++>>>>>>> 592338dde854 (xhci: Add hub_control to xhci_driver_overrides)
  	}
  }
  EXPORT_SYMBOL_GPL(xhci_init_driver);
diff --cc drivers/usb/host/xhci.h
index b6933426649a,f71841812f06..000000000000
--- a/drivers/usb/host/xhci.h
+++ b/drivers/usb/host/xhci.h
@@@ -1944,8 -1943,8 +1944,13 @@@ struct xhci_driver_overrides 
  			     struct usb_host_endpoint *ep);
  	int (*check_bandwidth)(struct usb_hcd *, struct usb_device *);
  	void (*reset_bandwidth)(struct usb_hcd *, struct usb_device *);
++<<<<<<< HEAD
 +	int (*update_hub_device)(struct usb_hcd *hcd, struct usb_device *hdev,
 +			    struct usb_tt *tt, gfp_t mem_flags);
++=======
+ 	int (*hub_control)(struct usb_hcd *hcd, u16 typeReq, u16 wValue,
+ 			   u16 wIndex, char *buf, u16 wLength);
++>>>>>>> 592338dde854 (xhci: Add hub_control to xhci_driver_overrides)
  };
  
  #define	XHCI_CFC_DELAY		10
* Unmerged path drivers/usb/host/xhci.c
* Unmerged path drivers/usb/host/xhci.h
