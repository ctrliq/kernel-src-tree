usb: uvc: use v4l2_fill_fmtdesc instead of open coded format name

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Michael Grzeschik <m.grzeschik@pengutronix.de>
commit 2d83eb5d24e1c8dba386928fcbf76d3b581a632d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/2d83eb5d.failed

Since v4l2_fill_fmtdesc will be called in the ioctl v4l_enum_fmt anyway.
We can set the format description and compressed flag from v4l_fill_fmtdesc
and can remove the extra name field in uvc_format_desc.

	Reviewed-by: Daniel Scally <dan.scally@ideasonboard.com>
	Tested-by: Daniel Scally <dan.scally@ideasonboard.com>
	Signed-off-by: Michael Grzeschik <m.grzeschik@pengutronix.de>
	Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Link: https://lore.kernel.org/r/20230126231456.3402323-6-m.grzeschik@pengutronix.de
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 2d83eb5d24e1c8dba386928fcbf76d3b581a632d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/media/common/uvc.c
* Unmerged path drivers/media/common/uvc.c
* Unmerged path drivers/media/common/uvc.c
diff --git a/drivers/usb/gadget/function/uvc_v4l2.c b/drivers/usb/gadget/function/uvc_v4l2.c
index 00cd8933b0eb..f112803cc0e8 100644
--- a/drivers/usb/gadget/function/uvc_v4l2.c
+++ b/drivers/usb/gadget/function/uvc_v4l2.c
@@ -404,15 +404,9 @@ uvc_v4l2_enum_format(struct file *file, void *fh, struct v4l2_fmtdesc *f)
 	if (!uformat)
 		return -EINVAL;
 
-	if (uformat->type != UVCG_UNCOMPRESSED)
-		f->flags |= V4L2_FMT_FLAG_COMPRESSED;
-
 	fmtdesc = to_uvc_format(uformat);
 	f->pixelformat = fmtdesc->fcc;
 
-	strscpy(f->description, fmtdesc->name, sizeof(f->description));
-	f->description[strlen(fmtdesc->name) - 1] = 0;
-
 	return 0;
 }
 
diff --git a/include/linux/usb/uvc.h b/include/linux/usb/uvc.h
index b010a36fc1d9..a44d30ac16a1 100644
--- a/include/linux/usb/uvc.h
+++ b/include/linux/usb/uvc.h
@@ -153,7 +153,6 @@
  */
 
 struct uvc_format_desc {
-	char *name;
 	u8 guid[16];
 	u32 fcc;
 };
