driver core: remove devm_device_remove_groups()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Greg Kroah-Hartman <gregkh@linuxfoundation.org>
commit 927bdd1e65bd14ae035d9c625df2f4ccd51e8a83
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/927bdd1e.failed

There is no in-kernel user of this function, so it is not needed anymore
and can be removed.

	Cc: Dmitry Torokhov <dmitry.torokhov@gmail.com>
	Reviewed-by: Rafael J. Wysocki <rafael@kernel.org>
Link: https://lore.kernel.org/r/20221109140711.105222-1-gregkh@linuxfoundation.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 927bdd1e65bd14ae035d9c625df2f4ccd51e8a83)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/device.h
diff --cc include/linux/device.h
index a1a70f61fd6c,4efc607c008c..000000000000
--- a/include/linux/device.h
+++ b/include/linux/device.h
@@@ -1775,14 -1060,12 +1775,21 @@@ static inline void device_remove_group(
  	return device_remove_groups(dev, groups);
  }
  
 -int __must_check devm_device_add_groups(struct device *dev,
 +extern int __must_check devm_device_add_groups(struct device *dev,
  					const struct attribute_group **groups);
++<<<<<<< HEAD
 +extern void devm_device_remove_groups(struct device *dev,
 +				      const struct attribute_group **groups);
 +extern int __must_check devm_device_add_group(struct device *dev,
 +					const struct attribute_group *grp);
 +extern void devm_device_remove_group(struct device *dev,
 +				     const struct attribute_group *grp);
++=======
+ int __must_check devm_device_add_group(struct device *dev,
+ 				       const struct attribute_group *grp);
+ void devm_device_remove_group(struct device *dev,
+ 			      const struct attribute_group *grp);
++>>>>>>> 927bdd1e65bd (driver core: remove devm_device_remove_groups())
  
  /*
   * Platform "fixup" functions - allow the platform to have their say
diff --git a/drivers/base/core.c b/drivers/base/core.c
index 5c0785c9c91c..3704dc4fdd85 100644
--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@ -2570,23 +2570,6 @@ int devm_device_add_groups(struct device *dev,
 }
 EXPORT_SYMBOL_GPL(devm_device_add_groups);
 
-/**
- * devm_device_remove_groups - remove a list of managed groups
- *
- * @dev:	The device for the groups to be removed from
- * @groups:	NULL terminated list of groups to be removed
- *
- * If groups is not NULL, remove the specified groups from the device.
- */
-void devm_device_remove_groups(struct device *dev,
-			       const struct attribute_group **groups)
-{
-	WARN_ON(devres_release(dev, devm_attr_groups_remove,
-			       devm_attr_group_match,
-			       /* cast away const */ (void *)groups));
-}
-EXPORT_SYMBOL_GPL(devm_device_remove_groups);
-
 static int device_add_attrs(struct device *dev)
 {
 	struct class *class = dev->class;
* Unmerged path include/linux/device.h
