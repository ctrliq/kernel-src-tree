driver core: mark driver_allows_async_probing static

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 189a87f8ef8ceed16b2a230dc0ce65117068ac30
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/189a87f8.failed

driver_allows_async_probing is only used in drivers/base/dd.c, so mark
it static and remove the declaration in drivers/base/base.h.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
Link: https://lore.kernel.org/r/20221030092255.872280-1-hch@lst.de
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 189a87f8ef8ceed16b2a230dc0ce65117068ac30)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/dd.c
diff --cc drivers/base/dd.c
index 887b1b397ce9,4001e22617ab..000000000000
--- a/drivers/base/dd.c
+++ b/drivers/base/dd.c
@@@ -820,7 -821,29 +820,33 @@@ static int driver_probe_device(struct d
  	return ret;
  }
  
++<<<<<<< HEAD
 +bool driver_allows_async_probing(struct device_driver *drv)
++=======
+ static inline bool cmdline_requested_async_probing(const char *drv_name)
+ {
+ 	bool async_drv;
+ 
+ 	async_drv = parse_option_str(async_probe_drv_names, drv_name);
+ 
+ 	return (async_probe_default != async_drv);
+ }
+ 
+ /* The option format is "driver_async_probe=drv_name1,drv_name2,..." */
+ static int __init save_async_options(char *buf)
+ {
+ 	if (strlen(buf) >= ASYNC_DRV_NAMES_MAX_LEN)
+ 		pr_warn("Too long list of driver names for 'driver_async_probe'!\n");
+ 
+ 	strscpy(async_probe_drv_names, buf, ASYNC_DRV_NAMES_MAX_LEN);
+ 	async_probe_default = parse_option_str(async_probe_drv_names, "*");
+ 
+ 	return 1;
+ }
+ __setup("driver_async_probe=", save_async_options);
+ 
+ static bool driver_allows_async_probing(struct device_driver *drv)
++>>>>>>> 189a87f8ef8c (driver core: mark driver_allows_async_probing static)
  {
  	switch (drv->probe_type) {
  	case PROBE_PREFER_ASYNCHRONOUS:
diff --git a/drivers/base/base.h b/drivers/base/base.h
index 151abfb0083c..689c0a3caa44 100644
--- a/drivers/base/base.h
+++ b/drivers/base/base.h
@@ -134,7 +134,6 @@ static inline int driver_match_device(struct device_driver *drv,
 {
 	return drv->bus->match ? drv->bus->match(dev, drv) : 1;
 }
-extern bool driver_allows_async_probing(struct device_driver *drv);
 
 extern int driver_add_groups(struct device_driver *drv,
 			     const struct attribute_group **groups);
* Unmerged path drivers/base/dd.c
