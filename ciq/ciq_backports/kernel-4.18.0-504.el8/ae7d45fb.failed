crypto: ccp - Add a header for multiple drivers to use `__psp_pa`

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-504.el8
commit-author Mario Limonciello <mario.limonciello@amd.com>
commit ae7d45fb7ca75e94b478e2404709ba3024774334
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-504.el8/ae7d45fb.failed

The TEE subdriver for CCP, the amdtee driver and the i2c-designware-amdpsp
drivers all include `psp-sev.h` even though they don't use SEV
functionality.

Move the definition of `__psp_pa` into a common header to be included
by all of these drivers.

	Reviewed-by: Jan Dabros <jsd@semihalf.com>
	Acked-by: Jarkko Nikula <jarkko.nikula@linux.intel.com> # For the drivers/i2c/busses/i2c-designware-amdpsp.c
	Acked-by: Sumit Garg <sumit.garg@linaro.org> # For TEE subsystem bits
	Acked-by: Tom Lendacky <thomas.lendacky@amd.com>
	Acked-by: Sean Christopherson <seanjc@google.com> # KVM
	Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
(cherry picked from commit ae7d45fb7ca75e94b478e2404709ba3024774334)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/i2c/busses/i2c-designware-amdpsp.c
#	drivers/tee/amdtee/call.c
#	drivers/tee/amdtee/shm_pool.c
* Unmerged path drivers/i2c/busses/i2c-designware-amdpsp.c
* Unmerged path drivers/tee/amdtee/call.c
* Unmerged path drivers/tee/amdtee/shm_pool.c
diff --git a/arch/x86/kvm/svm/sev.c b/arch/x86/kvm/svm/sev.c
index 81f11540aea3..ab9235f9d14a 100644
--- a/arch/x86/kvm/svm/sev.c
+++ b/arch/x86/kvm/svm/sev.c
@@ -11,6 +11,7 @@
 #include <linux/kvm_host.h>
 #include <linux/kernel.h>
 #include <linux/highmem.h>
+#include <linux/psp.h>
 #include <linux/psp-sev.h>
 #include <linux/pagemap.h>
 #include <linux/swap.h>
diff --git a/drivers/crypto/ccp/sev-dev.c b/drivers/crypto/ccp/sev-dev.c
index 463e3a277da5..f43040cc9815 100644
--- a/drivers/crypto/ccp/sev-dev.c
+++ b/drivers/crypto/ccp/sev-dev.c
@@ -24,6 +24,7 @@
 #include <linux/cpufeature.h>
 #include <linux/fs.h>
 #include <linux/fs_struct.h>
+#include <linux/psp.h>
 
 #include <asm/smp.h>
 #include <asm/cacheflush.h>
diff --git a/drivers/crypto/ccp/tee-dev.c b/drivers/crypto/ccp/tee-dev.c
index 7d1cd0dad476..b03b46d0ce5e 100644
--- a/drivers/crypto/ccp/tee-dev.c
+++ b/drivers/crypto/ccp/tee-dev.c
@@ -13,7 +13,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/gfp.h>
-#include <linux/psp-sev.h>
+#include <linux/psp.h>
 #include <linux/psp-tee.h>
 
 #include "psp-dev.h"
* Unmerged path drivers/i2c/busses/i2c-designware-amdpsp.c
* Unmerged path drivers/tee/amdtee/call.c
* Unmerged path drivers/tee/amdtee/shm_pool.c
diff --git a/include/linux/psp-sev.h b/include/linux/psp-sev.h
index 282f763982ff..c4bee0b4aff9 100644
--- a/include/linux/psp-sev.h
+++ b/include/linux/psp-sev.h
@@ -17,14 +17,6 @@
 
 #include <uapi/linux/psp-sev.h>
 
-#ifdef CONFIG_X86
-#include <linux/mem_encrypt.h>
-
-#define __psp_pa(x)	__sme_pa(x)
-#else
-#define __psp_pa(x)	__pa(x)
-#endif
-
 #define SEV_FW_BLOB_MAX_SIZE	0x4000	/* 16KB */
 
 /**
diff --git a/include/linux/psp.h b/include/linux/psp.h
new file mode 100644
index 000000000000..202162487ec3
--- /dev/null
+++ b/include/linux/psp.h
@@ -0,0 +1,14 @@
+/* SPDX-License-Identifier: GPL-2.0-only */
+
+#ifndef __PSP_H
+#define __PSP_H
+
+#ifdef CONFIG_X86
+#include <linux/mem_encrypt.h>
+
+#define __psp_pa(x)	__sme_pa(x)
+#else
+#define __psp_pa(x)	__pa(x)
+#endif
+
+#endif /* __PSP_H */
