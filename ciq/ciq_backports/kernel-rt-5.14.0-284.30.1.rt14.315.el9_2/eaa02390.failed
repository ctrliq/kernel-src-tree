rxrpc: Fix NULL deref in rxrpc_unuse_local()

jira LE-1907
Rebuild_History Non-Buildable kernel-rt-5.14.0-284.30.1.rt14.315.el9_2
commit-author David Howells <dhowells@redhat.com>
commit eaa02390adb03b82f04babebf0cdd233793aecf5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-rt-5.14.0-284.30.1.rt14.315.el9_2/eaa02390.failed

Fix rxrpc_unuse_local() to get the debug_id *after* checking to see if
local is NULL.

Fixes: a2cf3264f331 ("rxrpc: Fold __rxrpc_unuse_local() into rxrpc_unuse_local()")
	Reported-by: syzbot+3538a6a72efa8b059c38@syzkaller.appspotmail.com
	Signed-off-by: David Howells <dhowells@redhat.com>
	Tested-by: syzbot+3538a6a72efa8b059c38@syzkaller.appspotmail.com
cc: Marc Dionne <marc.dionne@auristor.com>
cc: linux-afs@lists.infradead.org
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit eaa02390adb03b82f04babebf0cdd233793aecf5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/rxrpc/local_object.c
diff --cc net/rxrpc/local_object.c
index 846558613c7f,24ee585d9aaf..000000000000
--- a/net/rxrpc/local_object.c
+++ b/net/rxrpc/local_object.c
@@@ -347,15 -353,20 +347,28 @@@ struct rxrpc_local *rxrpc_use_local(str
  
  /*
   * Cease using a local endpoint.  Once the number of active users reaches 0, we
 - * start the closure of the transport in the I/O thread..
 + * start the closure of the transport in the work processor.
   */
 -void rxrpc_unuse_local(struct rxrpc_local *local, enum rxrpc_local_trace why)
 +void rxrpc_unuse_local(struct rxrpc_local *local)
  {
++<<<<<<< HEAD
 +	if (local) {
 +		if (__rxrpc_unuse_local(local)) {
 +			rxrpc_get_local(local);
 +			rxrpc_queue_local(local);
 +		}
++=======
+ 	unsigned int debug_id;
+ 	int r, u;
+ 
+ 	if (local) {
+ 		debug_id = local->debug_id;
+ 		r = refcount_read(&local->ref);
+ 		u = atomic_dec_return(&local->active_users);
+ 		trace_rxrpc_local(debug_id, why, r, u);
+ 		if (u == 0)
+ 			kthread_stop(local->io_thread);
++>>>>>>> eaa02390adb0 (rxrpc: Fix NULL deref in rxrpc_unuse_local())
  	}
  }
  
* Unmerged path net/rxrpc/local_object.c
