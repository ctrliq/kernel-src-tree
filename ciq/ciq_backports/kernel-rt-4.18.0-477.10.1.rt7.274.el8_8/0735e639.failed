net: stmmac: skip only stmmac_ptp_register when resume from suspend

jira LE-1907
Rebuild_History Non-Buildable kernel-rt-4.18.0-477.10.1.rt7.274.el8_8
commit-author Mohammad Athari Bin Ismail <mohammad.athari.ismail@intel.com>
commit 0735e639f129dff455aeb91da291f5c578cc33db
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-rt-4.18.0-477.10.1.rt7.274.el8_8/0735e639.failed

When resume from suspend, besides skipping PTP registration, it also
skipping PTP HW initialization. This could cause PTP clock not able to
operate properly when resume from suspend.

To fix this, only stmmac_ptp_register() is skipped when resume from
suspend.

Fixes: fe1319291150 ("stmmac: Don't init ptp again when resume from suspend/hibernation")
	Cc: <stable@vger.kernel.org> # 5.15.x
	Signed-off-by: Mohammad Athari Bin Ismail <mohammad.athari.ismail@intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0735e639f129dff455aeb91da291f5c578cc33db)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
diff --cc drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
index f83cf7fce5e6,639a753266e6..000000000000
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
@@@ -2815,6 -3240,7 +2813,10 @@@ static int stmmac_fpe_start_wq(struct s
  /**
   * stmmac_hw_setup - setup mac in a usable state.
   *  @dev : pointer to the device structure.
++<<<<<<< HEAD
++=======
+  *  @ptp_register: register PTP if set
++>>>>>>> 0735e639f129 (net: stmmac: skip only stmmac_ptp_register when resume from suspend)
   *  Description:
   *  this is the main function to setup the HW in a usable state because the
   *  dma engine is reset, the core registers are configured (e.g. AXI,
* Unmerged path drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
