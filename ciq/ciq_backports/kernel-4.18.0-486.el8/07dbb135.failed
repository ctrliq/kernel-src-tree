md: Free writes_pending in md_stop

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-486.el8
commit-author Xiao Ni <xni@redhat.com>
commit 07dbb13542cc022677b64acc6e0bd0d8a2cbf4dc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-486.el8/07dbb135.failed

dm raid calls md_stop to stop the raid device. It needs to
free the writes_pending here.

	Signed-off-by: Xiao Ni <xni@redhat.com>
	Signed-off-by: Song Liu <song@kernel.org>
(cherry picked from commit 07dbb13542cc022677b64acc6e0bd0d8a2cbf4dc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.c
diff --cc drivers/md/md.c
index 61becfcdd730,0cf340243ddb..000000000000
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@@ -6357,6 -6265,8 +6357,11 @@@ void md_stop(struct mddev *mddev
  	 */
  	__md_stop_writes(mddev);
  	__md_stop(mddev);
++<<<<<<< HEAD
++=======
+ 	percpu_ref_exit(&mddev->writes_pending);
+ 	percpu_ref_exit(&mddev->active_io);
++>>>>>>> 07dbb13542cc (md: Free writes_pending in md_stop)
  	bioset_exit(&mddev->bio_set);
  	bioset_exit(&mddev->sync_set);
  }
* Unmerged path drivers/md/md.c
