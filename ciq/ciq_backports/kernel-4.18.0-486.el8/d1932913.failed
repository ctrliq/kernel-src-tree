md: Factor out is_md_suspended helper

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-486.el8
commit-author Xiao Ni <xni@redhat.com>
commit d19329133d25ad3dc32f8a62635692cb2f189014
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-486.el8/d1932913.failed

This helper function will be used in next patch. It's easy for
understanding.

	Signed-off-by: Xiao Ni <xni@redhat.com>
	Signed-off-by: Song Liu <song@kernel.org>
(cherry picked from commit d19329133d25ad3dc32f8a62635692cb2f189014)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.c
diff --cc drivers/md/md.c
index 61becfcdd730,5ec9fdd5e668..000000000000
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@@ -378,28 -380,13 +378,38 @@@ EXPORT_SYMBOL_GPL(md_new_event)
  static LIST_HEAD(all_mddevs);
  static DEFINE_SPINLOCK(all_mddevs_lock);
  
++<<<<<<< HEAD
 +/*
 + * iterates through all used mddevs in the system.
 + * We take care to grab the all_mddevs_lock whenever navigating
 + * the list, and to always hold a refcount when unlocked.
 + * Any code which breaks out of this loop while own
 + * a reference to the current mddev and must mddev_put it.
 + */
 +#define for_each_mddev(_mddev,_tmp)					\
 +									\
 +	for (({ spin_lock(&all_mddevs_lock);				\
 +		_tmp = all_mddevs.next;					\
 +		_mddev = NULL;});					\
 +	     ({ if (_tmp != &all_mddevs)				\
 +			mddev_get(list_entry(_tmp, struct mddev, all_mddevs));\
 +		spin_unlock(&all_mddevs_lock);				\
 +		if (_mddev) mddev_put(_mddev);				\
 +		_mddev = list_entry(_tmp, struct mddev, all_mddevs);	\
 +		_tmp != &all_mddevs;});					\
 +	     ({ spin_lock(&all_mddevs_lock);				\
 +		_tmp = _tmp->next;})					\
 +		)
 +
++=======
+ static bool is_md_suspended(struct mddev *mddev)
+ {
+ 	if (mddev->suspended)
+ 		return true;
+ 	else
+ 		return false;
+ }
++>>>>>>> d19329133d25 (md: Factor out is_md_suspended helper)
  /* Rather than calling directly into the personality make_request function,
   * IO requests come here first so that we can check if the device is
   * being suspended pending a reconfiguration.
* Unmerged path drivers/md/md.c
