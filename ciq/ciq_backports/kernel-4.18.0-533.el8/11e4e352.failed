trace/osnoise: make use of the helper function kthread_run_on_cpu()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-533.el8
commit-author Cai Huoqing <caihuoqing@baidu.com>
commit 11e4e3523da98c065a6c249013ace0d388e41c25
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-533.el8/11e4e352.failed

Replace kthread_create_on_cpu/wake_up_process() with kthread_run_on_cpu()
to simplify the code.

Link: https://lkml.kernel.org/r/20211022025711.3673-6-caihuoqing@baidu.com
	Signed-off-by: Cai Huoqing <caihuoqing@baidu.com>
	Cc: Bernard Metzler <bmt@zurich.ibm.com>
	Cc: Daniel Bristot de Oliveira <bristot@kernel.org>
	Cc: Davidlohr Bueso <dave@stgolabs.net>
	Cc: Doug Ledford <dledford@redhat.com>
	Cc: Ingo Molnar <mingo@redhat.com>
	Cc: Jason Gunthorpe <jgg@ziepe.ca>
	Cc: Joel Fernandes (Google) <joel@joelfernandes.org>
	Cc: Josh Triplett <josh@joshtriplett.org>
	Cc: Lai Jiangshan <jiangshanlai@gmail.com>
	Cc: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
	Cc: "Paul E . McKenney" <paulmck@kernel.org>
	Cc: Steven Rostedt <rostedt@goodmis.org>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 11e4e3523da98c065a6c249013ace0d388e41c25)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/trace/trace_osnoise.c
diff --cc kernel/trace/trace_osnoise.c
index cb66ffadc99e,89d6cbac6f10..000000000000
--- a/kernel/trace/trace_osnoise.c
+++ b/kernel/trace/trace_osnoise.c
@@@ -1831,7 -1701,7 +1831,11 @@@ static int start_kthread(unsigned int c
  		snprintf(comm, 24, "osnoise/%d", cpu);
  	}
  
++<<<<<<< HEAD
 +	kthread = kthread_create_on_cpu(func, NULL, cpu, comm);
++=======
+ 	kthread = kthread_run_on_cpu(main, NULL, cpu, comm);
++>>>>>>> 11e4e3523da9 (trace/osnoise: make use of the helper function kthread_run_on_cpu())
  
  	if (IS_ERR(kthread)) {
  		pr_err(BANNER "could not start sampling thread\n");
* Unmerged path kernel/trace/trace_osnoise.c
