ice: xsk: fix GCC version checking against pragma unroll presence

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-505.el8
commit-author Maciej Fijalkowski <maciej.fijalkowski@intel.com>
commit 13d04d79701ba240969b296903de14db3734ab25
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-505.el8/13d04d79.failed

Pragma unroll was introduced around GCC 8, whereas current xsk code in
ice that prepares loop_unrolled_for macro that is based on mentioned
pragma, compares GCC version against 4, which is wrong and Stephen
found this out by compiling kernel with GCC 5.4 [0].

Fix this mistake and check if GCC version is >= 8.

[0]: https://lore.kernel.org/netdev/20220307213659.47658125@canb.auug.org.au/

Fixes: 126cdfe1007a ("ice: xsk: Improve AF_XDP ZC Tx and use batching API")
	Reported-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Maciej Fijalkowski <maciej.fijalkowski@intel.com>
Link: https://lore.kernel.org/r/20220307231353.56638-1-maciej.fijalkowski@intel.com
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 13d04d79701ba240969b296903de14db3734ab25)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ice/ice_xsk.h
diff --cc drivers/net/ethernet/intel/ice/ice_xsk.h
index b3ac44b46c90,123bb98ebfbe..000000000000
--- a/drivers/net/ethernet/intel/ice/ice_xsk.h
+++ b/drivers/net/ethernet/intel/ice/ice_xsk.h
@@@ -4,6 -4,17 +4,20 @@@
  #ifndef _ICE_XSK_H_
  #define _ICE_XSK_H_
  #include "ice_txrx.h"
++<<<<<<< HEAD
++=======
+ #include "ice.h"
+ 
+ #define PKTS_PER_BATCH 8
+ 
+ #ifdef __clang__
+ #define loop_unrolled_for _Pragma("clang loop unroll_count(8)") for
+ #elif __GNUC__ >= 8
+ #define loop_unrolled_for _Pragma("GCC unroll 8") for
+ #else
+ #define loop_unrolled_for for
+ #endif
++>>>>>>> 13d04d79701b (ice: xsk: fix GCC version checking against pragma unroll presence)
  
  struct ice_vsi;
  
* Unmerged path drivers/net/ethernet/intel/ice/ice_xsk.h
