ice: xsk: do not clear status_error0 for ntu + nb_buffs descriptor

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-505.el8
commit-author Maciej Fijalkowski <maciej.fijalkowski@intel.com>
commit 8b51a13c37c24c08e488bd58303cb437814f4454
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-505.el8/8b51a13c.failed

The descriptor that ntu is pointing at when we exit
ice_alloc_rx_bufs_zc() should not have its corresponding DD bit cleared
as descriptor is not allocated in there and it is not valid for HW
usage.

The allocation routine at the entry will fill the descriptor that ntu
points to after it was set to ntu + nb_buffs on previous call.

Even the spec says:
"The tail pointer should be set to one descriptor beyond the last empty
descriptor in host descriptor ring."

Therefore, step away from clearing the status_error0 on ntu + nb_buffs
descriptor.

Fixes: db804cfc21e9 ("ice: Use the xsk batched rx allocation interface")
	Reported-by: Elza Mathew <elza.mathew@intel.com>
	Signed-off-by: Maciej Fijalkowski <maciej.fijalkowski@intel.com>
	Tested-by: Kiran Bhandare <kiranx.bhandare@intel.com>
	Signed-off-by: Tony Nguyen <anthony.l.nguyen@intel.com>
(cherry picked from commit 8b51a13c37c24c08e488bd58303cb437814f4454)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ice/ice_xsk.c
diff --cc drivers/net/ethernet/intel/ice/ice_xsk.c
index 71d9a26e480a,ffa9a160766a..000000000000
--- a/drivers/net/ethernet/intel/ice/ice_xsk.c
+++ b/drivers/net/ethernet/intel/ice/ice_xsk.c
@@@ -460,22 -392,15 +460,32 @@@ bool ice_alloc_rx_bufs_zc(struct ice_rx
  
  		rx_desc++;
  		xdp++;
 +		ntu++;
 +
 +		if (unlikely(ntu == rx_ring->count)) {
 +			rx_desc = ICE_RX_DESC(rx_ring, 0);
 +			xdp = rx_ring->xdp_buf;
 +			ntu = 0;
 +		}
 +	} while (--count);
 +
 +	if (rx_ring->next_to_use != ntu) {
 +		/* clear the status bits for the next_to_use descriptor */
 +		rx_desc->wb.status_error0 = 0;
 +		ice_release_rx_desc(rx_ring, ntu);
  	}
  
++<<<<<<< HEAD
 +	return ok;
++=======
+ 	ntu += nb_buffs;
+ 	if (ntu == rx_ring->count)
+ 		ntu = 0;
+ 
+ 	ice_release_rx_desc(rx_ring, ntu);
+ 
+ 	return count == nb_buffs;
++>>>>>>> 8b51a13c37c2 (ice: xsk: do not clear status_error0 for ntu + nb_buffs descriptor)
  }
  
  /**
* Unmerged path drivers/net/ethernet/intel/ice/ice_xsk.c
