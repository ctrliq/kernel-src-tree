mxser: introduce enum mxser_must_hwid

jira LE-1907
cve CVE-2023-6546
Rebuild_History Non-Buildable kernel-4.18.0-541.el8
commit-author Jiri Slaby <jslaby@suse.cz>
commit e45583668e0313c422c650d5da11405624cf547c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-541.el8/e4558366.failed

Provided the MUST HW ID is an enumeration, define one (enum
mxser_must_hwid) and use it in the code.

	Signed-off-by: Jiri Slaby <jslaby@suse.cz>
Link: https://lore.kernel.org/r/20210618061516.662-9-jslaby@suse.cz
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit e45583668e0313c422c650d5da11405624cf547c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/tty/mxser.c
diff --cc drivers/tty/mxser.c
index d6e332ef223d,558bd4140ee1..000000000000
--- a/drivers/tty/mxser.c
+++ b/drivers/tty/mxser.c
@@@ -198,18 -192,14 +193,27 @@@
  #define PCI_DEVICE_ID_CB134I	0x1341
  #define PCI_DEVICE_ID_CP138U	0x1380
  
 +
++<<<<<<< HEAD
 +#define C168_ASIC_ID    1
 +#define C104_ASIC_ID    2
 +#define C102_ASIC_ID	0xB
 +#define CI132_ASIC_ID	4
 +#define CI134_ASIC_ID	3
 +#define CI104J_ASIC_ID  5
 +
  #define MXSER_HIGHBAUD	1
 +#define MXSER_HAS2	2
  
 +/* This is only for PCI */
++=======
+ enum mxser_must_hwid {
+ 	MOXA_OTHER_UART		= 0x00,
+ 	MOXA_MUST_MU150_HWID	= 0x01,
+ 	MOXA_MUST_MU860_HWID	= 0x02,
+ };
+ 
++>>>>>>> e45583668e03 (mxser: introduce enum mxser_must_hwid)
  static const struct {
  	u8 type;
  	u8 fifo_size;
@@@ -390,7 -371,7 +394,11 @@@ struct mxser_board 
  	unsigned long vector;
  	unsigned long vector_mask;
  
++<<<<<<< HEAD
 +	int chip_flag;
++=======
+ 	enum mxser_must_hwid must_hwid;
++>>>>>>> e45583668e03 (mxser: introduce enum mxser_must_hwid)
  	int uart_type;
  
  	struct mxser_port ports[MXSER_PORTS_PER_BOARD];
@@@ -607,8 -584,7 +615,12 @@@ static void mxser_disable_must_rx_softw
  	outb(oldlcr, baseio + UART_LCR);
  }
  
++<<<<<<< HEAD
 +#ifdef CONFIG_PCI
 +static int CheckIsMoxaMust(unsigned long io)
++=======
+ static enum mxser_must_hwid mxser_must_get_hwid(unsigned long io)
++>>>>>>> e45583668e03 (mxser: introduce enum mxser_must_hwid)
  {
  	u8 oldmcr, hwid;
  	int i;
@@@ -624,13 -600,12 +636,13 @@@
  	}
  
  	mxser_get_must_hardware_id(io, &hwid);
- 	for (i = 1; i < UART_INFO_NUM; i++) { /* 0 = OTHER_UART */
+ 	for (i = 1; i < UART_INFO_NUM; i++) /* 0 = OTHER_UART */
  		if (hwid == Gpci_uart_info[i].type)
- 			return (int)hwid;
- 	}
+ 			return hwid;
+ 
  	return MOXA_OTHER_UART;
  }
 +#endif
  
  static void process_txrx_fifo(struct mxser_port *info)
  {
* Unmerged path drivers/tty/mxser.c
