dm: add cond_resched() to dm_wq_work()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-489.el8
commit-author Pingfan Liu <piliu@redhat.com>
commit 0ca44fcef241768fd25ee763b3d203b9852f269b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-489.el8/0ca44fce.failed

Otherwise the while() loop in dm_wq_work() can result in a "dead
loop" on systems that have preemption disabled. This is particularly
problematic on single cpu systems.

	Cc: stable@vger.kernel.org
	Signed-off-by: Pingfan Liu <piliu@redhat.com>
	Acked-by: Ming Lei <ming.lei@redhat.com>
	Signed-off-by: Mike Snitzer <snitzer@kernel.org>
(cherry picked from commit 0ca44fcef241768fd25ee763b3d203b9852f269b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/dm.c
diff --cc drivers/md/dm.c
index a7232c9f4766,15b91959e433..000000000000
--- a/drivers/md/dm.c
+++ b/drivers/md/dm.c
@@@ -2439,7 -2569,8 +2439,12 @@@ static void dm_wq_work(struct work_stru
  		if (!bio)
  			break;
  
++<<<<<<< HEAD
 +		generic_make_request(bio);
++=======
+ 		submit_bio_noacct(bio);
+ 		cond_resched();
++>>>>>>> 0ca44fcef241 (dm: add cond_resched() to dm_wq_work())
  	}
  }
  
* Unmerged path drivers/md/dm.c
