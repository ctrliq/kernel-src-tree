selftests: tc-testing: add tunnel_key "nofrag" test case

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-489.el8
commit-author Davide Caratti <dcaratti@redhat.com>
commit b8617f8eed84e12c26f2220733280187466a0615
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-489.el8/b8617f8e.failed

# ./tdc.py -e 6bda -l
 6bda: (actions, tunnel_key) Add tunnel_key action with nofrag option

	Acked-by: Jamal Hadi Salim <jhs@mojatatu.com>
	Signed-off-by: Davide Caratti <dcaratti@redhat.com>
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit b8617f8eed84e12c26f2220733280187466a0615)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/tc-testing/tc-tests/actions/tunnel_key.json
diff --cc tools/testing/selftests/tc-testing/tc-tests/actions/tunnel_key.json
index d06346968bcb,b5b47fbf6c00..000000000000
--- a/tools/testing/selftests/tc-testing/tc-tests/actions/tunnel_key.json
+++ b/tools/testing/selftests/tc-testing/tc-tests/actions/tunnel_key.json
@@@ -933,5 -933,80 +933,83 @@@
          "teardown": [
              "$TC actions flush action tunnel_key"
          ]
++<<<<<<< HEAD
++=======
+     },
+     {
+         "id": "3671",
+         "name": "Delete tunnel_key set action with valid index",
+ 	"category": [
+             "actions",
+             "tunnel_key"
+         ],
+         "setup": [
+             [
+                 "$TC actions flush action tunnel_key",
+                 0,
+                 1,
+                 255
+             ],
+ 	    "$TC actions add action tunnel_key set src_ip 1.1.1.1 dst_ip 2.2.2.2 index 1"
+         ],
+         "cmdUnderTest": "$TC actions del action tunnel_key index 1",
+         "expExitCode": "0",
+         "verifyCmd": "$TC actions list action tunnel_key",
+         "matchPattern": "action order [0-9]+: tunnel_key.*set.*src_ip 1.1.1.1.*dst_ip 2.2.2.2.*index 1",
+         "matchCount": "0",
+         "teardown": [
+             "$TC actions flush action tunnel_key"
+         ]
+     },
+     {
+         "id": "8597",
+         "name": "Delete tunnel_key set action with invalid index",
+         "category": [
+             "actions",
+             "tunnel_key"
+         ],
+         "setup": [
+             [
+                 "$TC actions flush action tunnel_key",
+                 0,
+                 1,
+                 255
+             ],
+             "$TC actions add action tunnel_key set src_ip 1.1.1.1 dst_ip 2.2.2.2 index 1"
+         ],
+         "cmdUnderTest": "$TC actions del action tunnel_key index 10",
+         "expExitCode": "255",
+         "verifyCmd": "$TC actions list action tunnel_key",
+         "matchPattern": "action order [0-9]+: tunnel_key.*set.*src_ip 1.1.1.1.*dst_ip 2.2.2.2.*index 1",
+         "matchCount": "1",
+         "teardown": [
+             "$TC actions flush action tunnel_key"
+         ]
+     },
+     {
+         "id": "6bda",
+         "name": "Add tunnel_key action with nofrag option",
+         "category": [
+             "actions",
+             "tunnel_key"
+         ],
+         "dependsOn": "$TC actions add action tunnel_key help 2>&1 | grep -q nofrag",
+         "setup": [
+             [
+                 "$TC action flush action tunnel_key",
+                 0,
+                 1,
+                 255
+             ]
+         ],
+         "cmdUnderTest": "$TC actions add action tunnel_key set src_ip 10.10.10.1 dst_ip 10.10.10.2 id 1111 nofrag index 222",
+         "expExitCode": "0",
+         "verifyCmd": "$TC actions get action tunnel_key index 222",
+         "matchPattern": "action order [0-9]+: tunnel_key.*src_ip 10.10.10.1.*dst_ip 10.10.10.2.*key_id 1111.*csum.*nofrag pipe.*index 222",
+         "matchCount": "1",
+         "teardown": [
+             "$TC actions flush action tunnel_key"
+         ]
++>>>>>>> b8617f8eed84 (selftests: tc-testing: add tunnel_key "nofrag" test case)
      }
  ]
* Unmerged path tools/testing/selftests/tc-testing/tc-tests/actions/tunnel_key.json
