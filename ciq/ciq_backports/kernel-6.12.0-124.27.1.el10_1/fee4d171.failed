arm64: errata: Add missing sentinels to Spectre-BHB MIDR arrays

jira KERNEL-452
Rebuild_History Non-Buildable kernel-6.12.0-124.27.1.el10_1
commit-author Will Deacon <will@kernel.org>
commit fee4d171451c1ad9e8aaf65fc0ab7d143a33bd72
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-6.12.0-124.27.1.el10_1/fee4d171.failed

Commit a5951389e58d ("arm64: errata: Add newer ARM cores to the
spectre_bhb_loop_affected() lists") added some additional CPUs to the
Spectre-BHB workaround, including some new arrays for designs that
require new 'k' values for the workaround to be effective.

Unfortunately, the new arrays omitted the sentinel entry and so
is_midr_in_range_list() will walk off the end when it doesn't find a
match. With UBSAN enabled, this leads to a crash during boot when
is_midr_in_range_list() is inlined (which was more common prior to
c8c2647e69be ("arm64: Make Â _midr_in_range_list() an exported
function")):

 |  Internal error: aarch64 BRK: 00000000f2000001 [#1] PREEMPT SMP
 |  pstate: 804000c5 (Nzcv daIF +PAN -UAO -TCO -DIT -SSBS BTYPE=--)
 |  pc : spectre_bhb_loop_affected+0x28/0x30
 |  lr : is_spectre_bhb_affected+0x170/0x190
 | [...]
 |  Call trace:
 |   spectre_bhb_loop_affected+0x28/0x30
 |   update_cpu_capabilities+0xc0/0x184
 |   init_cpu_features+0x188/0x1a4
 |   cpuinfo_store_boot_cpu+0x4c/0x60
 |   smp_prepare_boot_cpu+0x38/0x54
 |   start_kernel+0x8c/0x478
 |   __primary_switched+0xc8/0xd4
 |  Code: 6b09011f 54000061 52801080 d65f03c0 (d4200020)
 |  ---[ end trace 0000000000000000 ]---
 |  Kernel panic - not syncing: aarch64 BRK: Fatal exception

Add the missing sentinel entries.

	Cc: Lee Jones <lee@kernel.org>
	Cc: James Morse <james.morse@arm.com>
	Cc: Doug Anderson <dianders@chromium.org>
	Cc: Shameer Kolothum <shameerali.kolothum.thodi@huawei.com>
	Cc: <stable@vger.kernel.org>
	Reported-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Fixes: a5951389e58d ("arm64: errata: Add newer ARM cores to the spectre_bhb_loop_affected() lists")
	Signed-off-by: Will Deacon <will@kernel.org>
	Reviewed-by: Lee Jones <lee@kernel.org>
	Reviewed-by: Douglas Anderson <dianders@chromium.org>
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Link: https://lore.kernel.org/r/20250501104747.28431-1-will@kernel.org
	Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
(cherry picked from commit fee4d171451c1ad9e8aaf65fc0ab7d143a33bd72)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm64/kernel/proton-pack.c
diff --cc arch/arm64/kernel/proton-pack.c
index b168592ef505,b607f6dfc5e6..000000000000
--- a/arch/arm64/kernel/proton-pack.c
+++ b/arch/arm64/kernel/proton-pack.c
@@@ -876,6 -876,16 +876,19 @@@ static u8 spectre_bhb_loop_affected(voi
  {
  	u8 k = 0;
  
++<<<<<<< HEAD
++=======
+ 	static const struct midr_range spectre_bhb_k132_list[] = {
+ 		MIDR_ALL_VERSIONS(MIDR_CORTEX_X3),
+ 		MIDR_ALL_VERSIONS(MIDR_NEOVERSE_V2),
+ 		{},
+ 	};
+ 	static const struct midr_range spectre_bhb_k38_list[] = {
+ 		MIDR_ALL_VERSIONS(MIDR_CORTEX_A715),
+ 		MIDR_ALL_VERSIONS(MIDR_CORTEX_A720),
+ 		{},
+ 	};
++>>>>>>> fee4d171451c (arm64: errata: Add missing sentinels to Spectre-BHB MIDR arrays)
  	static const struct midr_range spectre_bhb_k32_list[] = {
  		MIDR_ALL_VERSIONS(MIDR_CORTEX_A78),
  		MIDR_ALL_VERSIONS(MIDR_CORTEX_A78AE),
* Unmerged path arch/arm64/kernel/proton-pack.c
