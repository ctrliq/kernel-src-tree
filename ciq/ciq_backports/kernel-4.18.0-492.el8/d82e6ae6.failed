iommu/vt-d: Remove include/linux/intel-svm.h

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-492.el8
commit-author Lu Baolu <baolu.lu@linux.intel.com>
commit d82e6ae67ac2f9d6ba51690353c477b340bba6b5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-492.el8/d82e6ae6.failed

There's no need to have a public header for Intel SVA implementation.
The device driver should interact with Intel SVA implementation via
the IOMMU generic APIs.

	Reviewed-by: Kevin Tian <kevin.tian@intel.com>
	Signed-off-by: Lu Baolu <baolu.lu@linux.intel.com>
Link: https://lore.kernel.org/r/20230109014955.147068-2-baolu.lu@linux.intel.com
	Signed-off-by: Joerg Roedel <jroedel@suse.de>
(cherry picked from commit d82e6ae67ac2f9d6ba51690353c477b340bba6b5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	MAINTAINERS
#	drivers/iommu/intel/iommu.c
#	include/linux/intel-svm.h
diff --cc MAINTAINERS
index 6eb1ef22b77c,43fd97f0e1df..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -7519,13 -10459,6 +7519,16 @@@ L:	iommu@lists.linux-foundation.or
  S:	Supported
  T:	git git://git.kernel.org/pub/scm/linux/kernel/git/joro/iommu.git
  F:	drivers/iommu/intel/
++<<<<<<< HEAD
 +F:	include/linux/intel-iommu.h
 +F:	include/linux/intel-svm.h
++=======
++>>>>>>> d82e6ae67ac2 (iommu/vt-d: Remove include/linux/intel-svm.h)
 +
 +INTEL IOP-ADMA DMA DRIVER
 +R:	Dan Williams <dan.j.williams@intel.com>
 +S:	Odd fixes
 +F:	drivers/dma/iop-adma.c
  
  INTEL IPU3 CSI-2 CIO2 DRIVER
  M:	Yong Zhi <yong.zhi@intel.com>
diff --cc drivers/iommu/intel/iommu.c
index f0fc05a5205e,317af67b6098..000000000000
--- a/drivers/iommu/intel/iommu.c
+++ b/drivers/iommu/intel/iommu.c
@@@ -21,42 -13,20 +21,51 @@@
  #define pr_fmt(fmt)     "DMAR: " fmt
  #define dev_fmt(fmt)    pr_fmt(fmt)
  
++<<<<<<< HEAD
 +#include <linux/init.h>
 +#include <linux/bitmap.h>
 +#include <linux/debugfs.h>
 +#include <linux/export.h>
 +#include <linux/slab.h>
 +#include <linux/irq.h>
 +#include <linux/interrupt.h>
++=======
+ #include <linux/crash_dump.h>
+ #include <linux/dma-direct.h>
+ #include <linux/dmi.h>
+ #include <linux/memory.h>
+ #include <linux/pci.h>
+ #include <linux/pci-ats.h>
++>>>>>>> d82e6ae67ac2 (iommu/vt-d: Remove include/linux/intel-svm.h)
  #include <linux/spinlock.h>
 +#include <linux/pci.h>
 +#include <linux/dmar.h>
 +#include <linux/dma-map-ops.h>
 +#include <linux/mempool.h>
 +#include <linux/memory.h>
 +#include <linux/cpu.h>
 +#include <linux/timer.h>
 +#include <linux/io.h>
 +#include <linux/iova.h>
 +#include <linux/iommu.h>
 +#include <linux/dma-iommu.h>
 +#include <linux/intel-iommu.h>
 +#include <linux/intel-svm.h>
  #include <linux/syscore_ops.h>
  #include <linux/tboot.h>
 +#include <linux/dmi.h>
 +#include <linux/pci-ats.h>
 +#include <linux/memblock.h>
 +#include <linux/dma-contiguous.h>
 +#include <linux/dma-direct.h>
 +#include <linux/crash_dump.h>
 +#include <linux/numa.h>
 +#include <asm/irq_remapping.h>
 +#include <asm/cacheflush.h>
 +#include <asm/iommu.h>
  
 -#include "iommu.h"
 -#include "../dma-iommu.h"
  #include "../irq_remapping.h"
 -#include "../iommu-sva.h"
 +#include "../iommu-sva-lib.h"
  #include "pasid.h"
  #include "cap_audit.h"
  
* Unmerged path include/linux/intel-svm.h
* Unmerged path MAINTAINERS
* Unmerged path drivers/iommu/intel/iommu.c
diff --git a/drivers/iommu/intel/svm.c b/drivers/iommu/intel/svm.c
index fe5757ae6e60..aca5d2f38c3d 100644
--- a/drivers/iommu/intel/svm.c
+++ b/drivers/iommu/intel/svm.c
@@ -18,7 +18,6 @@
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
 #include <linux/slab.h>
-#include <linux/intel-svm.h>
 #include <linux/rculist.h>
 #include <linux/pci.h>
 #include <linux/pci-ats.h>
diff --git a/include/linux/intel-iommu.h b/include/linux/intel-iommu.h
index b9494fd422a2..5b374e8ba3ac 100644
--- a/include/linux/intel-iommu.h
+++ b/include/linux/intel-iommu.h
@@ -447,6 +447,11 @@ struct q_inval {
 	int             free_cnt;
 };
 
+/* Page Request Queue depth */
+#define PRQ_ORDER	4
+#define PRQ_RING_MASK	((0x1000 << PRQ_ORDER) - 0x20)
+#define PRQ_DEPTH	((0x1000 << PRQ_ORDER) >> 5)
+
 struct dmar_pci_notify_info;
 
 #ifdef CONFIG_IRQ_REMAP
* Unmerged path include/linux/intel-svm.h
