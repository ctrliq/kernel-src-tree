ASoC: Intel: sof_nau8825: add variant with nau8318 amplifier.

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-499.el8
commit-author Ajye Huang <ajye_huang@compal.corp-partner.google.com>
commit ba7523bb0f494fc440d3a9bb0b665cfcaa192d0c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-499.el8/ba7523bb.failed

This patch adds the driver data for two nau8318 speaker amplifiers on
SSP1 and nau8825 on SSP0 for ADL platform.

The nau8315 and nau8318 are both Nuvoton Amp chips. They use the same
Amp driver nau8315.c. The acpi_device_id for nau8315 is "NVTN2010",
for nau8318 is "NVTN2012".
The nau8825 is one of Nuvoton headset codec, and its acpi_device_id is
"10508825".

	Signed-off-by: Ajye Huang <ajye_huang@compal.corp-partner.google.com>
	Acked-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20221222042624.557869-1-ajye_huang@compal.corp-partner.google.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit ba7523bb0f494fc440d3a9bb0b665cfcaa192d0c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/sof_nau8825.c
#	sound/soc/intel/common/soc-acpi-intel-adl-match.c
diff --cc sound/soc/intel/boards/sof_nau8825.c
index 6bdcac7a7308,78d84527081a..000000000000
--- a/sound/soc/intel/boards/sof_nau8825.c
+++ b/sound/soc/intel/boards/sof_nau8825.c
@@@ -47,6 -47,8 +47,11 @@@
  #define SOF_RT1019P_SPEAKER_AMP_PRESENT	BIT(14)
  #define SOF_MAX98373_SPEAKER_AMP_PRESENT	BIT(15)
  #define SOF_MAX98360A_SPEAKER_AMP_PRESENT	BIT(16)
++<<<<<<< HEAD
++=======
+ #define SOF_RT1015P_SPEAKER_AMP_PRESENT	BIT(17)
+ #define SOF_NAU8318_SPEAKER_AMP_PRESENT	BIT(18)
++>>>>>>> ba7523bb0f49 (ASoC: Intel: sof_nau8825: add variant with nau8318 amplifier.)
  
  static unsigned long sof_nau8825_quirk = SOF_NAU8825_SSP_CODEC(0);
  
@@@ -483,6 -492,13 +495,16 @@@ static struct snd_soc_dai_link *sof_car
  		} else if (sof_nau8825_quirk &
  				SOF_MAX98360A_SPEAKER_AMP_PRESENT) {
  			max_98360a_dai_link(&links[id]);
++<<<<<<< HEAD
++=======
+ 		} else if (sof_nau8825_quirk & SOF_RT1015P_SPEAKER_AMP_PRESENT) {
+ 			sof_rt1015p_dai_link(&links[id]);
+ 		} else if (sof_nau8825_quirk &
+ 				SOF_NAU8318_SPEAKER_AMP_PRESENT) {
+ 			links[id].codecs = nau8318_components;
+ 			links[id].num_codecs = ARRAY_SIZE(nau8318_components);
+ 			links[id].init = speaker_codec_init;
++>>>>>>> ba7523bb0f49 (ASoC: Intel: sof_nau8825: add variant with nau8318 amplifier.)
  		} else {
  			goto devm_err;
  		}
@@@ -642,6 -660,26 +664,29 @@@ static const struct platform_device_id 
  					SOF_SSP_BT_OFFLOAD_PRESENT),
  
  	},
++<<<<<<< HEAD
++=======
+ 	{
+ 		.name = "adl_rt1015p_nau8825",
+ 		.driver_data = (kernel_ulong_t)(SOF_NAU8825_SSP_CODEC(0) |
+ 					SOF_SPEAKER_AMP_PRESENT |
+ 					SOF_RT1015P_SPEAKER_AMP_PRESENT |
+ 					SOF_NAU8825_SSP_AMP(1) |
+ 					SOF_NAU8825_NUM_HDMIDEV(4) |
+ 					SOF_BT_OFFLOAD_SSP(2) |
+ 					SOF_SSP_BT_OFFLOAD_PRESENT),
+ 	},
+ 	{
+ 		.name = "adl_nau8318_8825",
+ 		.driver_data = (kernel_ulong_t)(SOF_NAU8825_SSP_CODEC(0) |
+ 					SOF_SPEAKER_AMP_PRESENT |
+ 					SOF_NAU8318_SPEAKER_AMP_PRESENT |
+ 					SOF_NAU8825_SSP_AMP(1) |
+ 					SOF_NAU8825_NUM_HDMIDEV(4) |
+ 					SOF_BT_OFFLOAD_SSP(2) |
+ 					SOF_SSP_BT_OFFLOAD_PRESENT),
+ 	},
++>>>>>>> ba7523bb0f49 (ASoC: Intel: sof_nau8825: add variant with nau8318 amplifier.)
  	{ }
  };
  MODULE_DEVICE_TABLE(platform, board_ids);
diff --cc sound/soc/intel/common/soc-acpi-intel-adl-match.c
index 3ca0a96d94de,b1c0a89a8787..000000000000
--- a/sound/soc/intel/common/soc-acpi-intel-adl-match.c
+++ b/sound/soc/intel/common/soc-acpi-intel-adl-match.c
@@@ -497,6 -507,20 +502,23 @@@ struct snd_soc_acpi_mach snd_soc_acpi_i
  	},
  	{
  		.id = "10508825",
++<<<<<<< HEAD
++=======
+ 		.drv_name = "adl_rt1015p_nau8825",
+ 		.machine_quirk = snd_soc_acpi_codec_list,
+ 		.quirk_data = &adl_rt1015p_amp,
+ 		.sof_tplg_filename = "sof-adl-rt1015-nau8825.tplg",
+ 	},
+ 	{
+ 		.id = "10508825",
+ 		.drv_name = "adl_nau8318_8825",
+ 		.machine_quirk = snd_soc_acpi_codec_list,
+ 		.quirk_data = &adl_nau8318_amp,
+ 		.sof_tplg_filename = "sof-adl-nau8318-nau8825.tplg",
+ 	},
+ 	{
+ 		.id = "10508825",
++>>>>>>> ba7523bb0f49 (ASoC: Intel: sof_nau8825: add variant with nau8318 amplifier.)
  		.drv_name = "sof_nau8825",
  		.sof_tplg_filename = "sof-adl-nau8825.tplg",
  	},
diff --git a/sound/soc/intel/boards/Kconfig b/sound/soc/intel/boards/Kconfig
index 9aee729c2406..99308ed85277 100644
--- a/sound/soc/intel/boards/Kconfig
+++ b/sound/soc/intel/boards/Kconfig
@@ -554,6 +554,7 @@ config SND_SOC_INTEL_SOF_NAU8825_MACH
 	select SND_SOC_RT1015P
 	select SND_SOC_MAX98373_I2C
 	select SND_SOC_MAX98357A
+	select SND_SOC_NAU8315
 	select SND_SOC_DMIC
 	select SND_SOC_HDAC_HDMI
 	select SND_SOC_INTEL_HDA_DSP_COMMON
* Unmerged path sound/soc/intel/boards/sof_nau8825.c
* Unmerged path sound/soc/intel/common/soc-acpi-intel-adl-match.c
