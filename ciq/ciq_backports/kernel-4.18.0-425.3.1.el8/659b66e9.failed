cpuidle: haltpoll: Call cpuidle_poll_state_init() later

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-425.3.1.el8
commit-author Li RongQing <lirongqing@baidu.com>
commit 659b66e98bb38dc6300dca3c9ebebeba194b575b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-425.3.1.el8/659b66e9.failed

Call cpuidle_poll_state_init() only if it is needed to avoid doing
useless work.

	Signed-off-by: Li RongQing <lirongqing@baidu.com>
[ rjw: Subject and changelog edits ]
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 659b66e98bb38dc6300dca3c9ebebeba194b575b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpuidle/cpuidle-haltpoll.c
diff --cc drivers/cpuidle/cpuidle-haltpoll.c
index 394ccd90711f,3a39a7f48b77..000000000000
--- a/drivers/cpuidle/cpuidle-haltpoll.c
+++ b/drivers/cpuidle/cpuidle-haltpoll.c
@@@ -110,9 -111,9 +110,13 @@@ static int __init haltpoll_init(void
  	if (!kvm_para_available() || !haltpoll_want())
  		return -ENODEV;
  
++<<<<<<< HEAD
 +	ret = rhel_cpuidle_register_driver_hpoll(drv);
++=======
+ 	cpuidle_poll_state_init(drv);
+ 
+ 	ret = cpuidle_register_driver(drv);
++>>>>>>> 659b66e98bb3 (cpuidle: haltpoll: Call cpuidle_poll_state_init() later)
  	if (ret < 0)
  		return ret;
  
* Unmerged path drivers/cpuidle/cpuidle-haltpoll.c
