ASoC: SOF: topology: Fix memory leak in sof_control_load()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-425.3.1.el8
commit-author Yu Liao <liaoyu15@huawei.com>
commit 9b91d0ece22b9ab37fc185511c7f992e51c93d6e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-425.3.1.el8/9b91d0ec.failed

scontrol doesn't get freed when kstrdup returns NULL.
Fix by free iscontrol in that case.

     scontrol = kzalloc(sizeof(*scontrol), GFP_KERNEL);
     if (!scontrol)
         return -ENOMEM;

     scontrol->name = kstrdup(hdr->name, GFP_KERNEL);
     if (!scontrol->name)
         return -ENOMEM;

	Signed-off-by: Yu Liao <liaoyu15@huawei.com>
Link: https://lore.kernel.org/r/20220318021616.2599630-1-liaoyu15@huawei.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 9b91d0ece22b9ab37fc185511c7f992e51c93d6e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/topology.c
diff --cc sound/soc/sof/topology.c
index 98443c24c00a,3e5b319b44c7..000000000000
--- a/sound/soc/sof/topology.c
+++ b/sound/soc/sof/topology.c
@@@ -1373,8 -903,16 +1373,17 @@@ static int sof_control_load(struct snd_
  	if (!scontrol)
  		return -ENOMEM;
  
++<<<<<<< HEAD
++=======
+ 	scontrol->name = kstrdup(hdr->name, GFP_KERNEL);
+ 	if (!scontrol->name) {
+ 		kfree(scontrol);
+ 		return -ENOMEM;
+ 	}
+ 
++>>>>>>> 9b91d0ece22b (ASoC: SOF: topology: Fix memory leak in sof_control_load())
  	scontrol->scomp = scomp;
  	scontrol->access = kc->access;
 -	scontrol->info_type = le32_to_cpu(hdr->ops.info);
 -	scontrol->index = kc->index;
  
  	switch (le32_to_cpu(hdr->ops.info)) {
  	case SND_SOC_TPLG_CTL_VOLSW:
* Unmerged path sound/soc/sof/topology.c
