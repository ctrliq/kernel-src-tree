net: Add notifications when multipath hash field change

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-425.3.1.el8
commit-author Ido Schimmel <idosch@nvidia.com>
commit eb0e4d59b6edbe678ecfc5d5b77608b634057f08
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-425.3.1.el8/eb0e4d59.failed

In-kernel notifications are already sent when the multipath hash policy
itself changes, but not when the multipath hash fields change.

Add these notifications, so that interested listeners (e.g., switch ASIC
drivers) could perform the necessary configuration.

	Signed-off-by: Ido Schimmel <idosch@nvidia.com>
	Reviewed-by: Petr Machata <petrm@nvidia.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit eb0e4d59b6edbe678ecfc5d5b77608b634057f08)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/sysctl_net_ipv4.c
#	net/ipv6/sysctl_net_ipv6.c
diff --cc net/ipv4/sysctl_net_ipv4.c
index 73ccfaaa3e67,4fa77f182dcb..000000000000
--- a/net/ipv4/sysctl_net_ipv4.c
+++ b/net/ipv4/sysctl_net_ipv4.c
@@@ -956,7 -1070,16 +972,20 @@@ static struct ctl_table ipv4_net_table[
  		.mode		= 0644,
  		.proc_handler	= proc_fib_multipath_hash_policy,
  		.extra1		= SYSCTL_ZERO,
++<<<<<<< HEAD
 +		.extra2		= SYSCTL_ONE,
++=======
+ 		.extra2		= &three,
+ 	},
+ 	{
+ 		.procname	= "fib_multipath_hash_fields",
+ 		.data		= &init_net.ipv4.sysctl_fib_multipath_hash_fields,
+ 		.maxlen		= sizeof(u32),
+ 		.mode		= 0644,
+ 		.proc_handler	= proc_fib_multipath_hash_fields,
+ 		.extra1		= SYSCTL_ONE,
+ 		.extra2		= &fib_multipath_hash_fields_all_mask,
++>>>>>>> eb0e4d59b6ed (net: Add notifications when multipath hash field change)
  	},
  #endif
  	{
diff --cc net/ipv6/sysctl_net_ipv6.c
index de15142a40ef,d7cf26f730d7..000000000000
--- a/net/ipv6/sysctl_net_ipv6.c
+++ b/net/ipv6/sysctl_net_ipv6.c
@@@ -148,7 -169,16 +164,20 @@@ static struct ctl_table ipv6_table_temp
  		.mode		= 0644,
  		.proc_handler   = proc_rt6_multipath_hash_policy,
  		.extra1		= SYSCTL_ZERO,
++<<<<<<< HEAD
 +		.extra2		= SYSCTL_ONE,
++=======
+ 		.extra2		= &three,
+ 	},
+ 	{
+ 		.procname	= "fib_multipath_hash_fields",
+ 		.data		= &init_net.ipv6.sysctl.multipath_hash_fields,
+ 		.maxlen		= sizeof(u32),
+ 		.mode		= 0644,
+ 		.proc_handler	= proc_rt6_multipath_hash_fields,
+ 		.extra1		= SYSCTL_ONE,
+ 		.extra2		= &rt6_multipath_hash_fields_all_mask,
++>>>>>>> eb0e4d59b6ed (net: Add notifications when multipath hash field change)
  	},
  	{
  		.procname	= "seg6_flowlabel",
* Unmerged path net/ipv4/sysctl_net_ipv4.c
* Unmerged path net/ipv6/sysctl_net_ipv6.c
