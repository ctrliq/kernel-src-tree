drm/i915: Check pipe source size when using skl+ scalers

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-502.el8
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 691248d4135fe3fae64b4ee0676bc96a7fd6950c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-502.el8/691248d4.failed

The skl+ scalers only sample 12 bits of PIPESRC so we can't
do any plane scaling at all when the pipe source size is >4k.

Make sure the pipe source size is also below the scaler's src
size limits. Might not be 100% accurate, but should at least be
safe. We can refine the limits later if we discover that recent
hw is less restricted.

	Cc: stable@vger.kernel.org
	Tested-by: Ross Zwisler <zwisler@google.com>
Closes: https://gitlab.freedesktop.org/drm/intel/-/issues/8357
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20230418175528.13117-2-ville.syrjala@linux.intel.com
	Reviewed-by: Jani Nikula <jani.nikula@intel.com>
(cherry picked from commit 691248d4135fe3fae64b4ee0676bc96a7fd6950c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/skl_scaler.c
diff --cc drivers/gpu/drm/i915/display/skl_scaler.c
index 4092679be21e,0e7e014fcc71..000000000000
--- a/drivers/gpu/drm/i915/display/skl_scaler.c
+++ b/drivers/gpu/drm/i915/display/skl_scaler.c
@@@ -101,6 -111,10 +101,13 @@@ skl_update_scaler(struct intel_crtc_sta
  	struct drm_i915_private *dev_priv = to_i915(crtc->base.dev);
  	const struct drm_display_mode *adjusted_mode =
  		&crtc_state->hw.adjusted_mode;
++<<<<<<< HEAD
++=======
+ 	int pipe_src_w = drm_rect_width(&crtc_state->pipe_src);
+ 	int pipe_src_h = drm_rect_height(&crtc_state->pipe_src);
+ 	int min_src_w, min_src_h, min_dst_w, min_dst_h;
+ 	int max_src_w, max_src_h, max_dst_w, max_dst_h;
++>>>>>>> 691248d4135f (drm/i915: Check pipe source size when using skl+ scalers)
  
  	/*
  	 * Src coordinates are already rotated by 270 degrees for
* Unmerged path drivers/gpu/drm/i915/display/skl_scaler.c
