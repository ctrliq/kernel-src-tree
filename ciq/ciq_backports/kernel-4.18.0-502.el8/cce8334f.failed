r8152: move setting r8153b_rx_agg_chg_indicate()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-502.el8
commit-author Hayes Wang <hayeswang@realtek.com>
commit cce8334f4aacd9936309a002d4a4de92a07cd2c2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-502.el8/cce8334f.failed

Move setting r8153b_rx_agg_chg_indicate() for 2.5G devices. The
r8153b_rx_agg_chg_indicate() has to be called after enabling tx/rx.
Otherwise, the coalescing settings are useless.

Fixes: 195aae321c82 ("r8152: support new chips")
	Signed-off-by: Hayes Wang <hayeswang@realtek.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit cce8334f4aacd9936309a002d4a4de92a07cd2c2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/usb/r8152.c
diff --cc drivers/net/usb/r8152.c
index 61715b889582,755b0f72dd44..000000000000
--- a/drivers/net/usb/r8152.c
+++ b/drivers/net/usb/r8152.c
@@@ -2801,11 -3027,16 +2801,22 @@@ static int rtl_enable(struct r8152 *tp
  	ocp_write_byte(tp, MCU_TYPE_PLA, PLA_CR, ocp_data);
  
  	switch (tp->version) {
++<<<<<<< HEAD
 +	case RTL_VER_08:
 +	case RTL_VER_09:
 +		r8153b_rx_agg_chg_indicate(tp);
++=======
+ 	case RTL_VER_01:
+ 	case RTL_VER_02:
+ 	case RTL_VER_03:
+ 	case RTL_VER_04:
+ 	case RTL_VER_05:
+ 	case RTL_VER_06:
+ 	case RTL_VER_07:
++>>>>>>> cce8334f4aac (r8152: move setting r8153b_rx_agg_chg_indicate())
  		break;
  	default:
+ 		r8153b_rx_agg_chg_indicate(tp);
  		break;
  	}
  
@@@ -2849,6 -3081,17 +2860,20 @@@ static void r8153_set_rx_early_timeout(
  			       ocp_data);
  		break;
  
++<<<<<<< HEAD
++=======
+ 	case RTL_VER_10:
+ 	case RTL_VER_11:
+ 	case RTL_VER_12:
+ 	case RTL_VER_13:
+ 	case RTL_VER_15:
+ 		ocp_write_word(tp, MCU_TYPE_USB, USB_RX_EARLY_TIMEOUT,
+ 			       640 / 8);
+ 		ocp_write_word(tp, MCU_TYPE_USB, USB_RX_EXTRA_AGGR_TMR,
+ 			       ocp_data);
+ 		break;
+ 
++>>>>>>> cce8334f4aac (r8152: move setting r8153b_rx_agg_chg_indicate())
  	default:
  		break;
  	}
@@@ -2871,6 -3114,16 +2896,18 @@@ static void r8153_set_rx_early_size(str
  		ocp_write_word(tp, MCU_TYPE_USB, USB_RX_EARLY_SIZE,
  			       ocp_data / 8);
  		break;
++<<<<<<< HEAD
++=======
+ 	case RTL_TEST_01:
+ 	case RTL_VER_10:
+ 	case RTL_VER_11:
+ 	case RTL_VER_12:
+ 	case RTL_VER_13:
+ 	case RTL_VER_15:
+ 		ocp_write_word(tp, MCU_TYPE_USB, USB_RX_EARLY_SIZE,
+ 			       ocp_data / 8);
+ 		break;
++>>>>>>> cce8334f4aac (r8152: move setting r8153b_rx_agg_chg_indicate())
  	default:
  		WARN_ON_ONCE(1);
  		break;
* Unmerged path drivers/net/usb/r8152.c
