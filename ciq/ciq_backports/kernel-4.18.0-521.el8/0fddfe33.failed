driver core: cpu: Unify redundant silly stubs

jira LE-1907
cve CVE-2023-20569
Rebuild_History Non-Buildable kernel-4.18.0-521.el8
commit-author Borislav Petkov (AMD) <bp@alien8.de>
commit 0fddfe338210aa018137c03030c581f5ea4be282
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-521.el8/0fddfe33.failed

Make them all a weak function, aliasing to a single function which
issues the "Not affected" string.

No functional changes.

	Suggested-by: Linus Torvalds <torvalds@linux-foundation.org>
	Signed-off-by: Borislav Petkov (AMD) <bp@alien8.de>
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Reviewed-by: Nikolay Borisov <nik.borisov@suse.com>
Link: https://lore.kernel.org/r/20230809102700.29449-3-bp@alien8.de
(cherry picked from commit 0fddfe338210aa018137c03030c581f5ea4be282)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/base/cpu.c
diff --cc drivers/base/cpu.c
index 87400da7f43b,054c81b65502..000000000000
--- a/drivers/base/cpu.c
+++ b/drivers/base/cpu.c
@@@ -563,17 -515,24 +513,32 @@@ ssize_t cpu_show_not_affected(struct de
  	return sysfs_emit(buf, "Not affected\n");
  }
  
- ssize_t __weak cpu_show_mmio_stale_data(struct device *dev,
- 					struct device_attribute *attr, char *buf)
- {
- 	return sysfs_emit(buf, "Not affected\n");
- }
+ #define CPU_SHOW_VULN_FALLBACK(func)					\
+ 	ssize_t cpu_show_##func(struct device *,			\
+ 				  struct device_attribute *, char *)	\
+ 		 __attribute__((weak, alias("cpu_show_not_affected")))
  
++<<<<<<< HEAD
 +ssize_t __weak cpu_show_retbleed(struct device *dev,
 +				 struct device_attribute *attr, char *buf)
 +{
 +	return sysfs_emit(buf, "Not affected\n");
 +}
++=======
+ CPU_SHOW_VULN_FALLBACK(meltdown);
+ CPU_SHOW_VULN_FALLBACK(spectre_v1);
+ CPU_SHOW_VULN_FALLBACK(spectre_v2);
+ CPU_SHOW_VULN_FALLBACK(spec_store_bypass);
+ CPU_SHOW_VULN_FALLBACK(l1tf);
+ CPU_SHOW_VULN_FALLBACK(mds);
+ CPU_SHOW_VULN_FALLBACK(tsx_async_abort);
+ CPU_SHOW_VULN_FALLBACK(itlb_multihit);
+ CPU_SHOW_VULN_FALLBACK(srbds);
+ CPU_SHOW_VULN_FALLBACK(mmio_stale_data);
+ CPU_SHOW_VULN_FALLBACK(retbleed);
+ CPU_SHOW_VULN_FALLBACK(spec_rstack_overflow);
+ CPU_SHOW_VULN_FALLBACK(gather_data_sampling);
++>>>>>>> 0fddfe338210 (driver core: cpu: Unify redundant silly stubs)
  
  ssize_t __weak cpu_show_gds(struct device *dev,
  			    struct device_attribute *attr, char *buf)
* Unmerged path drivers/base/cpu.c
