selftests: forwarding: Set default IPv6 traceroute utility

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-521.el8
commit-author Ido Schimmel <idosch@nvidia.com>
commit 38f7c44d6e760a8513557e27340d61b820c91b8f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-521.el8/38f7c44d.failed

The test uses the 'TROUTE6' environment variable to encode the name of
the IPv6 traceroute utility. By default (without a configuration file),
this variable is not set, resulting in failures:

 # ./ip6_forward_instats_vrf.sh
 TEST: ping6                                                         [ OK ]
 TEST: Ip6InTooBigErrors                                             [ OK ]
 TEST: Ip6InHdrErrors                                                [FAIL]
 TEST: Ip6InAddrErrors                                               [ OK ]
 TEST: Ip6InDiscards                                                 [ OK ]

Fix by setting a default utility name and skip the test if the utility
is not present.

Fixes: 0857d6f8c759 ("ipv6: When forwarding count rx stats on the orig netdev")
	Reported-by: Mirsad Todorovac <mirsad.todorovac@alu.unizg.hr>
Closes: https://lore.kernel.org/netdev/adc5e40d-d040-a65e-eb26-edf47dac5b02@alu.unizg.hr/
	Signed-off-by: Ido Schimmel <idosch@nvidia.com>
	Reviewed-by: Petr Machata <petrm@nvidia.com>
	Tested-by: Mirsad Todorovac <mirsad.todorovac@alu.unizg.hr>
	Reviewed-by: Hangbin Liu <liuhangbin@gmail.com>
	Acked-by: Nikolay Aleksandrov <razor@blackwall.org>
Link: https://lore.kernel.org/r/20230808141503.4060661-6-idosch@nvidia.com
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 38f7c44d6e760a8513557e27340d61b820c91b8f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/net/forwarding/lib.sh
diff --cc tools/testing/selftests/net/forwarding/lib.sh
index 273d47124398,40a8c1541b7f..000000000000
mode 100644,100755..100644
--- a/tools/testing/selftests/net/forwarding/lib.sh
+++ b/tools/testing/selftests/net/forwarding/lib.sh
@@@ -23,6 -23,14 +23,16 @@@ MC_CLI=${MC_CLI:=smcroutectl
  PING_TIMEOUT=${PING_TIMEOUT:=5}
  WAIT_TIMEOUT=${WAIT_TIMEOUT:=20}
  INTERFACE_TIMEOUT=${INTERFACE_TIMEOUT:=600}
++<<<<<<< HEAD
++=======
+ LOW_AGEING_TIME=${LOW_AGEING_TIME:=1000}
+ REQUIRE_JQ=${REQUIRE_JQ:=yes}
+ REQUIRE_MZ=${REQUIRE_MZ:=yes}
+ REQUIRE_MTOOLS=${REQUIRE_MTOOLS:=no}
+ STABLE_MAC_ADDRS=${STABLE_MAC_ADDRS:=no}
+ TCPDUMP_EXTRA_FLAGS=${TCPDUMP_EXTRA_FLAGS:=}
+ TROUTE6=${TROUTE6:=traceroute6}
++>>>>>>> 38f7c44d6e76 (selftests: forwarding: Set default IPv6 traceroute utility)
  
  relative_path="${BASH_SOURCE%/*}"
  if [[ "$relative_path" == "${BASH_SOURCE}" ]]; then
diff --git a/tools/testing/selftests/net/forwarding/ip6_forward_instats_vrf.sh b/tools/testing/selftests/net/forwarding/ip6_forward_instats_vrf.sh
index 9f5b3e2e5e95..49fa94b53a1c 100755
--- a/tools/testing/selftests/net/forwarding/ip6_forward_instats_vrf.sh
+++ b/tools/testing/selftests/net/forwarding/ip6_forward_instats_vrf.sh
@@ -14,6 +14,8 @@ ALL_TESTS="
 NUM_NETIFS=4
 source lib.sh
 
+require_command $TROUTE6
+
 h1_create()
 {
 	simple_if_init $h1 2001:1:1::2/64
* Unmerged path tools/testing/selftests/net/forwarding/lib.sh
